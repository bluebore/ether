{
    "docs": [
        {
            "location": "/", 
            "text": "English Doc\n\n\n\u4e2d\u6587\u6587\u6863", 
            "title": "Home"
        }, 
        {
            "location": "/#english-doc", 
            "text": "", 
            "title": "English Doc"
        }, 
        {
            "location": "/#_1", 
            "text": "", 
            "title": "\u4e2d\u6587\u6587\u6863"
        }, 
        {
            "location": "/cn/quick_start/", 
            "text": "\u5feb\u901f\u4e0a\u624b\n\n\n\u5feb\u901f\u4e5f\u5206\u4e24\u79cd\uff0c\u4e00\u79cd\u4e0d\u6c42\u751a\u89e3\u768410\u5206\u949f\u5feb\u901f\u4f53\u9a8c\uff0c\u4e00\u79cd\u662f\u77e5\u5176\u7136\u53c8\u77e5\u5176\u6240\u4ee5\u7136\u3002\n\n\n10\u5206\u949f\u5feb\u901f\u4f53\u9a8c\n\n\n\n\n\u6784\u5efaBFS\n\n\n./build.sh\n\n   build.sh\u4f1a\u81ea\u52a8\u4e0b\u8f7d\u3001\u7f16\u8bd1\u6240\u6709\u4f9d\u8d56\uff0c\u5e76\u6700\u540e\u7f16\u8bd1\u51fanameserver\u3001chunkserver\u3001bfs_client\u3001libbfs.a\u51e0\u4e2a\u4e8c\u8fdb\u5236\u3002\n\n   \u6ce8\uff1a\u8fd9\u6b65\u5982\u679c\u53d1\u73b0\u4ec0\u4e48\u95ee\u9898\uff0c\u53ef\u4ee5\u76f4\u63a5\u63d0\nIssue\n\uff0c\u5f53\u7136\u6211\u4eec\u4e5f\u6b22\u8fce\u4f60\u81ea\u5df1\u89e3\u51b3\u7684\u63d0\nPull request\n\u3002\n\n\n\u90e8\u7f72BFS\n\n\ncd sandbox;\n\n\n./deploy.sh\n\n   deploy.sh \u4f1a\u81ea\u52a8\u90e8\u7f72\u4e00\u5957\u67091\u4e2anameserver,4\u4e2achunkserver\u7684\u6a21\u62df\u96c6\u7fa4\u73af\u5883\u3002  \n\n\n\u542f\u52a8BFS\n\n\n./start_bfs.sh\n\n   start_bfs.sh\u4f1a\u542f\u52a8\u524d\u9762\u5f02\u6b65\u90e8\u7f72\u7684\u6a21\u62df\u96c6\u7fa4\u73af\u5883\n\n   \u53ef\u4ee5\u901a\u8fc7 \n./bfs_client stat\n \u67e5\u770b\u96c6\u7fa4\u540e\u542f\u52a8\u60c5\u51b5\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\nhttp://localhost:8828\n \u67e5\u770bweb\u9875\u9762\u4fe1\u606f\n\n   \u770b\u52304\u4e2a\u6d3b\u7684chunkserver, \u8bf4\u660e\u96c6\u7fa4\u542f\u52a8\u6210\u529f.  \n\n\n\u4f7f\u7528bfs_client\u4f53\u9a8cBFS\n\n   \u53ef\u4ee5\u4f7f\u7528bfs_client\u4e0e\u96c6\u7fa4\u4ea4\u4e92\uff0c\u76f4\u63a5\u8f93\u5165\n./bfs_client\n\u53ef\u4ee5\u770b\u5230\u63d0\u793a\uff0c\n\n   \u8fd9\u91cc\u4e3e\u51e0\u4e2a\u4f8b\u5b50\uff1a\n\n   list\uff1a ./bfs_client ls /\n\n   touchz: ./bfs_client touchz /empty_file\n\n   put: ./bfs_client put bfs_client /\n\n   get: ./bfs_client get /bfs_client ./bfs_client.bak  \n\n\n\u4f7f\u7528SDK\u8bbf\u95eeBFS\n\n \u00a0 \u5f85\u5b8c\u5584...\n\n\n\u4f7f\u7528bfs_mount\u628aBFS\u6302\u8f7d\u5230\u672c\u5730\u6587\u4ef6\u7cfb\u7edf\n\n   \u5b89\u88c5fuse(\u7248\u672c2.6\u4ee5\u4e0a2.8\u53ca\u4ee5\u4e0b)\n\n   \u4fee\u6539bfs\u6587\u4ef6\u5939\u4e0b\u7684Makefile\uff0c\u6dfb\u52a0\nFUSE_PATH=fuse\u5b89\u88c5\u8def\u5f84\n\n\nmake\n\u4ea7\u751f\u53ef\u6267\u884c\u6587\u4ef6\nbfs_mount\n\n   \u4f7f\u7528\u524d\u9762\u7684\u6b65\u9aa4\u542f\u52a8\u96c6\u7fa4\n\n   \u6302\u8f7d\uff1a\u76f4\u63a5\u8f93\u5165\n./bfs_mount\n\u53ef\u4ee5\u770b\u5230\u4f7f\u7528\u63d0\u793a\n\n   \u4f8b\u5b50\uff1a\n./bfs_mount /mnt/bfs -d -c 127.0.0.1:8827 -p /\n  \n\n\n\n\n\u4ece\u5165\u95e8\u5230\u7cbe\u901a\n\n\n\u4e3a\u4ec0\u4e48\u4f7f\u7528BFS\n\n\n\u4f20\u7edf\u7684\u5206\u5e03\u5f0f\u6587\u4ef6\u7cfb\u7edf(\u5982HDFS)Namenode\u662f\u4e00\u4e2a\u5355\u70b9\uff0c\u5bb9\u91cf\u548c\u541e\u5410\u91cf\u90fd\u4e0d\u4ee5\u6269\u5c55\uff0c\u540c\u65f6\u4f7f\u7528\u5916\u90e8\u7684\u65e5\u5fd7\u540c\u6b65\u5de5\u5177\uff08\u5982QJM\u3001ZooKeeper\uff09failover\u65f6\u95f4\u662f\u5206\u949f\u7ea7\u7684\u3002\n\nBFS\u4e3b\u8981\u4ece\u6269\u5c55\u6027\u548c\u6301\u7eed\u53ef\u7528\u4e24\u4e2a\u65b9\u9762\u505a\u4e86\u6539\u8fdb\uff0c\u91c7\u7528\u5206\u5e03\u5f0f\u7684NameServer\uff0c\u591aNameServer\u4e4b\u95f4\u4f7f\u7528\u5185\u7f6e\u7684Raft\u534f\u8bae\u505a\u65e5\u5fd7\u540c\u6b65\uff0c\u4fdd\u8bc1failover\u65f6\uff0c\u65b0\u4e3b\u4e00\u5b9a\u6709\u6700\u65b0\u7684\u72b6\u6001\u4e0d\u9700\u8981\u989d\u5916\u65e5\u5fd7\u540c\u6b65\uff0c\u89e3\u51b3\u4e86\u6269\u5c55\u6027\u548c\u53ef\u7528\u6027\u95ee\u9898\u3002  \n\n\nBFS\u90e8\u7f72\n\n\n\u4f9d\u8d56\n\n\nBFS\u4f7f\u7528\u4e86C++\u5b9e\u73b0\uff0c\u6240\u4ee5\u90e8\u7f72\u4e0d\u4f9d\u8d56Java\u865a\u62df\u673a\u3002\n\nBFS\u5185\u7f6e\u4e00\u81f4\u6027\u534f\u8bae\u9009\u4e3b\uff0c\u6240\u4ee5\u90e8\u7f72\u4e0d\u4f9d\u8d56\u5916\u90e8\u534f\u8c03\u6a21\u5757\u3002\n\n\u603b\u4e4b\uff0cBFS\u7684\u90e8\u7f72\u4e0d\u4f9d\u8d56\u5916\u90e8\u7cfb\u7edf\uff0c\u4f46\u4f60\u9700\u8981\u6709\u4e00\u4e2a\u4e3b\u6d41\u7684Linux\u53d1\u884c\u7248\uff1aRedHat\u3001CentOS\u6216\u8005Ubuntu\uff0c\u5e76\u6709Gcc4.8\u53ca\u4ee5\u4e0a\u7248\u672c\u7f16\u8bd1\u5668\u3002  \n\n\n\u914d\u7f6e\n\n\n\u4e00\u4e2a\u5178\u578b\u7684bfs\u914d\u7f6e\u6587\u4ef6:\n\n# \u516c\u5171\u914d\u7f6e\n\n--bfs_log=../log/bfs.log   # log\u6587\u4ef6\u7684\u5b58\u50a8\u8def\u5f84\n\n--bfs_log_size=5120        # \u5355\u4e2alog\u6587\u4ef6\u7684\u5927\u5c0f\n\n--bfs_log_limit=1024000    # \u603b\u7684log\u9650\u5236,\u8d85\u8fc7\u9650\u5236\u4f1a\u5220\u9664\u65e7\u7684log\n\n--bfs_log_level=4          # \u65e5\u5fd7\u7ea7\u522b DEBUG = 2, INFO = 4, WARNING = 8, FATAL = 16,\n\n--nameserver_nodes=ns1.baidu.com:8828,ns2.baidu.com:8828,ns3.baidu.com:8828 \u00a0 # NameServer\u8282\u70b9\u5217\u8868  \n\n\n#NameServer\u914d\u7f6e\n\n--ha_strategy=raft         # NameServer\u7684HA\u7b56\u7565, none,raft,master-slave 3\u9009\u4e00\n\n--node_index=0             # \u5f53\u524d\u8282\u70b9\u662fNameServer\u8282\u70b9\u5217\u8868\u7684\u7b2c\u51e0\u4e2a\n\n--keepalive_timeout=30     # ChunkServer\u5fc3\u8df3\u8d85\u65f6\u65f6\u95f4\n\n--namedb_path=/ssd1/meta   # NameServer\u7684meta\u4fe1\u606f\u5b58\u50a8\u8def\u5f84\n\n--default_replica_num=3    # \u9ed8\u8ba4\u6587\u4ef6\u526f\u672c\u6570  \n\n\n#ChunkServer\u914d\u7f6e\n\n--chunkserver_max_unfinished_byte=2147483648 # \u672a\u5b8c\u6210\u7684\u5199\u8bf7\u6c42\u4f1a\u5360\u7528ChunkServer\u5185\u5b58,\u4e3a\u907f\u514dOOM,\u8bbe\u7f6e\u4e86\u4e00\u4e2a\u4e0a\u9650\u8d85\u51fa\u540e\u5c31\u62d2\u7edd\u65b0\u8bf7\u6c42.\n\n--block_store_path=/home/disk1,/home/disk2 \u00a0 # \u6570\u636e\u5b58\u50a8\u76ee\u5f55, \u6bcf\u4e2a\u78c1\u76d8\u6307\u5b9a\u4e00\u4e2a  \n\n\n#SDK\u914d\u7f6e\n--sdk_file_reada_len=10485760 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0  # \u6587\u4ef6\u9884\u8bfb\u6700\u5927\u957f\u5ea6\uff0c\u5f53\u5224\u65ad\u7528\u6237\u5728\u987a\u5e8f\u8bfb\u6587\u4ef6\u65f6\uff0c\u4f1a\u81ea\u52a8\u5f00\u542f\u9884\u8bfb\u3002  \n\n\n\u5206\u5e03\u5f0f\u90e8\u7f72\n\n\nBFS\u7684\u5206\u5e03\u5f0f\u90e8\u7f72\u4e00\u822c\u5305\u542b3\u62165\u4e2aNameServer\u8282\u70b9\u548c3+\u4e2aChunkServer\u8282\u70b9\u3002\n\n1. \u5728\u6bcf\u4e2abfs.flag\u91cc\u901a\u8fc7\nnameserver_nodes\n\u6307\u5b9a\u6240\u6709NameServer\u7684\u4e3b\u673a\u540d\u548c\u7aef\u53e3\n\n2. \u5728NameServer\u7684bfs.flag\u91cc\u901a\u8fc7\nnode_index\n\u6307\u5b9aNameServer\u5bf9\u5e94\u7684\u5e8f\u53f7\n\n3. \u4ee5\u4efb\u610f\u987a\u5e8f\u6216\u5e76\u53d1\n\u542f\u52a83\u4e2aNameServer\n\n4. \u5728ChunkServer\u7684bfs.flag\u91cc\u901a\u8fc7block_store_path\u6307\u5b9aChunkServer\u4f7f\u7528\u7684\n\u78c1\u76d8\u8def\u5f84\n\uff0c\u5e76\u786e\u4fddchunkserver\u5bf9\u8fd9\u4e2a\u8def\u5f84\u62e5\u6709\n\u5199\u6743\u9650\n\u3002\n\n5. \u4ee5\u4efb\u610f\u987a\u5e8f\u6216\u5e76\u53d1\n\u542f\u52a8\u6240\u6709\u7684chunkserver\n\n6. \u901a\u8fc7\n./bfs_client stat\u68c0\u67e5\u96c6\u7fa4\u72b6\u6001\n\uff0c\u5982\u679c\u770b\u5230\u6240\u6709\u7684chunkserver\u5b58\u6d3b\uff0c\u5373\u642d\u5efa\u5b8c\u6210  \n\n\nBFS\u4f7f\u7528\n\n\n\u4f7f\u7528Demo\u53c2\u8003\nsrc/client/bfs_client.cc", 
            "title": "\u5feb\u901f\u5165\u95e8"
        }, 
        {
            "location": "/cn/quick_start/#_1", 
            "text": "\u5feb\u901f\u4e5f\u5206\u4e24\u79cd\uff0c\u4e00\u79cd\u4e0d\u6c42\u751a\u89e3\u768410\u5206\u949f\u5feb\u901f\u4f53\u9a8c\uff0c\u4e00\u79cd\u662f\u77e5\u5176\u7136\u53c8\u77e5\u5176\u6240\u4ee5\u7136\u3002", 
            "title": "\u5feb\u901f\u4e0a\u624b"
        }, 
        {
            "location": "/cn/quick_start/#10", 
            "text": "\u6784\u5efaBFS  ./build.sh \n   build.sh\u4f1a\u81ea\u52a8\u4e0b\u8f7d\u3001\u7f16\u8bd1\u6240\u6709\u4f9d\u8d56\uff0c\u5e76\u6700\u540e\u7f16\u8bd1\u51fanameserver\u3001chunkserver\u3001bfs_client\u3001libbfs.a\u51e0\u4e2a\u4e8c\u8fdb\u5236\u3002 \n   \u6ce8\uff1a\u8fd9\u6b65\u5982\u679c\u53d1\u73b0\u4ec0\u4e48\u95ee\u9898\uff0c\u53ef\u4ee5\u76f4\u63a5\u63d0 Issue \uff0c\u5f53\u7136\u6211\u4eec\u4e5f\u6b22\u8fce\u4f60\u81ea\u5df1\u89e3\u51b3\u7684\u63d0 Pull request \u3002  \u90e8\u7f72BFS  cd sandbox;  ./deploy.sh \n   deploy.sh \u4f1a\u81ea\u52a8\u90e8\u7f72\u4e00\u5957\u67091\u4e2anameserver,4\u4e2achunkserver\u7684\u6a21\u62df\u96c6\u7fa4\u73af\u5883\u3002    \u542f\u52a8BFS  ./start_bfs.sh \n   start_bfs.sh\u4f1a\u542f\u52a8\u524d\u9762\u5f02\u6b65\u90e8\u7f72\u7684\u6a21\u62df\u96c6\u7fa4\u73af\u5883 \n   \u53ef\u4ee5\u901a\u8fc7  ./bfs_client stat  \u67e5\u770b\u96c6\u7fa4\u540e\u542f\u52a8\u60c5\u51b5\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7 http://localhost:8828  \u67e5\u770bweb\u9875\u9762\u4fe1\u606f \n   \u770b\u52304\u4e2a\u6d3b\u7684chunkserver, \u8bf4\u660e\u96c6\u7fa4\u542f\u52a8\u6210\u529f.    \u4f7f\u7528bfs_client\u4f53\u9a8cBFS \n   \u53ef\u4ee5\u4f7f\u7528bfs_client\u4e0e\u96c6\u7fa4\u4ea4\u4e92\uff0c\u76f4\u63a5\u8f93\u5165 ./bfs_client \u53ef\u4ee5\u770b\u5230\u63d0\u793a\uff0c \n   \u8fd9\u91cc\u4e3e\u51e0\u4e2a\u4f8b\u5b50\uff1a \n   list\uff1a ./bfs_client ls / \n   touchz: ./bfs_client touchz /empty_file \n   put: ./bfs_client put bfs_client / \n   get: ./bfs_client get /bfs_client ./bfs_client.bak    \u4f7f\u7528SDK\u8bbf\u95eeBFS \n \u00a0 \u5f85\u5b8c\u5584...  \u4f7f\u7528bfs_mount\u628aBFS\u6302\u8f7d\u5230\u672c\u5730\u6587\u4ef6\u7cfb\u7edf \n   \u5b89\u88c5fuse(\u7248\u672c2.6\u4ee5\u4e0a2.8\u53ca\u4ee5\u4e0b) \n   \u4fee\u6539bfs\u6587\u4ef6\u5939\u4e0b\u7684Makefile\uff0c\u6dfb\u52a0 FUSE_PATH=fuse\u5b89\u88c5\u8def\u5f84  make \u4ea7\u751f\u53ef\u6267\u884c\u6587\u4ef6 bfs_mount \n   \u4f7f\u7528\u524d\u9762\u7684\u6b65\u9aa4\u542f\u52a8\u96c6\u7fa4 \n   \u6302\u8f7d\uff1a\u76f4\u63a5\u8f93\u5165 ./bfs_mount \u53ef\u4ee5\u770b\u5230\u4f7f\u7528\u63d0\u793a \n   \u4f8b\u5b50\uff1a ./bfs_mount /mnt/bfs -d -c 127.0.0.1:8827 -p /", 
            "title": "10\u5206\u949f\u5feb\u901f\u4f53\u9a8c"
        }, 
        {
            "location": "/cn/quick_start/#_2", 
            "text": "", 
            "title": "\u4ece\u5165\u95e8\u5230\u7cbe\u901a"
        }, 
        {
            "location": "/cn/quick_start/#bfs", 
            "text": "\u4f20\u7edf\u7684\u5206\u5e03\u5f0f\u6587\u4ef6\u7cfb\u7edf(\u5982HDFS)Namenode\u662f\u4e00\u4e2a\u5355\u70b9\uff0c\u5bb9\u91cf\u548c\u541e\u5410\u91cf\u90fd\u4e0d\u4ee5\u6269\u5c55\uff0c\u540c\u65f6\u4f7f\u7528\u5916\u90e8\u7684\u65e5\u5fd7\u540c\u6b65\u5de5\u5177\uff08\u5982QJM\u3001ZooKeeper\uff09failover\u65f6\u95f4\u662f\u5206\u949f\u7ea7\u7684\u3002 \nBFS\u4e3b\u8981\u4ece\u6269\u5c55\u6027\u548c\u6301\u7eed\u53ef\u7528\u4e24\u4e2a\u65b9\u9762\u505a\u4e86\u6539\u8fdb\uff0c\u91c7\u7528\u5206\u5e03\u5f0f\u7684NameServer\uff0c\u591aNameServer\u4e4b\u95f4\u4f7f\u7528\u5185\u7f6e\u7684Raft\u534f\u8bae\u505a\u65e5\u5fd7\u540c\u6b65\uff0c\u4fdd\u8bc1failover\u65f6\uff0c\u65b0\u4e3b\u4e00\u5b9a\u6709\u6700\u65b0\u7684\u72b6\u6001\u4e0d\u9700\u8981\u989d\u5916\u65e5\u5fd7\u540c\u6b65\uff0c\u89e3\u51b3\u4e86\u6269\u5c55\u6027\u548c\u53ef\u7528\u6027\u95ee\u9898\u3002", 
            "title": "\u4e3a\u4ec0\u4e48\u4f7f\u7528BFS"
        }, 
        {
            "location": "/cn/quick_start/#bfs_1", 
            "text": "", 
            "title": "BFS\u90e8\u7f72"
        }, 
        {
            "location": "/cn/quick_start/#_3", 
            "text": "BFS\u4f7f\u7528\u4e86C++\u5b9e\u73b0\uff0c\u6240\u4ee5\u90e8\u7f72\u4e0d\u4f9d\u8d56Java\u865a\u62df\u673a\u3002 \nBFS\u5185\u7f6e\u4e00\u81f4\u6027\u534f\u8bae\u9009\u4e3b\uff0c\u6240\u4ee5\u90e8\u7f72\u4e0d\u4f9d\u8d56\u5916\u90e8\u534f\u8c03\u6a21\u5757\u3002 \n\u603b\u4e4b\uff0cBFS\u7684\u90e8\u7f72\u4e0d\u4f9d\u8d56\u5916\u90e8\u7cfb\u7edf\uff0c\u4f46\u4f60\u9700\u8981\u6709\u4e00\u4e2a\u4e3b\u6d41\u7684Linux\u53d1\u884c\u7248\uff1aRedHat\u3001CentOS\u6216\u8005Ubuntu\uff0c\u5e76\u6709Gcc4.8\u53ca\u4ee5\u4e0a\u7248\u672c\u7f16\u8bd1\u5668\u3002", 
            "title": "\u4f9d\u8d56"
        }, 
        {
            "location": "/cn/quick_start/#_4", 
            "text": "\u4e00\u4e2a\u5178\u578b\u7684bfs\u914d\u7f6e\u6587\u4ef6: \n# \u516c\u5171\u914d\u7f6e \n--bfs_log=../log/bfs.log   # log\u6587\u4ef6\u7684\u5b58\u50a8\u8def\u5f84 \n--bfs_log_size=5120        # \u5355\u4e2alog\u6587\u4ef6\u7684\u5927\u5c0f \n--bfs_log_limit=1024000    # \u603b\u7684log\u9650\u5236,\u8d85\u8fc7\u9650\u5236\u4f1a\u5220\u9664\u65e7\u7684log \n--bfs_log_level=4          # \u65e5\u5fd7\u7ea7\u522b DEBUG = 2, INFO = 4, WARNING = 8, FATAL = 16, \n--nameserver_nodes=ns1.baidu.com:8828,ns2.baidu.com:8828,ns3.baidu.com:8828 \u00a0 # NameServer\u8282\u70b9\u5217\u8868    #NameServer\u914d\u7f6e \n--ha_strategy=raft         # NameServer\u7684HA\u7b56\u7565, none,raft,master-slave 3\u9009\u4e00 \n--node_index=0             # \u5f53\u524d\u8282\u70b9\u662fNameServer\u8282\u70b9\u5217\u8868\u7684\u7b2c\u51e0\u4e2a \n--keepalive_timeout=30     # ChunkServer\u5fc3\u8df3\u8d85\u65f6\u65f6\u95f4 \n--namedb_path=/ssd1/meta   # NameServer\u7684meta\u4fe1\u606f\u5b58\u50a8\u8def\u5f84 \n--default_replica_num=3    # \u9ed8\u8ba4\u6587\u4ef6\u526f\u672c\u6570    #ChunkServer\u914d\u7f6e \n--chunkserver_max_unfinished_byte=2147483648 # \u672a\u5b8c\u6210\u7684\u5199\u8bf7\u6c42\u4f1a\u5360\u7528ChunkServer\u5185\u5b58,\u4e3a\u907f\u514dOOM,\u8bbe\u7f6e\u4e86\u4e00\u4e2a\u4e0a\u9650\u8d85\u51fa\u540e\u5c31\u62d2\u7edd\u65b0\u8bf7\u6c42. \n--block_store_path=/home/disk1,/home/disk2 \u00a0 # \u6570\u636e\u5b58\u50a8\u76ee\u5f55, \u6bcf\u4e2a\u78c1\u76d8\u6307\u5b9a\u4e00\u4e2a    #SDK\u914d\u7f6e\n--sdk_file_reada_len=10485760 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0  # \u6587\u4ef6\u9884\u8bfb\u6700\u5927\u957f\u5ea6\uff0c\u5f53\u5224\u65ad\u7528\u6237\u5728\u987a\u5e8f\u8bfb\u6587\u4ef6\u65f6\uff0c\u4f1a\u81ea\u52a8\u5f00\u542f\u9884\u8bfb\u3002", 
            "title": "\u914d\u7f6e"
        }, 
        {
            "location": "/cn/quick_start/#_5", 
            "text": "BFS\u7684\u5206\u5e03\u5f0f\u90e8\u7f72\u4e00\u822c\u5305\u542b3\u62165\u4e2aNameServer\u8282\u70b9\u548c3+\u4e2aChunkServer\u8282\u70b9\u3002 \n1. \u5728\u6bcf\u4e2abfs.flag\u91cc\u901a\u8fc7 nameserver_nodes \u6307\u5b9a\u6240\u6709NameServer\u7684\u4e3b\u673a\u540d\u548c\u7aef\u53e3 \n2. \u5728NameServer\u7684bfs.flag\u91cc\u901a\u8fc7 node_index \u6307\u5b9aNameServer\u5bf9\u5e94\u7684\u5e8f\u53f7 \n3. \u4ee5\u4efb\u610f\u987a\u5e8f\u6216\u5e76\u53d1 \u542f\u52a83\u4e2aNameServer \n4. \u5728ChunkServer\u7684bfs.flag\u91cc\u901a\u8fc7block_store_path\u6307\u5b9aChunkServer\u4f7f\u7528\u7684 \u78c1\u76d8\u8def\u5f84 \uff0c\u5e76\u786e\u4fddchunkserver\u5bf9\u8fd9\u4e2a\u8def\u5f84\u62e5\u6709 \u5199\u6743\u9650 \u3002 \n5. \u4ee5\u4efb\u610f\u987a\u5e8f\u6216\u5e76\u53d1 \u542f\u52a8\u6240\u6709\u7684chunkserver \n6. \u901a\u8fc7 ./bfs_client stat\u68c0\u67e5\u96c6\u7fa4\u72b6\u6001 \uff0c\u5982\u679c\u770b\u5230\u6240\u6709\u7684chunkserver\u5b58\u6d3b\uff0c\u5373\u642d\u5efa\u5b8c\u6210", 
            "title": "\u5206\u5e03\u5f0f\u90e8\u7f72"
        }, 
        {
            "location": "/cn/quick_start/#bfs_2", 
            "text": "\u4f7f\u7528Demo\u53c2\u8003 src/client/bfs_client.cc", 
            "title": "BFS\u4f7f\u7528"
        }, 
        {
            "location": "/cn/README/", 
            "text": "BFS\u6587\u6863\u533a\n\n\n\u7528\u6237\u6587\u6863\n\n\n\u5feb\u901f\u5165\u95e8\n  \n\n\n\u5f00\u53d1\u6587\u6863\n\n\n\u9ad8\u53ef\u7528\u8bbe\u8ba1\n\n\n\u9700\u6c42\u6587\u6863\n\n\n\u603b\u4f53\u8bbe\u8ba1\u6587\u68631\n \n\u603b\u4f53\u8bbe\u8ba1\u6587\u68632\n \u9700\u8981\u5408\u5e76\u4e00\u4e0b\n\n\nRoadMap\n\n\n\u65e5\u5fd7\u89c4\u5219\n\n\nHA\u65e5\u5fd7\u538b\u7f29", 
            "title": "README"
        }, 
        {
            "location": "/cn/README/#bfs", 
            "text": "", 
            "title": "BFS\u6587\u6863\u533a"
        }, 
        {
            "location": "/cn/README/#_1", 
            "text": "\u5feb\u901f\u5165\u95e8", 
            "title": "\u7528\u6237\u6587\u6863"
        }, 
        {
            "location": "/cn/README/#_2", 
            "text": "\u9ad8\u53ef\u7528\u8bbe\u8ba1  \u9700\u6c42\u6587\u6863  \u603b\u4f53\u8bbe\u8ba1\u6587\u68631   \u603b\u4f53\u8bbe\u8ba1\u6587\u68632  \u9700\u8981\u5408\u5e76\u4e00\u4e0b  RoadMap  \u65e5\u5fd7\u89c4\u5219  HA\u65e5\u5fd7\u538b\u7f29", 
            "title": "\u5f00\u53d1\u6587\u6863"
        }, 
        {
            "location": "/cn/api/", 
            "text": "API\n\n\nFileSystem:  \n\n\nmkdir  \nls  \nrmdir  \nrename  \nstat  \nopen  \nrm\n\n\n\nFile:  \n\n\nread  \npread  \nwrite  \nclose  \nflush  \nsync", 
            "title": "API"
        }, 
        {
            "location": "/cn/api/#api", 
            "text": "FileSystem:    mkdir  \nls  \nrmdir  \nrename  \nstat  \nopen  \nrm  File:    read  \npread  \nwrite  \nclose  \nflush  \nsync", 
            "title": "API"
        }, 
        {
            "location": "/cn/bfs_desigin/", 
            "text": "BFS\u6574\u4f53\u8bbe\u8ba1\u6587\u6863\n\n\n\u80cc\u666f\n\n\n\u767e\u5ea6\u7684\u6838\u5fc3\u6570\u636e\u5e93Tera\u5c06\u6570\u636e\u6301\u4e45\u5316\u5728\u5206\u5e03\u5f0f\u6587\u4ef6\u7cfb\u7edf\u4e0a\uff0c\u5206\u5e03\u5f0f\u6587\u4ef6\u7cfb\u7edf\u7684\u6027\u80fd\u3001\u53ef\u7528\u6027\u548c\u6269\u5c55\u6027\u5bf9\u6574\u4e2a\u4e0a\u5c42\u641c\u7d22\u4e1a\u52a1\u7684\u7a33\u5b9a\u6027\u4e0e\u6548\u679c\u6709\u7740\u81f3\u5173\u91cd\u8981\u7684\u5f71\u54cd\u3002\u73b0\u6709\u7684\u5206\u5e03\u5f0f\u6587\u4ef6\u7cfb\u7edf\u65e0\u6cd5\u5f88\u597d\u5730\u6ee1\u8db3\u8fd9\u51e0\u65b9\u9762\u7684\u8981\u6c42\uff0c\u6240\u4ee5\u6211\u4eec\u4eceTera\u9700\u6c42\u51fa\u53d1\uff0c\u5f00\u53d1\u4e86\u767e\u5ea6\u81ea\u5df1\u7684\u5206\u5e03\u5f0f\u6587\u4ef6\u7cfb\u7edf\u3002\n\n\n\u7cfb\u7edf\u67b6\u6784\n\n\n\u7cfb\u7edf\u4e3b\u8981\u7531Nameserver\uff0cChunkserver\u548cClientSDk\u4e09\u90e8\u5206\u6784\u6210\u3002\u5176\u4e2dNameserver\u662fBFS\u7684\u201c\u5927\u8111\u201d\uff0c\u8d1f\u8d23\u6574\u4e2a\u6587\u4ef6\u7cfb\u7edf\u7684\u76ee\u5f55\u6811\u53ca\u6bcf\u4e2a\u6587\u4ef6\u7684\u5143\u4fe1\u606f\u7684\u6301\u4e45\u5316\u5b58\u50a8\u548c\u66f4\u65b0\uff1bChunkserver\u662f\u63d0\u4f9b\u6587\u4ef6\u8bfb\u5199\u670d\u52a1\u7684\u5b9e\u4f53\uff1bClientSDk\u5305\u62ec\u63d0\u4f9b\u7ed9\u7ba1\u7406\u5458\u4f7f\u7528\u7684\u7ba1\u7406\u547d\u4ee4\u5de5\u5177bfs_client\u548c\u7ed9\u7528\u6237\u4f7f\u7528\u7684SDK\u3002\u9664\u6b64\u4e4b\u5916\uff0cBFS\u8fd8\u63d0\u7528\u4e00\u4e2a\u53ef\u89c6\u5316Web\u754c\u9762\u7528\u4e8e\u5b9e\u65f6\u53cd\u6620\u96c6\u7fa4\u7684\u72b6\u6001\u3002\n\n\nNameserver\n\n\nNameserver\u662fBFS\u7684\u201c\u5927\u8111\u201d\uff0c\u8d1f\u8d23\u5b58\u50a8\u53ca\u66f4\u65b0\u76ee\u5f55\u6811\u53ca\u6bcf\u4e2a\u6587\u4ef6\u7684\u5143\u4fe1\u606f\uff0c\u6240\u6709\u9700\u8981\u8bfb\u53d6\u6216\u66f4\u65b0\u5143\u4fe1\u606f\u7684\u64cd\u4f5c\u90fd\u9700\u8981\u901a\u8fc7Nameserver\uff0c\u800cNameserver\u7684\u4e0d\u53ef\u7528\u5c06\u5bfc\u81f4\u6574\u4e2a\u6587\u4ef6\u7cfb\u7edf\u762b\u75ea\u3002\u56e0\u6b64\uff0c\u5728BFS\u7684\u8bbe\u8ba1\u4e2d\uff0c\u6211\u4eec\u91cd\u70b9\u5173\u6ce8Nameserver\u7684\u6027\u80fd\u548c\u53ef\u7528\u6027\u3002\n\n\nNameserver\u4e2d\u7684\u7c7b\n\n\nNameserver\u4e2d\u4e3b\u8981\u7ef4\u62a4\u4e09\u4e2a\u7c7b\uff0c\u76ee\u5f55\u6811\uff0cBlockMapping\u4ee5\u53caChunkserverManager\u3002\n\n\n\u76ee\u5f55\u6811\n\n\nBFS\u7684\u8bbe\u8ba1\u76ee\u6807\u662f\u5b58\u50a8\u6d77\u91cf\u6587\u4ef6\uff0c\u56e0\u6b64\u76ee\u5f55\u6811\u7ed3\u6784\u53ef\u80fd\u65e0\u6cd5\u5168\u90e8\u5b58\u5728\u5185\u5b58\u4e2d\u3002\u800c\u5982\u524d\u9762\u6240\u8bf4\uff0c\u4f5c\u4e3a\u5168\u5c40\u5143\u4fe1\u606f\u7684\u552f\u4e00\u7ba1\u7406\u8005\uff0c\u76ee\u5f55\u6811\u7ed3\u6784\u9700\u8981\u652f\u6301\u5927\u541e\u5410\u7684\u8bbf\u95ee\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u9009\u62e9leveldb\u6765\u5b58\u50a8BFS\u7684\u76ee\u5f55\u6811\u3002\n\n\n\u76ee\u5f55\u6811\u5b58\u50a8\n\n\n\u5728BFS\u7684\u76ee\u5f55\u6811\u4e2d\uff0c\u6bcf\u4e00\u4e2a\u76ee\u5f55\u6216\u6587\u4ef6\u7684\u5b58\u50a8\u683c\u5f0f\u4e3a \n\u7236\u76ee\u5f55 entry_id + \u76ee\u5f55/\u6587\u4ef6\u540d -\n \u76ee\u5f55/\u6587\u4ef6\u5143\u4fe1\u606f\n\u3002\u5176\u4e2d\nentry_id\n\u662f\u7528\u6765\u552f\u4e00\u6807\u8bc6\u67d0\u4e2a\u76ee\u5f55\u6216\u6587\u4ef6\u7684id\uff0c\u6839\u76ee\u5f55\u7684\nentry_id\n\u4e3a1\uff0c\n\u7236\u76ee\u5f55entry_id\n\u4e3a1\uff0c\u76ee\u5f55\u7684\u5143\u4fe1\u606f\u5305\u62ec\u76ee\u5f55\u7684\nentry_id\n\u3001\u8bfb\u5199\u6743\u9650\u53ca\u521b\u5efa\u65f6\u95f4\u7b49\uff1b\u6587\u4ef6\u7684\u5143\u4fe1\u606f\u8fd8\u4f1a\u5305\u62ec\u6587\u4ef6\u7684\u5927\u5c0f\uff0c\u7248\u672c\uff0c\u526f\u672c\u6570\u91cf\uff0c\u53ca\u6587\u4ef6\u5bf9\u5e94\u7684\u6240\u6709block\u7684\nblock_id\n\u7b49\u3002\u4f8b\u5982\u5f62\u5982\n/home/dir/file\n\u7684\u4e00\u4e2a\u76ee\u5f55\u7ed3\u6784\u5728BFS\u4e2d\u7684\u5b9e\u9645\u5b58\u50a8\u5982\u4e0b\uff1a\n\n\n\n\n0/\n\n1home -\n meta(\nentry_id\n=2, ctime=...)\n\n2dir -\n meta(\nentry_id\n=3, ctime=...)\n\n3file -\n meta(\nentry_id\n=4, block=1,2,3, size=...)  \n\n\n\n\n\u8fd9\u6837\u7684\u8bbe\u8ba1\u53ef\u4ee5\u5b9e\u73b0\u9ad8\u6548\u7684list\u548crename\u64cd\u4f5c\u3002\n\n\n\u6587\u4ef6\u67e5\u627e\n\n\n\u67e5\u627e\u6587\u4ef6\u65f6\u6309\u5c42\u7ea7\u67e5\u627e\uff0c\u5148\u67e5\u627e\u5230\u7236\u76ee\u5f55\u7684\nentry_id\n\uff0c\u518d\u4ee5\u7236\u76ee\u5f55\nentry_id\n + \u5b50\u76ee\u5f55\u540d\u4e3akey\u67e5\u627e\u5b50\u76ee\u5f55\u7684\nentry_id\n\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002\u4f8b\u5982\uff0c\u67e5\u627e\n/home/dir/file\n\u7684\u8fc7\u7a0b\u5982\u4e0b\uff1a\n\n\n\n\n\u67e5\u627e\u6839\u76ee\u5f55\u7684\nentry_id\n\uff0c\u518d\u4ee5\u6839\u76ee\u5f55\u7684\nentry_id\n+home\uff0c\u4e5f\u5c31\u662f\n1home\n\uff0c\u8bfb\u53d6/home\u76ee\u5f55\u7684meta\u4fe1\u606f\uff0c\u83b7\u5f97/home\u7684\nentry_id\n\uff0c2\n\n\u540c\u4e0a\u67e5\u627e\n2dir\n\u8bfb\u53d6\nentry_id\n\uff0c3\n\n\u6700\u540e\u53d6\u5f97\n3file\n  \n\n\n\n\n\u67e5\u627e\u6587\u4ef6\u7684\u590d\u6742\u5ea6\u7b49\u4e8e\u76ee\u5f55\u6df1\u5ea6\u3002\n\n\nlist\u76ee\u5f55\n\n\n\u56e0\u4e3a\u76ee\u5f55\u6811\u5728leveldb\u4e2d\u5b58\u50a8\u7684key\u4e3a\n\u7236\u76ee\u5f55entry_id+\u540d\u5b57\n\uff0c\u6240\u4ee5\u540c\u4e00\u76ee\u5f55\u4e0b\u7684\u76ee\u5f55\u548c\u6587\u4ef6\u90fd\u6709\u540c\u6837\u7684\u524d\u7f00\u3002\u53ea\u9700\u67e5\u627e\u5230\u7236\u76ee\u5f55\u7684\nentry_id\n\u518d\u626b\u63cf\u51fa\u4ee5\u6b64\nentry_id\n\u5f00\u5934\u7684\u6570\u636e\uff0c\u5c31\u53ef\u4ee5\u83b7\u5f97\u8be5\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u76ee\u5f55\u548c\u6587\u4ef6\u3002\n\n\nrename\n\n\n\u53ea\u9700\u66f4\u6539\n\u7236\u76ee\u5f55entry_id\n\u548c\u6587\u4ef6\u540d\u5c31\u53ef\u4ee5\u5b9e\u73b0rename\u3002\n\n\nBlockMapping\n\n\n\u5728BFS\u4e2d\uff0c\u6587\u4ef6\u88ab\u5207\u5206\u6210block\uff0c\u6bcf\u4e00\u4e2ablock\u90fd\u6709\u4e00\u4e2a\u552f\u4e00\u7684id\u4f5c\u4e3a\u6807\u8bc6\uff0c\u79f0\u4e3ablock_id\u3002\u6bcf\u4e2ablock\u90fd\u4f1a\u6709\u591a\u4e2a\u526f\u672c\uff0c\u5b58\u50a8\u5728\u591a\u4e2aChunkserver\u4e0a\uff08\u9ed8\u8ba4\u4e3a\u4e09\u4e2a\uff09\uff0c\u4ee5\u63d0\u9ad8\u6570\u636e\u7684\u53ef\u9760\u6027\u548c\u53ef\u7528\u6027\uff0c\u6bcf\u4e00\u4e2a\u526f\u672c\u79f0\u4e3a\u4e00\u4e2areplica\u3002BlockMapping\u7ef4\u62a4\u4e86block\u548c\u5176replica\u6240\u5728Chunkserver\u7684\u6620\u5c04\u5173\u7cfb\u3002\n\n\nChunkserverManager\n\n\nChunkserverManager\u4e3b\u8981\u7ef4\u62a4\u96c6\u7fa4\u4e2d\u6240\u6709Chunkserver\u7684\u72b6\u6001\u3002\n\n\n\u5fc3\u8df3\n\n\n\u6bcf\u4e2aChunkserver\u5b9a\u65f6\u5411Nameserver\u53d1\u9001\u5fc3\u8df3\uff0c\u5fc3\u8df3\u5185\u5bb9\u5305\u62ec\u5f53\u524dChunkserver\u7684\u8bfb\u5199\u8d1f\u8f7d\uff0c\u673a\u5668\u78c1\u76d8\u8d1f\u8f7d\u7b49\u7edf\u8ba1\u4fe1\u606f\u3002ChunkserverManager\u7ef4\u62a4\u4e86\u8fd9\u4e9b\u4fe1\u606f\u3002\u5982\u679cChunkserver\u8fde\u7eed\u4e00\u6bb5\u65f6\u95f4\u90fd\u6ca1\u6709\u53d1\u9001\u5fc3\u8df3\uff0cNameserver\u4f1a\u8ba4\u4e3a\u8fd9\u4e2aChunkserver\u5df2\u7ecf\u6302\u6389\uff0c\u4ece\u800c\u53d1\u8d77block\u7684\u5185\u5b58\u72b6\u6001\u66f4\u65b0\u3001\u526f\u672c\u6062\u590d\u7b49\u64cd\u4f5c\u3002\n\n\n\u8d1f\u8f7d\u5747\u8861\n\n\nNameserver\u4e2d\u7684\u4e3b\u8981\u64cd\u4f5c\n\n\n\u521b\u5efa\u6587\u4ef6\n\n\nSDK\u7aef\u5411Nameserver\u53d1\u8d77\u521b\u5efa\u6587\u4ef6\u7684\u64cd\u4f5c\uff0cNameserver\u9996\u5148\u68c0\u67e5\u6587\u4ef6\u8def\u5f84\u7684\u5408\u6cd5\u6027\uff0c\u7136\u540e\u7531ChunkserverManager\u6839\u636e\u8d1f\u8f7d\u5747\u8861\u903b\u8f91\u9009\u53d6Chunkserver\uff0c\u8bb0\u5f55\u5728BlockMapping\u91cc\uff0c\u7136\u540e\u8fd4\u56de\u7ed9SDK\uff0cSDK\u518d\u5411\u4e09\u4e2aChunkserver\u53d1\u8d77\u5199\u8bf7\u6c42\u3002", 
            "title": "\u603b\u4f53\u8bbe\u8ba1"
        }, 
        {
            "location": "/cn/bfs_desigin/#bfs", 
            "text": "", 
            "title": "BFS\u6574\u4f53\u8bbe\u8ba1\u6587\u6863"
        }, 
        {
            "location": "/cn/bfs_desigin/#_1", 
            "text": "\u767e\u5ea6\u7684\u6838\u5fc3\u6570\u636e\u5e93Tera\u5c06\u6570\u636e\u6301\u4e45\u5316\u5728\u5206\u5e03\u5f0f\u6587\u4ef6\u7cfb\u7edf\u4e0a\uff0c\u5206\u5e03\u5f0f\u6587\u4ef6\u7cfb\u7edf\u7684\u6027\u80fd\u3001\u53ef\u7528\u6027\u548c\u6269\u5c55\u6027\u5bf9\u6574\u4e2a\u4e0a\u5c42\u641c\u7d22\u4e1a\u52a1\u7684\u7a33\u5b9a\u6027\u4e0e\u6548\u679c\u6709\u7740\u81f3\u5173\u91cd\u8981\u7684\u5f71\u54cd\u3002\u73b0\u6709\u7684\u5206\u5e03\u5f0f\u6587\u4ef6\u7cfb\u7edf\u65e0\u6cd5\u5f88\u597d\u5730\u6ee1\u8db3\u8fd9\u51e0\u65b9\u9762\u7684\u8981\u6c42\uff0c\u6240\u4ee5\u6211\u4eec\u4eceTera\u9700\u6c42\u51fa\u53d1\uff0c\u5f00\u53d1\u4e86\u767e\u5ea6\u81ea\u5df1\u7684\u5206\u5e03\u5f0f\u6587\u4ef6\u7cfb\u7edf\u3002", 
            "title": "\u80cc\u666f"
        }, 
        {
            "location": "/cn/bfs_desigin/#_2", 
            "text": "\u7cfb\u7edf\u4e3b\u8981\u7531Nameserver\uff0cChunkserver\u548cClientSDk\u4e09\u90e8\u5206\u6784\u6210\u3002\u5176\u4e2dNameserver\u662fBFS\u7684\u201c\u5927\u8111\u201d\uff0c\u8d1f\u8d23\u6574\u4e2a\u6587\u4ef6\u7cfb\u7edf\u7684\u76ee\u5f55\u6811\u53ca\u6bcf\u4e2a\u6587\u4ef6\u7684\u5143\u4fe1\u606f\u7684\u6301\u4e45\u5316\u5b58\u50a8\u548c\u66f4\u65b0\uff1bChunkserver\u662f\u63d0\u4f9b\u6587\u4ef6\u8bfb\u5199\u670d\u52a1\u7684\u5b9e\u4f53\uff1bClientSDk\u5305\u62ec\u63d0\u4f9b\u7ed9\u7ba1\u7406\u5458\u4f7f\u7528\u7684\u7ba1\u7406\u547d\u4ee4\u5de5\u5177bfs_client\u548c\u7ed9\u7528\u6237\u4f7f\u7528\u7684SDK\u3002\u9664\u6b64\u4e4b\u5916\uff0cBFS\u8fd8\u63d0\u7528\u4e00\u4e2a\u53ef\u89c6\u5316Web\u754c\u9762\u7528\u4e8e\u5b9e\u65f6\u53cd\u6620\u96c6\u7fa4\u7684\u72b6\u6001\u3002", 
            "title": "\u7cfb\u7edf\u67b6\u6784"
        }, 
        {
            "location": "/cn/bfs_desigin/#nameserver", 
            "text": "Nameserver\u662fBFS\u7684\u201c\u5927\u8111\u201d\uff0c\u8d1f\u8d23\u5b58\u50a8\u53ca\u66f4\u65b0\u76ee\u5f55\u6811\u53ca\u6bcf\u4e2a\u6587\u4ef6\u7684\u5143\u4fe1\u606f\uff0c\u6240\u6709\u9700\u8981\u8bfb\u53d6\u6216\u66f4\u65b0\u5143\u4fe1\u606f\u7684\u64cd\u4f5c\u90fd\u9700\u8981\u901a\u8fc7Nameserver\uff0c\u800cNameserver\u7684\u4e0d\u53ef\u7528\u5c06\u5bfc\u81f4\u6574\u4e2a\u6587\u4ef6\u7cfb\u7edf\u762b\u75ea\u3002\u56e0\u6b64\uff0c\u5728BFS\u7684\u8bbe\u8ba1\u4e2d\uff0c\u6211\u4eec\u91cd\u70b9\u5173\u6ce8Nameserver\u7684\u6027\u80fd\u548c\u53ef\u7528\u6027\u3002", 
            "title": "Nameserver"
        }, 
        {
            "location": "/cn/bfs_desigin/#nameserver_1", 
            "text": "Nameserver\u4e2d\u4e3b\u8981\u7ef4\u62a4\u4e09\u4e2a\u7c7b\uff0c\u76ee\u5f55\u6811\uff0cBlockMapping\u4ee5\u53caChunkserverManager\u3002", 
            "title": "Nameserver\u4e2d\u7684\u7c7b"
        }, 
        {
            "location": "/cn/bfs_desigin/#_3", 
            "text": "BFS\u7684\u8bbe\u8ba1\u76ee\u6807\u662f\u5b58\u50a8\u6d77\u91cf\u6587\u4ef6\uff0c\u56e0\u6b64\u76ee\u5f55\u6811\u7ed3\u6784\u53ef\u80fd\u65e0\u6cd5\u5168\u90e8\u5b58\u5728\u5185\u5b58\u4e2d\u3002\u800c\u5982\u524d\u9762\u6240\u8bf4\uff0c\u4f5c\u4e3a\u5168\u5c40\u5143\u4fe1\u606f\u7684\u552f\u4e00\u7ba1\u7406\u8005\uff0c\u76ee\u5f55\u6811\u7ed3\u6784\u9700\u8981\u652f\u6301\u5927\u541e\u5410\u7684\u8bbf\u95ee\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u9009\u62e9leveldb\u6765\u5b58\u50a8BFS\u7684\u76ee\u5f55\u6811\u3002", 
            "title": "\u76ee\u5f55\u6811"
        }, 
        {
            "location": "/cn/bfs_desigin/#_4", 
            "text": "\u5728BFS\u7684\u76ee\u5f55\u6811\u4e2d\uff0c\u6bcf\u4e00\u4e2a\u76ee\u5f55\u6216\u6587\u4ef6\u7684\u5b58\u50a8\u683c\u5f0f\u4e3a  \u7236\u76ee\u5f55 entry_id + \u76ee\u5f55/\u6587\u4ef6\u540d -  \u76ee\u5f55/\u6587\u4ef6\u5143\u4fe1\u606f \u3002\u5176\u4e2d entry_id \u662f\u7528\u6765\u552f\u4e00\u6807\u8bc6\u67d0\u4e2a\u76ee\u5f55\u6216\u6587\u4ef6\u7684id\uff0c\u6839\u76ee\u5f55\u7684 entry_id \u4e3a1\uff0c \u7236\u76ee\u5f55entry_id \u4e3a1\uff0c\u76ee\u5f55\u7684\u5143\u4fe1\u606f\u5305\u62ec\u76ee\u5f55\u7684 entry_id \u3001\u8bfb\u5199\u6743\u9650\u53ca\u521b\u5efa\u65f6\u95f4\u7b49\uff1b\u6587\u4ef6\u7684\u5143\u4fe1\u606f\u8fd8\u4f1a\u5305\u62ec\u6587\u4ef6\u7684\u5927\u5c0f\uff0c\u7248\u672c\uff0c\u526f\u672c\u6570\u91cf\uff0c\u53ca\u6587\u4ef6\u5bf9\u5e94\u7684\u6240\u6709block\u7684 block_id \u7b49\u3002\u4f8b\u5982\u5f62\u5982 /home/dir/file \u7684\u4e00\u4e2a\u76ee\u5f55\u7ed3\u6784\u5728BFS\u4e2d\u7684\u5b9e\u9645\u5b58\u50a8\u5982\u4e0b\uff1a   0/ \n1home -  meta( entry_id =2, ctime=...) \n2dir -  meta( entry_id =3, ctime=...) \n3file -  meta( entry_id =4, block=1,2,3, size=...)     \u8fd9\u6837\u7684\u8bbe\u8ba1\u53ef\u4ee5\u5b9e\u73b0\u9ad8\u6548\u7684list\u548crename\u64cd\u4f5c\u3002", 
            "title": "\u76ee\u5f55\u6811\u5b58\u50a8"
        }, 
        {
            "location": "/cn/bfs_desigin/#_5", 
            "text": "\u67e5\u627e\u6587\u4ef6\u65f6\u6309\u5c42\u7ea7\u67e5\u627e\uff0c\u5148\u67e5\u627e\u5230\u7236\u76ee\u5f55\u7684 entry_id \uff0c\u518d\u4ee5\u7236\u76ee\u5f55 entry_id  + \u5b50\u76ee\u5f55\u540d\u4e3akey\u67e5\u627e\u5b50\u76ee\u5f55\u7684 entry_id \uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002\u4f8b\u5982\uff0c\u67e5\u627e /home/dir/file \u7684\u8fc7\u7a0b\u5982\u4e0b\uff1a   \u67e5\u627e\u6839\u76ee\u5f55\u7684 entry_id \uff0c\u518d\u4ee5\u6839\u76ee\u5f55\u7684 entry_id +home\uff0c\u4e5f\u5c31\u662f 1home \uff0c\u8bfb\u53d6/home\u76ee\u5f55\u7684meta\u4fe1\u606f\uff0c\u83b7\u5f97/home\u7684 entry_id \uff0c2 \n\u540c\u4e0a\u67e5\u627e 2dir \u8bfb\u53d6 entry_id \uff0c3 \n\u6700\u540e\u53d6\u5f97 3file      \u67e5\u627e\u6587\u4ef6\u7684\u590d\u6742\u5ea6\u7b49\u4e8e\u76ee\u5f55\u6df1\u5ea6\u3002", 
            "title": "\u6587\u4ef6\u67e5\u627e"
        }, 
        {
            "location": "/cn/bfs_desigin/#list", 
            "text": "\u56e0\u4e3a\u76ee\u5f55\u6811\u5728leveldb\u4e2d\u5b58\u50a8\u7684key\u4e3a \u7236\u76ee\u5f55entry_id+\u540d\u5b57 \uff0c\u6240\u4ee5\u540c\u4e00\u76ee\u5f55\u4e0b\u7684\u76ee\u5f55\u548c\u6587\u4ef6\u90fd\u6709\u540c\u6837\u7684\u524d\u7f00\u3002\u53ea\u9700\u67e5\u627e\u5230\u7236\u76ee\u5f55\u7684 entry_id \u518d\u626b\u63cf\u51fa\u4ee5\u6b64 entry_id \u5f00\u5934\u7684\u6570\u636e\uff0c\u5c31\u53ef\u4ee5\u83b7\u5f97\u8be5\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u76ee\u5f55\u548c\u6587\u4ef6\u3002", 
            "title": "list\u76ee\u5f55"
        }, 
        {
            "location": "/cn/bfs_desigin/#rename", 
            "text": "\u53ea\u9700\u66f4\u6539 \u7236\u76ee\u5f55entry_id \u548c\u6587\u4ef6\u540d\u5c31\u53ef\u4ee5\u5b9e\u73b0rename\u3002", 
            "title": "rename"
        }, 
        {
            "location": "/cn/bfs_desigin/#blockmapping", 
            "text": "\u5728BFS\u4e2d\uff0c\u6587\u4ef6\u88ab\u5207\u5206\u6210block\uff0c\u6bcf\u4e00\u4e2ablock\u90fd\u6709\u4e00\u4e2a\u552f\u4e00\u7684id\u4f5c\u4e3a\u6807\u8bc6\uff0c\u79f0\u4e3ablock_id\u3002\u6bcf\u4e2ablock\u90fd\u4f1a\u6709\u591a\u4e2a\u526f\u672c\uff0c\u5b58\u50a8\u5728\u591a\u4e2aChunkserver\u4e0a\uff08\u9ed8\u8ba4\u4e3a\u4e09\u4e2a\uff09\uff0c\u4ee5\u63d0\u9ad8\u6570\u636e\u7684\u53ef\u9760\u6027\u548c\u53ef\u7528\u6027\uff0c\u6bcf\u4e00\u4e2a\u526f\u672c\u79f0\u4e3a\u4e00\u4e2areplica\u3002BlockMapping\u7ef4\u62a4\u4e86block\u548c\u5176replica\u6240\u5728Chunkserver\u7684\u6620\u5c04\u5173\u7cfb\u3002", 
            "title": "BlockMapping"
        }, 
        {
            "location": "/cn/bfs_desigin/#chunkservermanager", 
            "text": "ChunkserverManager\u4e3b\u8981\u7ef4\u62a4\u96c6\u7fa4\u4e2d\u6240\u6709Chunkserver\u7684\u72b6\u6001\u3002", 
            "title": "ChunkserverManager"
        }, 
        {
            "location": "/cn/bfs_desigin/#_6", 
            "text": "\u6bcf\u4e2aChunkserver\u5b9a\u65f6\u5411Nameserver\u53d1\u9001\u5fc3\u8df3\uff0c\u5fc3\u8df3\u5185\u5bb9\u5305\u62ec\u5f53\u524dChunkserver\u7684\u8bfb\u5199\u8d1f\u8f7d\uff0c\u673a\u5668\u78c1\u76d8\u8d1f\u8f7d\u7b49\u7edf\u8ba1\u4fe1\u606f\u3002ChunkserverManager\u7ef4\u62a4\u4e86\u8fd9\u4e9b\u4fe1\u606f\u3002\u5982\u679cChunkserver\u8fde\u7eed\u4e00\u6bb5\u65f6\u95f4\u90fd\u6ca1\u6709\u53d1\u9001\u5fc3\u8df3\uff0cNameserver\u4f1a\u8ba4\u4e3a\u8fd9\u4e2aChunkserver\u5df2\u7ecf\u6302\u6389\uff0c\u4ece\u800c\u53d1\u8d77block\u7684\u5185\u5b58\u72b6\u6001\u66f4\u65b0\u3001\u526f\u672c\u6062\u590d\u7b49\u64cd\u4f5c\u3002", 
            "title": "\u5fc3\u8df3"
        }, 
        {
            "location": "/cn/bfs_desigin/#_7", 
            "text": "", 
            "title": "\u8d1f\u8f7d\u5747\u8861"
        }, 
        {
            "location": "/cn/bfs_desigin/#nameserver_2", 
            "text": "", 
            "title": "Nameserver\u4e2d\u7684\u4e3b\u8981\u64cd\u4f5c"
        }, 
        {
            "location": "/cn/bfs_desigin/#_8", 
            "text": "SDK\u7aef\u5411Nameserver\u53d1\u8d77\u521b\u5efa\u6587\u4ef6\u7684\u64cd\u4f5c\uff0cNameserver\u9996\u5148\u68c0\u67e5\u6587\u4ef6\u8def\u5f84\u7684\u5408\u6cd5\u6027\uff0c\u7136\u540e\u7531ChunkserverManager\u6839\u636e\u8d1f\u8f7d\u5747\u8861\u903b\u8f91\u9009\u53d6Chunkserver\uff0c\u8bb0\u5f55\u5728BlockMapping\u91cc\uff0c\u7136\u540e\u8fd4\u56de\u7ed9SDK\uff0cSDK\u518d\u5411\u4e09\u4e2aChunkserver\u53d1\u8d77\u5199\u8bf7\u6c42\u3002", 
            "title": "\u521b\u5efa\u6587\u4ef6"
        }, 
        {
            "location": "/cn/bfs_HA/", 
            "text": "BFS Master \u9ad8\u53ef\u7528\u8bbe\u8ba1\u65b9\u6848\n\n\n\u80cc\u666f\n\n\n\u5728BFS\u4e2d\uff0cnameserver\u8d1f\u8d23\u7ba1\u7406\u6587\u4ef6\u5143\u4fe1\u606f\u4ee5\u53ca\u6240\u6709chunkserver\u7684\u72b6\u6001\u4fe1\u606f\uff0c\u662f\u6574\u4e2a\u7cfb\u7edf\u4e2d\u552f\u4e00\u62e5\u6709\u5168\u5c40\u4fe1\u606f\u7684\u6a21\u5757\uff0c\u540c\u65f6\u4e5f\u6210\u4e3a\u4e86\u7cfb\u7edf\u7684\u5355\u70b9\u3002nameserver\u7684\u4e0d\u53ef\u7528\u4f1a\u76f4\u63a5\u5bfc\u81f4\u6587\u4ef6\u7cfb\u7edf\u7684\u762b\u75ea\uff0c\u4e8e\u662f\u63d0\u9ad8nameserver\u7684\u53ef\u7528\u6027\u81f3\u5173\u91cd\u8981\u3002  \n\n\n\u6574\u4f53\u8bbe\u8ba1\n\n\n\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u6211\u4eec\u5c06nameserver\u6269\u5c55\u4e3a\u96c6\u7fa4\uff0cClient\u53ea\u4e0e\u96c6\u7fa4Leader\u8fdb\u884c\u4ea4\u4e92\u3002\u6bcf\u4e00\u4e2anameserver\u4e2d\u6709\u4e00\u4e2a\u540c\u6b65\u6a21\u5757\uff08Sync\uff09\uff0c\u8d1f\u8d23\u96c6\u7fa4\u95f4\u7684\u72b6\u6001\u540c\u6b65\uff0c\u4fdd\u8bc1\u5143\u6570\u636e\u7684\u4e00\u81f4\u6027\u3002\n\n\n\n\n\n\n\n\nSync\u6a21\u5757\n\nSync\u6a21\u5757\u4e3b\u8981\u6709\u4e24\u4e2a\u529f\u80fd\uff0c\u9009\u4e3b\u548c\u65e5\u5fd7\u540c\u6b65\u3002\u9009\u4e3b\u64cd\u4f5c\u5c31\u662f\u5728nameserver\u4e2d\u786e\u5b9a\u552f\u4e00\u4e00\u4e2aLeader\uff0c\u5e76\u4e14\u5728Leader\u5f02\u5e38\u540e\u8fc5\u901f\u9009\u51fa\u65b0\u4efbLeader\u3002\u65e5\u5fd7\u540c\u6b65\u64cd\u4f5c\u5b9e\u9645\u4e0a\u5c31\u662f\u540c\u6b65Nameserver\u4e2d\u6240\u6709\u9700\u8981\u843d\u5730\u7684\u6570\u636e\u5199\u64cd\u4f5c\u3002Sync\u6a21\u5757\u8bbe\u8ba1\u4e3a\u4e0eNameserver\u677e\u8026\u5408\uff0c\u4ec5\u66b4\u9732\u5fc5\u987b\u63a5\u53e3\uff0c\u5185\u90e8\u53ef\u4ee5\u91c7\u7528\u4efb\u610f\u4e00\u81f4\u6027\u534f\u8bae\u5b9e\u73b0\u3002\u8fd9\u6837\u7684\u8bbe\u8ba1\u4f7f\u5f97\u6211\u4eec\u53ef\u4ee5\u5b9e\u73b0\u591a\u79cd\u4e00\u81f4\u6027\u65b9\u6848\uff0c\u4ee5\u6ee1\u8db3\u4e0d\u540c\u7a0b\u5ea6\u7684\u53ef\u7528\u6027\u53ca\u6027\u80fd\u9700\u6c42\u3002\u5f53\u524d\u6211\u4eec\u91c7\u7528Raft\u534f\u8bae\u5b9e\u73b0\u3002  \n\n\n\n\n\n\nLeader\n\nNameserver\u96c6\u7fa4\u4e2d\u7684Leader\u8d1f\u8d23\u63a5\u6536\u548c\u54cd\u5e94Client\u7684\u8bf7\u6c42\uff0c\u5e76\u628a\u6240\u505a\u51fa\u7684\u51b3\u5b9a\u901a\u8fc7Sync\u901a\u77e5\u96c6\u7fa4\u4e2d\u5176\u4ed6Nameserver\u3002Leader\u53ea\u5728\u901a\u77e5\u6210\u529f\u540e\u624d\u4f1a\u5411Client\u8fd4\u56de\u64cd\u4f5c\u6210\u529f\u3002  \n\n\n\n\n\n\n\u4eceNameserver\n\nNameserver\u4e2d\u7684\u4ece\u5b9e\u4f8b\u4e0d\u76f4\u63a5\u4e0eClient\u8fdb\u884c\u4ea4\u4e92\uff0c\u4e5f\u4e0d\u4f1a\u7ed9Chunkserver\u53d1\u51fa\u4efb\u4f55\u6307\u4ee4\u3002\u5b83\u53ea\u5c06\u4eceSync\u6a21\u5757\u63a5\u6536\u5230\u7684\u547d\u4ee4\u843d\u5730\u3002\u4f46\u662f\u4eceNameserver\u548cLeader\u4e00\u6837\uff0c\u4f1a\u63a5\u6536\u5e76\u5904\u7406Chunkserver\u7684\u5fc3\u8df3\u548cReport\u6d88\u606f\uff0c\u7ef4\u62a4\u6587\u4ef6\u5728Chunkserver\u4e0a\u5206\u5e03\u53caChunkserver\u72b6\u6001\u7b49\u4fe1\u606f\u3002\u8fd9\u6837\u505a\u7684\u76ee\u7684\u662f\u4e3a\u4e86\u5728Leader\u6545\u969c\u540e\uff0c\u4efb\u4f55\u4e00\u4e2a\u4eceNameserver\u53ef\u4ee5\u5728\u6700\u77ed\u65f6\u95f4\u5185\u6210\u4e3aLeader\u5e76\u63d0\u4f9b\u670d\u52a1\u3002\u8fd9\u90e8\u5206\u5185\u5b58\u4fe1\u606f\u4e0d\u4e0eLeader\u8fdb\u884c\u4e00\u81f4\u6027\u68c0\u67e5\uff0c\u539f\u56e0\u662f\u8fd9\u90e8\u5206\u4fe1\u606f\u7684\u6765\u6e90\u662fChunkserver\uff0c\u53ea\u6709Chunkserver\u624d\u662f\u771f\u7406\u7684\u552f\u4e00\u638c\u63e1\u8005\uff0c\u4e0eLeader\u7684\u5185\u5b58\u72b6\u6001\u4fdd\u6301\u4e00\u81f4\u5e76\u6ca1\u6709\u610f\u4e49\u3002\n\n\n\n\n\n\n\u4e3b\u8981\u64cd\u4f5c\u6d41\u7a0b\u65b9\u6848\u4e00\n\n\n\n\n\u5199\n\n\u5728BFS\u4e2d\uff0c\u6709\u4e09\u79cd\u64cd\u4f5c\u4f1a\u4ea7\u751f\u5143\u6570\u636e\u5199\u64cd\u4f5c\uff1aCreate\uff0cDelete\u548cRename\u3002\u64cd\u4f5c\u6d41\u7a0b\u5982\u4e0b\u56fe\u6240\u793a\uff0c\n\n\n\n\n\n\nClient\u5411Leader Nameserver\u53d1\u8d77\u8bf7\u6c42\uff0cLeader\u6536\u5230\u8bf7\u6c42\u540e\uff0c\u68c0\u67e5\u64cd\u4f5c\u5408\u6cd5\u6027\u3002\u5982\u679c\u64cd\u4f5c\u662f\u5408\u6cd5\u7684\uff0cLeader\u5c06\u9700\u8981\u843d\u5730\u7684\u6570\u636e\u901a\u8fc7Sync\u6269\u6563\u7ed9\u4eceNameserver\u3002Sync\u6a21\u5757\u8fd4\u56de\u6269\u6563\u6210\u529f\u540e\uff0cLeader\u5411Client\u8fd4\u56de\u64cd\u4f5c\u6210\u529f\u3002\n\n\u68c0\u67e5\u5408\u6cd5\u6027\u53ef\u4ee5\u5e76\u53d1\u6267\u884c\uff0c\u4e32\u884c\u5411Sync\u63d0\u4ea4\u7ed3\u679c\uff0cSync\u6a21\u5757\u4e25\u683c\u6309\u7167\u8fd9\u4e2a\u987a\u5e8f\u6269\u6563\uff0c\u6269\u6563\u6210\u529f\u540eLeader\u624d\u53ef\u4ee5\u5c06\u7ed3\u679c\u5199\u8fdb\u6570\u636e\u5e93\u3002\u4f46\u662f\u8fd9\u6837Leader\u7684\u6027\u80fd\u74f6\u9888\u5c31\u5728\u4e8eSync\u7684\u6269\u6563\uff0c\u5f53Nameserver\u96c6\u7fa4\u8de8\u673a\u623f\u8de8\u5730\u57df\u90e8\u7f72\u65f6\uff0c\u8fd9\u6837\u7684\u5ef6\u65f6\u662f\u4e0d\u80fd\u63a5\u53d7\u7684\u3002\u4e8e\u662f\u6211\u4eec\u5bf9\u8fd9\u91cc\u8fdb\u884c\u4e86\u5982\u4e0b\u56fe\u6240\u793a\u7684\u4f18\u5316\u3002\n\n\n\n\nLeader\u5728\u6536\u5230\u64cd\u4f5c\u540e\u5148\u5bf9\u6570\u636e\u5e93\u6253\u4e00\u4e2a\u5feb\u7167\uff0c\u68c0\u67e5\u5b8c\u5408\u6cd5\u6027\u540e\uff0c\u5728\u63d0\u4ea4\u7ed9Sync\u4e4b\u524d\u5c31\u5c06\u6570\u636e\u5199\u5165\u672c\u5730\u6570\u636e\u5e93\u3002\u4e4b\u540e\u518d\u5c06\u64cd\u4f5c\u63d0\u4ea4\u7ed9Sync\uff0cSync\u8fd4\u56de\u6269\u6563\u6210\u529f\u540e\uff0cLeader\u5c06\u5feb\u7167\u5220\u9664\u5e76\u7ed9\u5411Client\u8fd4\u56de\u6210\u529f\u3002\u5728Sync\u8fd4\u56de\u6210\u529f\u524d\uff0c\u6240\u6709\u7684\u8bfb\u8bf7\u6c42\u90fd\u4f1a\u8bfb\u5feb\u7167\u4e4b\u524d\u7684\u6570\u636e\uff0c\u4e5f\u5c31\u662f\u8bf4Client\u4e0d\u4f1a\u8bfb\u5230\u8fd8\u672a\u6269\u6563\u6210\u529f\u7684\u6570\u636e\u3002  \n\n\n\u6269\u6563\u7684\u5931\u8d25\uff0c\u4f8b\u5982RPC\u8d85\u65f6\u3001\u5199\u5931\u8d25\u7b49\u9700\u8981\u91cd\u8bd5\u5904\u7406\uff0c\u5982\u679c\u8d85\u8fc7\u4e00\u5b9a\u91cd\u8bd5\u6b21\u6570\uff0c\u5219\u5747\u89c6\u4e3aNameserver\u96c6\u7fa4\u4e0d\u53ef\u7528\uff0c\u9700\u4eba\u5de5\u4ecb\u5165\u5904\u7406\u3002\u5404\u4e00\u81f4\u6027\u534f\u8bae\u5bf9\u4e8e\u6269\u6563\u5931\u8d25\u7684\u5b9a\u4e49\u4e0d\u540c\uff0c\u4f8b\u5982Raft\u4e2d\uff0c\u5927\u4e8e\u534a\u6570\u6210\u5458\u6536\u5230\u6d88\u606f\u4fbf\u8ba4\u4e3a\u6269\u6563\u6210\u529f\uff1b\u4e3b\u4ece\u6a21\u5f0f\u4e2d\u4e3b\u6216\u4ece\u4efb\u610f\u4e00\u65b9\u5199\u5931\u8d25\u5747\u8ba4\u4e3a\u662f\u6269\u6563\u5931\u8d25\u3002  \n\n\n\n\n\n\n\u8bfb\n\n\u56e0\u4e3a\u6570\u636e\u6269\u6563\u5b58\u5728\u5ef6\u65f6\uff0c\u53ea\u6709Leader\u638c\u63e1\u6700\u65b0\u7684\u6570\u636e\uff0c\u6240\u4ee5\u53ea\u6709Leader\u53ef\u4ee5\u54cd\u5e94Client\u7684\u8bfb\u8bf7\u6c42\u3002Client\u5411Nameserver\u96c6\u7fa4\u4e2d\u4efb\u4e00\u5b9e\u4f8b\u53d1\u8d77\u8bfb\u8bf7\u6c42\uff0c\u5982\u679c\u6b63\u597d\u662fLeader\u63a5\u6536\u5230\u4e86\u8bf7\u6c42\uff0c\u5219\u76f4\u63a5\u8fd4\u56de\u7ed9Client\u7ed3\u679c\uff1b\u5426\u5219\uff0c\u4eceNameserver\u8fd4\u56de\u8bfb\u5931\u8d25\u5e76\u544a\u77e5\u5f53\u524dLeader\u5730\u5740\uff0cClient\u5411\u65b0Leader\u8bf7\u6c42\u3002  \n\n\n\n\n\n\n\u91cd\u542f\n\n\u56e0\u4e3a\u6211\u4eec\u91c7\u53d6\u4e86\u5148\u5199\u5165\u6570\u636e\u5e93\u540e\u6269\u6563\u7684\u65b9\u5f0f\uff0c\u6240\u4ee5Leader\u5b95\u673a\u91cd\u542f\u540e\uff0c\u6570\u636e\u5e93\u4e2d\u53ef\u80fd\u5b58\u5728\u810f\u6570\u636e\u3002\u6211\u4eec\u4e0d\u8bb0\u5f55Nameserver\u5b95\u673a\u524d\u7684\u8eab\u4efd\uff0c\u5bf9Leader\u548c\u4eceNameserver\u5b95\u673a\u540e\u7684\u91cd\u542f\u505a\u540c\u6837\u7684\u5904\u7406\uff1a\u4eceLeader\u62f7\u8d1d\u6570\u636e\u5e93\u955c\u50cf\uff0c\u7136\u540eredo\u955c\u50cf\u540e\u7684\u64cd\u4f5clog\u3002\n\n\n\n\n\n\n\u4e3b\u8981\u64cd\u4f5c\u6d41\u7a0b\u65b9\u6848\u4e8c\n\n\nClient\u5411Leader Nameserver\u53d1\u8d77\u8bf7\u6c42\uff0cLeader\u6536\u5230\u8bf7\u6c42\u540e\uff0c\u5bf9\u6240\u9700\u64cd\u4f5c\u7684\u8def\u5f84\u52a0\u9501\uff08\u52a0\u9501\u903b\u8f91\u89c1\u53e6\u4e00\u6587\u6863\uff09\uff0c\u68c0\u67e5\u64cd\u4f5c\u5408\u6cd5\u6027\u3002\u5982\u679c\u64cd\u4f5c\u662f\u5408\u6cd5\u7684\uff0cLeader\u5c06\u9700\u8981\u843d\u5730\u7684\u6570\u636e\u901a\u8fc7Sync\u6269\u6563\u7ed9\u4eceNameserver\u3002Sync\u6a21\u5757\u8fd4\u56de\u6269\u6563\u6210\u529f\u540e\uff0cLeader\u5411Client\u8fd4\u56de\u64cd\u4f5c\u6210\u529f\u3002Follower\u6536\u5230\u63d0\u4ea4\u64cd\u4f5c\u7684\u6307\u4ee4\u540e\uff0c\u65e0\u9700\u68c0\u67e5\u64cd\u4f5c\u5408\u6cd5\u6027\uff0c\u76f4\u63a5\u6839\u636e\u6307\u4ee4\u6267\u884c\u64cd\u4f5c\u66f4\u6539\u72b6\u6001\u673a\u548c\u5185\u5b58\u7ed3\u6784\u3002\n\n\n\u5bf9\u4e8e\u67d0\u4e00\u64cd\u4f5c\uff0c\u5177\u4f53\u6d41\u7a0b\u5982\u4e0b\uff1a\n\n\n\n\n\n\nLeader       \u6536\u5230\u8bf7\u6c42\uff0c\u68c0\u67e5\u8bf7\u6c42\u5408\u6cd5\u6027\n\n\n\n\n\n\nLeader       \u5c06\u64cd\u4f5c\u6307\u4ee4\u5e8f\u5217\u5316\u5e76\u4ea4\u7531Sync\u540c\u6b65\n\n\n\n\n\n\nFollower     \u6536\u5230\u6307\u4ee4\u540e\u6301\u4e45\u5316\u6307\u4ee4\n\n\n\n\n\n\nBoth         \u786e\u5b9a\u64cd\u4f5c\u540c\u6b65\u6210\u529f\u540e\u5c06\u64cd\u4f5c\u5e94\u7528\u5230\u72b6\u6001\u673a\uff0c\u5e76\u66f4\u6539\u5185\u5b58\u72b6\u6001\n\n\n\n\n\n\n\u65b9\u6848\u4e00\u4e3a\u540c\u6b65\u7ed3\u679c\uff0c\u65b9\u6848\u4e8c\u4e3a\u540c\u6b65\u64cd\u4f5c\u3002\u540c\u6b65\u7ed3\u679c\u7684\u95ee\u9898\u5728\u4e8e\u5f53\u64cd\u4f5c\u7684\u7ed3\u679c\u5f88\u5927\uff08\u4f8b\u5982\uff0c\nrmr /\n\uff09\uff0c\u53ef\u80fd\u8d85\u51fa\u5185\u5b58\u5927\u5c0f\u8303\u56f4\uff0c\u4ece\u800c\u5f88\u96be\u4fdd\u8bc1\u64cd\u4f5c\u539f\u5b50\u6027\u3002\u540c\u6b65\u64cd\u4f5c\u57fa\u4e8e\u4e00\u4e2a\u5047\u8bbe\uff1aLeader\u548cFollowers\u5c06\u540c\u4e00\u4e2a\u6307\u4ee4\u5e94\u7528\u5230\u72b6\u6001\u673a\u53ca\u66f4\u6539\u5185\u5b58\u72b6\u6001\u6240\u4ea7\u751f\u7684\u7ed3\u679c\u4e25\u683c\u4e00\u81f4\u3002\n\n\n\u4e00\u671f\u9ad8\u53ef\u9760\u65b9\u6848 - \u4e3b\u4ece\u6a21\u5f0f\n\n\nNameserver\u7684HA\u65b9\u6848\u6570\u636e\u6d41\u5982\u4e0a\u63cf\u8ff0\uff0c\u5176\u4e2dSync\u6a21\u5757\u662f\u4fdd\u8bc1\u6570\u636e\u53ef\u9760\u548c\u9ad8\u53ef\u7528\u7684\u6838\u5fc3\u3002\u6211\u4eec\u628a\u8fd9\u4e2a\u6a21\u5757\u8bbe\u8ba1\u6210\u53ef\u63d2\u62d4\u7684\u63d2\u4ef6\u6a21\u5f0f\uff0c\u53ef\u4ee5\u9009\u7528\u4efb\u610f\u4e00\u79cd\u4e00\u81f4\u6027\u534f\u8bae\u5b9e\u73b0\u4ee5\u6ee1\u8db3\u4e0d\u540c\u53ef\u9760\u3001\u53ef\u7528\u548c\u6027\u80fd\u8981\u6c42\u3002\u4e00\u671f\u65b9\u6848\u662f\u5b9e\u73b0\u4e00\u4e2a\u4e3b\u4ece\u6a21\u5f0f\u7684Nameserver\uff0c\u9996\u5148\u4fdd\u8bc1\u6570\u636e\u7684\u53ef\u9760\u6027\uff0c\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u63d0\u9ad8\u53ef\u7528\u6027\u3002  \n\n\n\n\n\n\n\u5199\n\n\u5199\u6d41\u7a0b\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u548c\u4e0a\u9762\u63cf\u8ff0\u7684\u4e00\u81f4\u3002\u4e3b\u4ece\u6a21\u5f0f\u7684Sync\u5b9e\u73b0\u4e3a\u7b80\u5355\u7684RPC\u8c03\u7528\uff0c\u5373\u4e3bNameserver\u5c06\u9700\u8981\u6269\u6563\u7684\u64cd\u4f5c\u901a\u8fc7RPC\u53d1\u9001\u7ed9\u4eceNameserver\uff1b\u4eceNameserver\u6536\u5230RPC\u540e\u4e0d\u505a\u4efb\u4f55\u5408\u6cd5\u6027\u68c0\u67e5\uff0c\u76f4\u63a5\u66f4\u65b0\u5185\u5b58\u72b6\u6001\u53ca\u672c\u5730\u6301\u4e45\u5316Namespace\uff08leveldb\uff09\uff1b\u64cd\u4f5c\u6210\u529f\u540e\u8c03\u7528RPC\u56de\u8c03\u901a\u77e5\u4e3bNameserver\uff1b\u4e3bNameserver\u6536\u5230\u6210\u529f\u7684\u56de\u8c03\u540e\u5411\u7528\u6237\u8fd4\u56de\u64cd\u4f5c\u6210\u529f\u3002\n\n\n\n\n\n\n\n\n\u8bfb\n\n\u8bfb\u6d41\u7a0b\u548c\u4e0a\u9762\u63cf\u8ff0\u7684\u4e00\u81f4\u3002\n\n\n\n\n\n\n\u4e3b\u4ece\n\n\u8fd9\u4e2a\u65b9\u6848\u4e2d\uff0c\u4e3b\u4ece\u4efb\u4f55\u4e00\u53f0\u673a\u5668\u5b95\u673a\u7684\u60c5\u51b5\u4e0b\uff0c\u5bf9Nameserver\u7684\u5199\u64cd\u4f5c\u90fd\u4f1a\u5931\u8d25\uff0c\u8fd9\u65f6\u9700\u8981\u4eba\u5de5\u4ecb\u5165\u5904\u7406\u3002\u6ca1\u6709\u52a0\u5165\u68c0\u6d4b\u5b95\u673a\u5e76\u81ea\u52a8\u5207\u6362\u4e3b\u4ece\u7684\u903b\u8f91\uff0c\u539f\u56e0\u662f\u5728\u6ca1\u6709\u4e00\u81f4\u6027\u9009\u4e3b\u534f\u8bae\u7684\u60c5\u51b5\u4e0b\uff0c\u51e0\u4e4e\u5f88\u96be\u4fdd\u8bc1\u4e3b\u4ece\u63a2\u6d3b\u7b56\u7565\u7684\u6b63\u786e\u6027\uff0c\u5f88\u5bb9\u6613\u51fa\u73b0\u65e0\u4e3b\u6216\u8005\u53cc\u4e3b\u7684\u60c5\u51b5\u3002\u8fd9\u79cd\u8bbe\u8ba1\u4fdd\u8bc1\u4e86\u6570\u636e\u7684\u53ef\u9760\u6027\uff0c\u4f46\u662f\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u727a\u7272\u4e86\u53ef\u7528\u6027\u3002\u4e3a\u4e86\u51cf\u5c0f\u4e0d\u53ef\u7528\u65f6\u95f4\uff0c\u6211\u4eec\u52a0\u5165\u4e86\u4e00\u79cd\u5355\u5199\u6a21\u5f0f\uff0c\u5373\u5bf9Nameserver\u7684\u5199\u64cd\u4f5c\u53ea\u9700\u5728\u4e3bNameserver\u4e0a\u66f4\u65b0\u6210\u529f\u3002\u5f53\u5904\u7406\u5b8c\u5b95\u673a\uff0c\u96c6\u7fa4\u6062\u590d\u4e3b\u4ece\u90fd\u6b63\u5e38\u8fd0\u884c\u7684\u60c5\u51b5\u4e0b\u540e\uff0c\u9700\u5207\u6362\u56de\u53cc\u5199\u6a21\u5f0f\uff0c\u4ee5\u4fdd\u8bc1\u6570\u636e\u53ef\u9760\u6027\u3002\u4e3b\u4ece\u5207\u6362\u64cd\u4f5c\u6d41\u7a0b\u5982\u4e0b\uff1a", 
            "title": "HA\u8bbe\u8ba1"
        }, 
        {
            "location": "/cn/bfs_HA/#bfs-master", 
            "text": "", 
            "title": "BFS Master \u9ad8\u53ef\u7528\u8bbe\u8ba1\u65b9\u6848"
        }, 
        {
            "location": "/cn/bfs_HA/#_1", 
            "text": "\u5728BFS\u4e2d\uff0cnameserver\u8d1f\u8d23\u7ba1\u7406\u6587\u4ef6\u5143\u4fe1\u606f\u4ee5\u53ca\u6240\u6709chunkserver\u7684\u72b6\u6001\u4fe1\u606f\uff0c\u662f\u6574\u4e2a\u7cfb\u7edf\u4e2d\u552f\u4e00\u62e5\u6709\u5168\u5c40\u4fe1\u606f\u7684\u6a21\u5757\uff0c\u540c\u65f6\u4e5f\u6210\u4e3a\u4e86\u7cfb\u7edf\u7684\u5355\u70b9\u3002nameserver\u7684\u4e0d\u53ef\u7528\u4f1a\u76f4\u63a5\u5bfc\u81f4\u6587\u4ef6\u7cfb\u7edf\u7684\u762b\u75ea\uff0c\u4e8e\u662f\u63d0\u9ad8nameserver\u7684\u53ef\u7528\u6027\u81f3\u5173\u91cd\u8981\u3002", 
            "title": "\u80cc\u666f"
        }, 
        {
            "location": "/cn/bfs_HA/#_2", 
            "text": "\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u6211\u4eec\u5c06nameserver\u6269\u5c55\u4e3a\u96c6\u7fa4\uff0cClient\u53ea\u4e0e\u96c6\u7fa4Leader\u8fdb\u884c\u4ea4\u4e92\u3002\u6bcf\u4e00\u4e2anameserver\u4e2d\u6709\u4e00\u4e2a\u540c\u6b65\u6a21\u5757\uff08Sync\uff09\uff0c\u8d1f\u8d23\u96c6\u7fa4\u95f4\u7684\u72b6\u6001\u540c\u6b65\uff0c\u4fdd\u8bc1\u5143\u6570\u636e\u7684\u4e00\u81f4\u6027\u3002     Sync\u6a21\u5757 \nSync\u6a21\u5757\u4e3b\u8981\u6709\u4e24\u4e2a\u529f\u80fd\uff0c\u9009\u4e3b\u548c\u65e5\u5fd7\u540c\u6b65\u3002\u9009\u4e3b\u64cd\u4f5c\u5c31\u662f\u5728nameserver\u4e2d\u786e\u5b9a\u552f\u4e00\u4e00\u4e2aLeader\uff0c\u5e76\u4e14\u5728Leader\u5f02\u5e38\u540e\u8fc5\u901f\u9009\u51fa\u65b0\u4efbLeader\u3002\u65e5\u5fd7\u540c\u6b65\u64cd\u4f5c\u5b9e\u9645\u4e0a\u5c31\u662f\u540c\u6b65Nameserver\u4e2d\u6240\u6709\u9700\u8981\u843d\u5730\u7684\u6570\u636e\u5199\u64cd\u4f5c\u3002Sync\u6a21\u5757\u8bbe\u8ba1\u4e3a\u4e0eNameserver\u677e\u8026\u5408\uff0c\u4ec5\u66b4\u9732\u5fc5\u987b\u63a5\u53e3\uff0c\u5185\u90e8\u53ef\u4ee5\u91c7\u7528\u4efb\u610f\u4e00\u81f4\u6027\u534f\u8bae\u5b9e\u73b0\u3002\u8fd9\u6837\u7684\u8bbe\u8ba1\u4f7f\u5f97\u6211\u4eec\u53ef\u4ee5\u5b9e\u73b0\u591a\u79cd\u4e00\u81f4\u6027\u65b9\u6848\uff0c\u4ee5\u6ee1\u8db3\u4e0d\u540c\u7a0b\u5ea6\u7684\u53ef\u7528\u6027\u53ca\u6027\u80fd\u9700\u6c42\u3002\u5f53\u524d\u6211\u4eec\u91c7\u7528Raft\u534f\u8bae\u5b9e\u73b0\u3002      Leader \nNameserver\u96c6\u7fa4\u4e2d\u7684Leader\u8d1f\u8d23\u63a5\u6536\u548c\u54cd\u5e94Client\u7684\u8bf7\u6c42\uff0c\u5e76\u628a\u6240\u505a\u51fa\u7684\u51b3\u5b9a\u901a\u8fc7Sync\u901a\u77e5\u96c6\u7fa4\u4e2d\u5176\u4ed6Nameserver\u3002Leader\u53ea\u5728\u901a\u77e5\u6210\u529f\u540e\u624d\u4f1a\u5411Client\u8fd4\u56de\u64cd\u4f5c\u6210\u529f\u3002      \u4eceNameserver \nNameserver\u4e2d\u7684\u4ece\u5b9e\u4f8b\u4e0d\u76f4\u63a5\u4e0eClient\u8fdb\u884c\u4ea4\u4e92\uff0c\u4e5f\u4e0d\u4f1a\u7ed9Chunkserver\u53d1\u51fa\u4efb\u4f55\u6307\u4ee4\u3002\u5b83\u53ea\u5c06\u4eceSync\u6a21\u5757\u63a5\u6536\u5230\u7684\u547d\u4ee4\u843d\u5730\u3002\u4f46\u662f\u4eceNameserver\u548cLeader\u4e00\u6837\uff0c\u4f1a\u63a5\u6536\u5e76\u5904\u7406Chunkserver\u7684\u5fc3\u8df3\u548cReport\u6d88\u606f\uff0c\u7ef4\u62a4\u6587\u4ef6\u5728Chunkserver\u4e0a\u5206\u5e03\u53caChunkserver\u72b6\u6001\u7b49\u4fe1\u606f\u3002\u8fd9\u6837\u505a\u7684\u76ee\u7684\u662f\u4e3a\u4e86\u5728Leader\u6545\u969c\u540e\uff0c\u4efb\u4f55\u4e00\u4e2a\u4eceNameserver\u53ef\u4ee5\u5728\u6700\u77ed\u65f6\u95f4\u5185\u6210\u4e3aLeader\u5e76\u63d0\u4f9b\u670d\u52a1\u3002\u8fd9\u90e8\u5206\u5185\u5b58\u4fe1\u606f\u4e0d\u4e0eLeader\u8fdb\u884c\u4e00\u81f4\u6027\u68c0\u67e5\uff0c\u539f\u56e0\u662f\u8fd9\u90e8\u5206\u4fe1\u606f\u7684\u6765\u6e90\u662fChunkserver\uff0c\u53ea\u6709Chunkserver\u624d\u662f\u771f\u7406\u7684\u552f\u4e00\u638c\u63e1\u8005\uff0c\u4e0eLeader\u7684\u5185\u5b58\u72b6\u6001\u4fdd\u6301\u4e00\u81f4\u5e76\u6ca1\u6709\u610f\u4e49\u3002", 
            "title": "\u6574\u4f53\u8bbe\u8ba1"
        }, 
        {
            "location": "/cn/bfs_HA/#_3", 
            "text": "\u5199 \n\u5728BFS\u4e2d\uff0c\u6709\u4e09\u79cd\u64cd\u4f5c\u4f1a\u4ea7\u751f\u5143\u6570\u636e\u5199\u64cd\u4f5c\uff1aCreate\uff0cDelete\u548cRename\u3002\u64cd\u4f5c\u6d41\u7a0b\u5982\u4e0b\u56fe\u6240\u793a\uff0c    Client\u5411Leader Nameserver\u53d1\u8d77\u8bf7\u6c42\uff0cLeader\u6536\u5230\u8bf7\u6c42\u540e\uff0c\u68c0\u67e5\u64cd\u4f5c\u5408\u6cd5\u6027\u3002\u5982\u679c\u64cd\u4f5c\u662f\u5408\u6cd5\u7684\uff0cLeader\u5c06\u9700\u8981\u843d\u5730\u7684\u6570\u636e\u901a\u8fc7Sync\u6269\u6563\u7ed9\u4eceNameserver\u3002Sync\u6a21\u5757\u8fd4\u56de\u6269\u6563\u6210\u529f\u540e\uff0cLeader\u5411Client\u8fd4\u56de\u64cd\u4f5c\u6210\u529f\u3002 \n\u68c0\u67e5\u5408\u6cd5\u6027\u53ef\u4ee5\u5e76\u53d1\u6267\u884c\uff0c\u4e32\u884c\u5411Sync\u63d0\u4ea4\u7ed3\u679c\uff0cSync\u6a21\u5757\u4e25\u683c\u6309\u7167\u8fd9\u4e2a\u987a\u5e8f\u6269\u6563\uff0c\u6269\u6563\u6210\u529f\u540eLeader\u624d\u53ef\u4ee5\u5c06\u7ed3\u679c\u5199\u8fdb\u6570\u636e\u5e93\u3002\u4f46\u662f\u8fd9\u6837Leader\u7684\u6027\u80fd\u74f6\u9888\u5c31\u5728\u4e8eSync\u7684\u6269\u6563\uff0c\u5f53Nameserver\u96c6\u7fa4\u8de8\u673a\u623f\u8de8\u5730\u57df\u90e8\u7f72\u65f6\uff0c\u8fd9\u6837\u7684\u5ef6\u65f6\u662f\u4e0d\u80fd\u63a5\u53d7\u7684\u3002\u4e8e\u662f\u6211\u4eec\u5bf9\u8fd9\u91cc\u8fdb\u884c\u4e86\u5982\u4e0b\u56fe\u6240\u793a\u7684\u4f18\u5316\u3002   Leader\u5728\u6536\u5230\u64cd\u4f5c\u540e\u5148\u5bf9\u6570\u636e\u5e93\u6253\u4e00\u4e2a\u5feb\u7167\uff0c\u68c0\u67e5\u5b8c\u5408\u6cd5\u6027\u540e\uff0c\u5728\u63d0\u4ea4\u7ed9Sync\u4e4b\u524d\u5c31\u5c06\u6570\u636e\u5199\u5165\u672c\u5730\u6570\u636e\u5e93\u3002\u4e4b\u540e\u518d\u5c06\u64cd\u4f5c\u63d0\u4ea4\u7ed9Sync\uff0cSync\u8fd4\u56de\u6269\u6563\u6210\u529f\u540e\uff0cLeader\u5c06\u5feb\u7167\u5220\u9664\u5e76\u7ed9\u5411Client\u8fd4\u56de\u6210\u529f\u3002\u5728Sync\u8fd4\u56de\u6210\u529f\u524d\uff0c\u6240\u6709\u7684\u8bfb\u8bf7\u6c42\u90fd\u4f1a\u8bfb\u5feb\u7167\u4e4b\u524d\u7684\u6570\u636e\uff0c\u4e5f\u5c31\u662f\u8bf4Client\u4e0d\u4f1a\u8bfb\u5230\u8fd8\u672a\u6269\u6563\u6210\u529f\u7684\u6570\u636e\u3002    \u6269\u6563\u7684\u5931\u8d25\uff0c\u4f8b\u5982RPC\u8d85\u65f6\u3001\u5199\u5931\u8d25\u7b49\u9700\u8981\u91cd\u8bd5\u5904\u7406\uff0c\u5982\u679c\u8d85\u8fc7\u4e00\u5b9a\u91cd\u8bd5\u6b21\u6570\uff0c\u5219\u5747\u89c6\u4e3aNameserver\u96c6\u7fa4\u4e0d\u53ef\u7528\uff0c\u9700\u4eba\u5de5\u4ecb\u5165\u5904\u7406\u3002\u5404\u4e00\u81f4\u6027\u534f\u8bae\u5bf9\u4e8e\u6269\u6563\u5931\u8d25\u7684\u5b9a\u4e49\u4e0d\u540c\uff0c\u4f8b\u5982Raft\u4e2d\uff0c\u5927\u4e8e\u534a\u6570\u6210\u5458\u6536\u5230\u6d88\u606f\u4fbf\u8ba4\u4e3a\u6269\u6563\u6210\u529f\uff1b\u4e3b\u4ece\u6a21\u5f0f\u4e2d\u4e3b\u6216\u4ece\u4efb\u610f\u4e00\u65b9\u5199\u5931\u8d25\u5747\u8ba4\u4e3a\u662f\u6269\u6563\u5931\u8d25\u3002      \u8bfb \n\u56e0\u4e3a\u6570\u636e\u6269\u6563\u5b58\u5728\u5ef6\u65f6\uff0c\u53ea\u6709Leader\u638c\u63e1\u6700\u65b0\u7684\u6570\u636e\uff0c\u6240\u4ee5\u53ea\u6709Leader\u53ef\u4ee5\u54cd\u5e94Client\u7684\u8bfb\u8bf7\u6c42\u3002Client\u5411Nameserver\u96c6\u7fa4\u4e2d\u4efb\u4e00\u5b9e\u4f8b\u53d1\u8d77\u8bfb\u8bf7\u6c42\uff0c\u5982\u679c\u6b63\u597d\u662fLeader\u63a5\u6536\u5230\u4e86\u8bf7\u6c42\uff0c\u5219\u76f4\u63a5\u8fd4\u56de\u7ed9Client\u7ed3\u679c\uff1b\u5426\u5219\uff0c\u4eceNameserver\u8fd4\u56de\u8bfb\u5931\u8d25\u5e76\u544a\u77e5\u5f53\u524dLeader\u5730\u5740\uff0cClient\u5411\u65b0Leader\u8bf7\u6c42\u3002      \u91cd\u542f \n\u56e0\u4e3a\u6211\u4eec\u91c7\u53d6\u4e86\u5148\u5199\u5165\u6570\u636e\u5e93\u540e\u6269\u6563\u7684\u65b9\u5f0f\uff0c\u6240\u4ee5Leader\u5b95\u673a\u91cd\u542f\u540e\uff0c\u6570\u636e\u5e93\u4e2d\u53ef\u80fd\u5b58\u5728\u810f\u6570\u636e\u3002\u6211\u4eec\u4e0d\u8bb0\u5f55Nameserver\u5b95\u673a\u524d\u7684\u8eab\u4efd\uff0c\u5bf9Leader\u548c\u4eceNameserver\u5b95\u673a\u540e\u7684\u91cd\u542f\u505a\u540c\u6837\u7684\u5904\u7406\uff1a\u4eceLeader\u62f7\u8d1d\u6570\u636e\u5e93\u955c\u50cf\uff0c\u7136\u540eredo\u955c\u50cf\u540e\u7684\u64cd\u4f5clog\u3002", 
            "title": "\u4e3b\u8981\u64cd\u4f5c\u6d41\u7a0b\u65b9\u6848\u4e00"
        }, 
        {
            "location": "/cn/bfs_HA/#_4", 
            "text": "Client\u5411Leader Nameserver\u53d1\u8d77\u8bf7\u6c42\uff0cLeader\u6536\u5230\u8bf7\u6c42\u540e\uff0c\u5bf9\u6240\u9700\u64cd\u4f5c\u7684\u8def\u5f84\u52a0\u9501\uff08\u52a0\u9501\u903b\u8f91\u89c1\u53e6\u4e00\u6587\u6863\uff09\uff0c\u68c0\u67e5\u64cd\u4f5c\u5408\u6cd5\u6027\u3002\u5982\u679c\u64cd\u4f5c\u662f\u5408\u6cd5\u7684\uff0cLeader\u5c06\u9700\u8981\u843d\u5730\u7684\u6570\u636e\u901a\u8fc7Sync\u6269\u6563\u7ed9\u4eceNameserver\u3002Sync\u6a21\u5757\u8fd4\u56de\u6269\u6563\u6210\u529f\u540e\uff0cLeader\u5411Client\u8fd4\u56de\u64cd\u4f5c\u6210\u529f\u3002Follower\u6536\u5230\u63d0\u4ea4\u64cd\u4f5c\u7684\u6307\u4ee4\u540e\uff0c\u65e0\u9700\u68c0\u67e5\u64cd\u4f5c\u5408\u6cd5\u6027\uff0c\u76f4\u63a5\u6839\u636e\u6307\u4ee4\u6267\u884c\u64cd\u4f5c\u66f4\u6539\u72b6\u6001\u673a\u548c\u5185\u5b58\u7ed3\u6784\u3002  \u5bf9\u4e8e\u67d0\u4e00\u64cd\u4f5c\uff0c\u5177\u4f53\u6d41\u7a0b\u5982\u4e0b\uff1a    Leader       \u6536\u5230\u8bf7\u6c42\uff0c\u68c0\u67e5\u8bf7\u6c42\u5408\u6cd5\u6027    Leader       \u5c06\u64cd\u4f5c\u6307\u4ee4\u5e8f\u5217\u5316\u5e76\u4ea4\u7531Sync\u540c\u6b65    Follower     \u6536\u5230\u6307\u4ee4\u540e\u6301\u4e45\u5316\u6307\u4ee4    Both         \u786e\u5b9a\u64cd\u4f5c\u540c\u6b65\u6210\u529f\u540e\u5c06\u64cd\u4f5c\u5e94\u7528\u5230\u72b6\u6001\u673a\uff0c\u5e76\u66f4\u6539\u5185\u5b58\u72b6\u6001    \u65b9\u6848\u4e00\u4e3a\u540c\u6b65\u7ed3\u679c\uff0c\u65b9\u6848\u4e8c\u4e3a\u540c\u6b65\u64cd\u4f5c\u3002\u540c\u6b65\u7ed3\u679c\u7684\u95ee\u9898\u5728\u4e8e\u5f53\u64cd\u4f5c\u7684\u7ed3\u679c\u5f88\u5927\uff08\u4f8b\u5982\uff0c rmr / \uff09\uff0c\u53ef\u80fd\u8d85\u51fa\u5185\u5b58\u5927\u5c0f\u8303\u56f4\uff0c\u4ece\u800c\u5f88\u96be\u4fdd\u8bc1\u64cd\u4f5c\u539f\u5b50\u6027\u3002\u540c\u6b65\u64cd\u4f5c\u57fa\u4e8e\u4e00\u4e2a\u5047\u8bbe\uff1aLeader\u548cFollowers\u5c06\u540c\u4e00\u4e2a\u6307\u4ee4\u5e94\u7528\u5230\u72b6\u6001\u673a\u53ca\u66f4\u6539\u5185\u5b58\u72b6\u6001\u6240\u4ea7\u751f\u7684\u7ed3\u679c\u4e25\u683c\u4e00\u81f4\u3002", 
            "title": "\u4e3b\u8981\u64cd\u4f5c\u6d41\u7a0b\u65b9\u6848\u4e8c"
        }, 
        {
            "location": "/cn/bfs_HA/#-", 
            "text": "Nameserver\u7684HA\u65b9\u6848\u6570\u636e\u6d41\u5982\u4e0a\u63cf\u8ff0\uff0c\u5176\u4e2dSync\u6a21\u5757\u662f\u4fdd\u8bc1\u6570\u636e\u53ef\u9760\u548c\u9ad8\u53ef\u7528\u7684\u6838\u5fc3\u3002\u6211\u4eec\u628a\u8fd9\u4e2a\u6a21\u5757\u8bbe\u8ba1\u6210\u53ef\u63d2\u62d4\u7684\u63d2\u4ef6\u6a21\u5f0f\uff0c\u53ef\u4ee5\u9009\u7528\u4efb\u610f\u4e00\u79cd\u4e00\u81f4\u6027\u534f\u8bae\u5b9e\u73b0\u4ee5\u6ee1\u8db3\u4e0d\u540c\u53ef\u9760\u3001\u53ef\u7528\u548c\u6027\u80fd\u8981\u6c42\u3002\u4e00\u671f\u65b9\u6848\u662f\u5b9e\u73b0\u4e00\u4e2a\u4e3b\u4ece\u6a21\u5f0f\u7684Nameserver\uff0c\u9996\u5148\u4fdd\u8bc1\u6570\u636e\u7684\u53ef\u9760\u6027\uff0c\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u63d0\u9ad8\u53ef\u7528\u6027\u3002      \u5199 \n\u5199\u6d41\u7a0b\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u548c\u4e0a\u9762\u63cf\u8ff0\u7684\u4e00\u81f4\u3002\u4e3b\u4ece\u6a21\u5f0f\u7684Sync\u5b9e\u73b0\u4e3a\u7b80\u5355\u7684RPC\u8c03\u7528\uff0c\u5373\u4e3bNameserver\u5c06\u9700\u8981\u6269\u6563\u7684\u64cd\u4f5c\u901a\u8fc7RPC\u53d1\u9001\u7ed9\u4eceNameserver\uff1b\u4eceNameserver\u6536\u5230RPC\u540e\u4e0d\u505a\u4efb\u4f55\u5408\u6cd5\u6027\u68c0\u67e5\uff0c\u76f4\u63a5\u66f4\u65b0\u5185\u5b58\u72b6\u6001\u53ca\u672c\u5730\u6301\u4e45\u5316Namespace\uff08leveldb\uff09\uff1b\u64cd\u4f5c\u6210\u529f\u540e\u8c03\u7528RPC\u56de\u8c03\u901a\u77e5\u4e3bNameserver\uff1b\u4e3bNameserver\u6536\u5230\u6210\u529f\u7684\u56de\u8c03\u540e\u5411\u7528\u6237\u8fd4\u56de\u64cd\u4f5c\u6210\u529f\u3002     \u8bfb \n\u8bfb\u6d41\u7a0b\u548c\u4e0a\u9762\u63cf\u8ff0\u7684\u4e00\u81f4\u3002    \u4e3b\u4ece \n\u8fd9\u4e2a\u65b9\u6848\u4e2d\uff0c\u4e3b\u4ece\u4efb\u4f55\u4e00\u53f0\u673a\u5668\u5b95\u673a\u7684\u60c5\u51b5\u4e0b\uff0c\u5bf9Nameserver\u7684\u5199\u64cd\u4f5c\u90fd\u4f1a\u5931\u8d25\uff0c\u8fd9\u65f6\u9700\u8981\u4eba\u5de5\u4ecb\u5165\u5904\u7406\u3002\u6ca1\u6709\u52a0\u5165\u68c0\u6d4b\u5b95\u673a\u5e76\u81ea\u52a8\u5207\u6362\u4e3b\u4ece\u7684\u903b\u8f91\uff0c\u539f\u56e0\u662f\u5728\u6ca1\u6709\u4e00\u81f4\u6027\u9009\u4e3b\u534f\u8bae\u7684\u60c5\u51b5\u4e0b\uff0c\u51e0\u4e4e\u5f88\u96be\u4fdd\u8bc1\u4e3b\u4ece\u63a2\u6d3b\u7b56\u7565\u7684\u6b63\u786e\u6027\uff0c\u5f88\u5bb9\u6613\u51fa\u73b0\u65e0\u4e3b\u6216\u8005\u53cc\u4e3b\u7684\u60c5\u51b5\u3002\u8fd9\u79cd\u8bbe\u8ba1\u4fdd\u8bc1\u4e86\u6570\u636e\u7684\u53ef\u9760\u6027\uff0c\u4f46\u662f\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u727a\u7272\u4e86\u53ef\u7528\u6027\u3002\u4e3a\u4e86\u51cf\u5c0f\u4e0d\u53ef\u7528\u65f6\u95f4\uff0c\u6211\u4eec\u52a0\u5165\u4e86\u4e00\u79cd\u5355\u5199\u6a21\u5f0f\uff0c\u5373\u5bf9Nameserver\u7684\u5199\u64cd\u4f5c\u53ea\u9700\u5728\u4e3bNameserver\u4e0a\u66f4\u65b0\u6210\u529f\u3002\u5f53\u5904\u7406\u5b8c\u5b95\u673a\uff0c\u96c6\u7fa4\u6062\u590d\u4e3b\u4ece\u90fd\u6b63\u5e38\u8fd0\u884c\u7684\u60c5\u51b5\u4e0b\u540e\uff0c\u9700\u5207\u6362\u56de\u53cc\u5199\u6a21\u5f0f\uff0c\u4ee5\u4fdd\u8bc1\u6570\u636e\u53ef\u9760\u6027\u3002\u4e3b\u4ece\u5207\u6362\u64cd\u4f5c\u6d41\u7a0b\u5982\u4e0b\uff1a", 
            "title": "\u4e00\u671f\u9ad8\u53ef\u9760\u65b9\u6848 - \u4e3b\u4ece\u6a21\u5f0f"
        }, 
        {
            "location": "/cn/bfs_mount/", 
            "text": "bfs_mount\u7684\u5b9e\u73b0\n\n\n\u6587\u4ef6\u968f\u673a\u5199\n\n\n\u56e0\u4e3aBFS\u5f53\u524d\u4e0d\u652f\u6301\u968f\u673a\u5199\u548c\u5bf9\u5df2\u7ecf\u5b58\u5728\u7684\u6587\u4ef6\u8fdb\u884c\u5199\u6253\u5f00(Open for write), \u6240\u4ee5\u5728bfs_mount\u4e2d\u8fdb\u884c\u4e86\u6a21\u62df\u5b9e\u73b0, \u5c06\u5199\u64cd\u4f5c\u5206\u4e3a\u4e86\u4e09\u79cd\u6a21\u5f0f:\n\n\n\n\n\u521b\u5efa\u65b0\u6587\u4ef6, \u5e76\u987a\u5e8f\u5199\n\n\n\n\n\u5b9e\u73b0: \u76f4\u63a5\u8c03\u7528bfs\u7684sdk::Write.\n\n\n\n\n\u521b\u5efa\u65b0\u6587\u4ef6,\u5728\u5199\u7684\u8fc7\u7a0b\u4e2d\u6709\u5411\u540e(offset\n\u6587\u4ef6\u5927\u5c0f)\u7684seek\u64cd\u4f5c.\n\n\n\n\n\u5b9e\u73b0: \u5c06\u8df3\u8fc7\u7684\u533a\u95f4\u5168\u90e8\u586b0, \u8c03\u7528bfs\u7684sdk::Write.\n\n\n\n\n\u521b\u5efa\u65b0\u7684\u6587\u4ef6,\u5728\u5199\u7684\u8fc7\u7a0b\u4e2d\u6709\u5411\u524d\u7684seek, \u6216\u8005\u5199\u6253\u5f00\u4e00\u4e2a\u65e7\u7684\u6587\u4ef6.\n\n\n\n\n\u5b9e\u73b0: \u5c06\u6574\u4e2a\u6587\u4ef6\u8bfb\u5165\u5185\u5b58buffer\u4e2d\u8fdb\u884c\u8bfb\u5199, \u5728\u8c03\u7528sync\u7684\u65f6\u5019, \u5c06\u65e7\u6587\u4ef6\u5220\u9664, \u5e76\u5c06\u5185\u5b58buffer\u5199\u5165\u540c\u540d\u65b0\u6587\u4ef6. \u7136\u540e\u5220\u9664\u5185\u5b58buffer, \u8df3\u8f6c\u56de\u6a21\u5f0f1.", 
            "title": "Mount\u8bbe\u8ba1"
        }, 
        {
            "location": "/cn/bfs_mount/#bfs_mount", 
            "text": "", 
            "title": "bfs_mount\u7684\u5b9e\u73b0"
        }, 
        {
            "location": "/cn/bfs_mount/#_1", 
            "text": "\u56e0\u4e3aBFS\u5f53\u524d\u4e0d\u652f\u6301\u968f\u673a\u5199\u548c\u5bf9\u5df2\u7ecf\u5b58\u5728\u7684\u6587\u4ef6\u8fdb\u884c\u5199\u6253\u5f00(Open for write), \u6240\u4ee5\u5728bfs_mount\u4e2d\u8fdb\u884c\u4e86\u6a21\u62df\u5b9e\u73b0, \u5c06\u5199\u64cd\u4f5c\u5206\u4e3a\u4e86\u4e09\u79cd\u6a21\u5f0f:   \u521b\u5efa\u65b0\u6587\u4ef6, \u5e76\u987a\u5e8f\u5199   \u5b9e\u73b0: \u76f4\u63a5\u8c03\u7528bfs\u7684sdk::Write.   \u521b\u5efa\u65b0\u6587\u4ef6,\u5728\u5199\u7684\u8fc7\u7a0b\u4e2d\u6709\u5411\u540e(offset \u6587\u4ef6\u5927\u5c0f)\u7684seek\u64cd\u4f5c.   \u5b9e\u73b0: \u5c06\u8df3\u8fc7\u7684\u533a\u95f4\u5168\u90e8\u586b0, \u8c03\u7528bfs\u7684sdk::Write.   \u521b\u5efa\u65b0\u7684\u6587\u4ef6,\u5728\u5199\u7684\u8fc7\u7a0b\u4e2d\u6709\u5411\u524d\u7684seek, \u6216\u8005\u5199\u6253\u5f00\u4e00\u4e2a\u65e7\u7684\u6587\u4ef6.   \u5b9e\u73b0: \u5c06\u6574\u4e2a\u6587\u4ef6\u8bfb\u5165\u5185\u5b58buffer\u4e2d\u8fdb\u884c\u8bfb\u5199, \u5728\u8c03\u7528sync\u7684\u65f6\u5019, \u5c06\u65e7\u6587\u4ef6\u5220\u9664, \u5e76\u5c06\u5185\u5b58buffer\u5199\u5165\u540c\u540d\u65b0\u6587\u4ef6. \u7136\u540e\u5220\u9664\u5185\u5b58buffer, \u8df3\u8f6c\u56de\u6a21\u5f0f1.", 
            "title": "\u6587\u4ef6\u968f\u673a\u5199"
        }, 
        {
            "location": "/cn/bfs_qa/", 
            "text": "Bfs\u4e32\u8bb2\u65f6\u88ab\u95ee\u5230\u7684\u95ee\u9898\u4ee5\u53ca\u6211\u6574\u7406\u7684\u7b54\u6848\n\n\nby \u6768\u7b56\n\n\n\n\n\n\nBlockMapping\u5185\u7684\u4e1c\u897f\u4e0d\u843d\u5730\u4e48\uff1f\u91cd\u542f\u9700\u91cd\u65b0\u52a0\u8f7d\u4e48\uff1f\u8017\u65f6\u591a\u5c11\uff1f\n\n\n\n\nBlockMapping\u5185\u7684\u4e1c\u897f\u786e\u5b9e\u662f\u4e0d\u843d\u5730\u7684\u3002\u53ef\u4ee5\u901a\u8fc7Namespace\u4e2d\u7684\u5185\u5bb9\u4ee5\u53caChunkServer\u7684block report\u91cd\u5efa\u51fa\u6765\u3002\u6bcf\u6b21NameServer\u91cd\u542f\u65f6\u90fd\u4f1a\u91cd\u5efaBlockmapping\u4e2d\u7684\u5185\u5bb9\u3002\u8017\u65f6\u4e3b\u8981\u662f\u987a\u5e8f\u626b\u63cfleveldb\u7684\u8fc7\u7a0b\u3002\n\n\n\n\n\n\n\n\nBlockMapping\u6240\u5360\u5185\u5b58\u7a7a\u95f4\u4f1a\u6210\u4e3anameserver\u7684\u74f6\u9888\u4e48\uff1f\n\n\n\n\nBlockMapping\u4e2d\u6bcf\u4e2ablock\u90fd\u662fint64\u7f16\u53f7\u7684\uff0c\u6240\u4ee5\u6570\u503c\u4e0a\u7a7a\u95f4\u4e0d\u6210\u95ee\u9898\uff0c\u4f46\u7531\u4e8eBlockMapping\u4e2d\u5b58\u653e\u4e86\u6240\u6709block\u7684\u4fe1\u606f\uff0c\u6240\u4ee5\u5b9e\u9645\u4e0a\uff0c\u7269\u7406\u673a\u5668\u4e0a\u7684\u5185\u5b58\u5927\u5c0f\u53ef\u80fd\u4f1a\u6210\u4e3a\u5236\u7ea6\u56e0\u7d20\u3002\u4f46\u662f\uff0c\u540e\u7eed\u53ef\u80fd\u4f1a\u8003\u8651\u5c06BlockMapping\u62c6\u5206\u6210\u5206\u5e03\u5f0f\u5b58\u50a8\u7684\u3002\u76ee\u524d\u6765\u770b\uff0c\u6bcf\u4e2aentry\u5360\u7528\u7684\u5185\u5b58\u4e0d\u5230100\u4e2a\u5b57\u8282\uff0c\u51e0\u5341G\u7684\u5185\u5b58\u7c97\u7565\u4f30\u7b97\u4e0b\u5e94\u8be5\u6765\u53ef\u5b58\u653e\u4ebf\u7ea7\u522b\u7684block\u6570\u3002\n\n\n\n\n\n\n\n\n\u4e3a\u4ec0\u4e48namespace\u7684\u5b58\u50a8\u8bbe\u8ba1\u6210\u8fd9\u6837\uff1f\u4e3a\u4ec0\u4e48\u4e0d\u5b58\u539f\u8def\u5f84\uff1f\n\n\n\n\n\u4e3b\u8981\u662f\u4e3a\u4e86\u9ad8\u6548\u7684list\u4ee5\u53camv\n\n\n\n\n\n\n\n\nmv\u64cd\u4f5c\u662f\u4f4e\u9891\u64cd\u4f5c\uff0c\u6709\u5fc5\u8981\u727a\u7272create\u7684\u6027\u80fd\u53bb\u63d0\u9ad8mv\u7684\u6548\u7387\u4e48\uff1f\n\n\n\n\nCreate\u5176\u5b9e\u4e5f\u4e0d\u4f1a\u592a\u6162\u3002\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(n)\uff0c\u5176\u4e2dn\u4e3a\u76ee\u5f55\u6df1\u5ea6\u3002\n\n\n\n\n\n\n\n\n\u4e3a\u4ec0\u4e48\u4e0d\u7f13\u5b58namespace\uff1f\n\n\n\n\nNamespace\u4e2d\u7684\u6570\u636e\u5176\u5b9e\u662f\u5b58\u653e\u5728leveldb\u4e2d\u7684\uff0cleveldb\u672c\u8eab\u662f\u6709\u7f13\u5b58\u7684\u3002\u81f3\u4e8esdk\u7aef\u7684\u7f13\u5b58\uff0c\u53ef\u80fd\u4f1a\u4ea7\u751f\u4e00\u4e9b\u4e0d\u4e00\u81f4\u6027\u95ee\u9898\u3002\n\n\n\n\n\n\n\n\nsdk\u62ff\u5230\u6587\u4ef6\u6240\u5728\u7684cs\u4e4b\u540e\uff0c\u53d1\u751f\u4e86rename\uff0c\u4f1a\u4e0d\u4f1a\u8bfb\u5230\u9519\u8bef\u7684\u6587\u4ef6\uff1f\n\n\n\n\nSdk\u5728\u5411cs\u53d1\u8d77\u8bfb\u8bf7\u6c42\u65f6\uff0c\u7ed9cs\u63d0\u4f9b\u7684\u53c2\u6570\u662f\u9700\u8981\u8fdb\u884c\u8bfb\u53d6\u7684block id\u3002\u6bd4\u5982\u8bf4\u73b0\u5728\u8981\u8bfbA\u6587\u4ef6\uff0c\u7136\u540e\u5176\u5b83\u4eba\u5c06A rename\u4e3a\u4e86B\uff0c\u4f46\u662fA\u4e2dblock\u7684id\u662f\u4e0d\u53d8\u7684\uff0c\u6240\u4ee5\u53ef\u4ee5\u6b63\u5e38\u8bfb\u3002\u5982\u679c\u8981\u8bfbA\u65f6\uff0c B\u88abrename\u6210\u4e86A\uff0c\u90a3\u4e48A\u4e4b\u524d\u7684block\u4f1a\u88abgc\u7b56\u7565\u5220\u9664\uff0c\u4f46\u662f\u5373\u4f7f\u7269\u7406\u6587\u4ef6\u88ab\u5220\u9664\uff0c\u5728fd\u5c1a\u672a\u88abclose\u4e4b\u524d\uff0c\u4ecd\u7136\u53ef\u4ee5\u8bfb\u5230A\u4e2d\u7684\u6570\u636e\u3002\u8fd9\u4e5f\u4e0elinux\u4e2d\u7684\u8bed\u4e49\u662f\u4e00\u6837\u7684\uff08linux\u4e2d\u4e5f\u53ef\u4ee5\u5220\u9664\u6b63\u5728\u8bfb\u5199\u7684\u6587\u4ef6\uff0c\u53ea\u6709\u5f53\u8be5\u6587\u4ef6\u7684\u6700\u540e\u4e00\u4e2afd\u88ab\u5173\u95ed\u65f6\uff0c\u6587\u4ef6\u624d\u771f\u6b63\u7684\u88ab\u5220\u9664\uff09\n\n\n\n\n\n\n\n\n\u6587\u4ef6\u7684block\u662f\u4e00\u6b21\u6027\u62ff\u5230\u7684\u8fd8\u662f\u591a\u6b21\u62ff\u5230\u7684\uff1f\n\n\n\n\n\u5f53\u524d\u5b9e\u73b0\u4e2d\u8fd8\u53ea\u6709\u4e00\u4e2ablock\uff0c\u6240\u4ee5\u662f\u4e00\u6b21\u6027\u62ff\u5230\u7684\u3002\u5982\u679c\u6709\u591a\u4e2ablock\u65f6\uff0c\u4e00\u6b21\u9700\u8981\u5168\u90e8\u62ff\u6765\u3002\u5426\u5219\u53d1\u751frename\u65f6\uff0c\u53ef\u80fd\u4f1a\u65b0\u65e7\u4e24\u4e2a\u6587\u4ef6\u5404\u8bfb\u4e00\u534a\u3002\n\n\n\n\n\n\n\n\n\u5141\u8bb8\u7528\u6237\u81ea\u5b9a\u4e49block\u5927\u5c0f\u4e48\uff1f\n\n\n\n\n\u76ee\u524d\u6ca1\u8003\u8651\u5141\u8bb8\u3002\u76ee\u524d\u7684\u8bbe\u8ba1\u662f\u652f\u6301\u6bd4\u8f83\u5927\u7684\u6587\u4ef6\uff0c\u5982\u679c\u5141\u8bb8\u7684\u8bdd\uff0c\u7528\u6237\u914d\u7f6e\u7684block\u8fc7\u5c0f\uff0c\u53ef\u80fd\u5bfc\u81f4Nameserver\u5185\u5b58\u7206\u6389\u3002\n\n\n\n\n\n\n\n\nAddBlock\u5728\u4ec0\u4e48\u65f6\u5019\u4f1a\u88ab\u8c03\u7528\uff1f\n\n\n\n\nAddBlock\u5728SDK\u9996\u6b21\u5411 \u4e00\u4e2a\u65b0\u521b\u5efa\u7684\u6587\u4ef6\u8c03\u7528Write\u65f6\u88ab\u8c03\u7528\uff0c\u7136\u540esdk\u4f1a\u4e0eNameServer\u901a\u4fe1\uff0cNamserver\u4e3a\u5176\u5206\u914dblock id\uff0c\u4ee5\u53ca\u6311\u9009\u51fa\u8db3\u591f\u7684ChunkServer\u4f9bsdk\u5199\u5165\u4f7f\u7528\u3002\n\n\n\n\n\n\n\n\n\u4e3a\u4ec0\u4e48\u4e0d\u5728\u521b\u5efa\u6587\u4ef6\u7684\u65f6\u5019\u5c31\u76f4\u63a5AddBlock\uff1f\n\n\n\n\n\u56e0\u4e3a\u6709\u53ef\u80fd\u4e3a\u4e00\u4e9b\u7a7a\u6587\u4ef6\uff0c\u8fd9\u91cc\u4f7f\u7528lazy\u7684\u6a21\u5f0f\uff0c\u5230\u6700\u540e\u4e00\u6b65\u518d\u53bb\u521b\u5efa\u3002\n\n\n\n\n\n\n\n\n\u4ec0\u4e48\u65f6\u5019chunkserver\u4e0a\u4f1a\u6709\u4e00\u4e2a\u5927\u5c0f\u4e3a\u96f6\u7684block\uff1f\n\n\n\n\nSdk\u521b\u5efa\u4e86\u4e00\u4e2a\u6587\u4ef6\u540e\uff0c\u6839\u672c\u6ca1\u8fdb\u884c\u8fc7Write\uff0c\u8fd9\u65f6\uff0c\u53ea\u6709\u5728NameServer\u4e2d\u6709\u8be5\u6587\u4ef6\u7684\u5143\u4fe1\u606f\uff0c\u4f46\u662fChunkServer\u4e0a\u662f\u6ca1\u6709\u7684\u3002\n\n\nSdk\u5411\u4e00\u4e2a\u65b0\u5efa\u7684\u6587\u4ef6\u53d1\u8d77\u4e86\u5199\u8bf7\u6c42\uff0c\u4f46\u662f\u8be5\u5199\u8bf7\u6c42\u5728\u53cd\u6620\u5230ChunkServer\u4e2d\u65f6\uff0cChunkServer\u521a\u521b\u5efa\u5b8c\u6587\u4ef6\u5c31\u6302\u4e86\uff0c\u6b64\u91cc\u8be5block\u7684\u5927\u5c0f\u4e3a0\u3002 \n\n\n\u5b9e\u9645\u5b9e\u73b0\u8fc7\u7a0b\u4e2d\uff0cSdk\u5728AddBlock\u65f6\uff0c\u4f1a\u9996\u5148\u53d1\u9001\u4e00\u4e2a\u957f\u5ea6\u4e3a0\u7684\u5199\u8bf7\u6c42\uff0c\u4fc3\u4f7fChunkServer\u63d0\u524d\u521b\u5efa\u597d\u5199block\u6240\u9700\u7684\u6587\u4ef6\uff0c\u4f46\u662f\u8fd9\u65f6\u8be5block\u7684\u5927\u5c0f\u4e3a0.\uff08@\u4e16\u5149\u548c@\u4e3d\u5a9b\u6628\u5929\u8bf4\u7684\u5e94\u8be5\u662f\u8fd9\u79cd\u60c5\u51b5\uff1f\uff09\n\n\n\n\n\n\n\n\n\u94fe\u5f0f\u5199\u6709\u4ec0\u4e48\u95ee\u9898\u4e48\uff1f\n\n\n\n\n\u94fe\u5f0f\u5199\u6709\u53ef\u80fd\u5b58\u5728\u6162\u8282\u70b9\uff0c\u4e00\u65e6\u94fe\u4e2d\u67d0\u4e2a\u7ed3\u70b9\u901f\u5ea6\u8f83\u6162\uff0c\u5219\u4f1a\u62d6\u6162\u6574\u4e2a\u94fe\u7684\u5199\u5165\u901f\u5ea6\uff0c\u73b0\u5728\u4e5f\u652f\u6301\u6247\u51fa\u5199\uff0c\u540c\u65f6\u5199\u56db\u4e2a\u526f\u672c\uff0c\u53ea\u8981\u6709\u4e09\u4e2a\u6210\u529f\u5c31\u8fd4\u56de\u6210\u529f\uff0c\u53ef\u4ee5\u53bb\u89c4\u907f\u6162\u8282\u70b9\u3002\n\n\n\n\n\n\n\n\nsdk\u5199\u4e00\u5b9a\u4f1a\u9009\u672c\u5730\u7684cs\u4e48\uff1f\n\n\n\n\n\u5982\u679csdk\u672c\u5730\u6709cs\uff0c\u800c\u4e14cs\u4e0a\u7684\u78c1\u76d8\u7a7a\u95f4\u4ee5\u53ca\u8bfb\u5199\u538b\u529b\u5728\u53ef\u627f\u53d7\u8303\u56f4\u5185\uff0c\u4f1a\u5728\u9009\u62e9cs\u65f6\u589e\u52a0\u8be5cs\u7684\u6743\u91cd\uff0c\u5373\u589e\u52a0\u5176\u88ab\u9009\u62e9\u7684\u6982\u7387\uff0c\u56e0\u4e3a\u5982\u679c\u4e00\u5b9a\u9009\u62e9\u672c\u5730\u7684cs\u7684\u8bdd\uff0c\u672c\u5730\u7684cs\u5c06\u5f88\u5feb\u88ab\u6253\u6ee1\u3002\n\n\n\n\n\n\n\n\n\u5199\u6d41\u7a0b\u4e2d\u7684\u6d41\u63a7\u6709\u54ea\u4e9b\uff1f\n\n\n\n\n\u6d41\u63a7\u5206\u4e24\u4e2a\u65b9\u9762\uff1a1.sdk\u7aef 2. ChunkServer\u7aef\u3002\u6bcf\u6b21sdk\u5411ChunkServer\u53d1\u8d77\u5199\u8bf7\u6c42\u540e\uff0c\u82e5sdk\u6536\u5230ChunkServer\u8fd4\u56de\u7684\u5199\u6210\u529f\uff0c\u5219\u4f1a\u79fb\u52a8\u81ea\u5df1\u7ef4\u62a4\u7684\u6ed1\u52a8\u7a97\u53e3\uff0c\u5f53\u6ed1\u52a8\u7a97\u53e3\u7f16\u53f7\u7684\u4e0a\u9650\u5c0f\u4e8esdk\u5f53\u524d\u5c06\u8981\u53d1\u9001\u7684\u5199\u8bf7\u6c42\u7f16\u53f7\u65f6\uff0c\u4f1a\u5c06\u5f53\u524d\u7684\u5199\u8bf7\u6c42Dealy\uff08Delay\u7684\u662f\u7ebf\u7a0b\u6c60\u4e2d\u7684task\uff09\n\n\n\n\n\n\n\n\nsdk\u7aef\u5185\u5b58\u6709\u63a7\u5236\u4e48\uff1f\n\n\n\n\n\u5f53\u524d\u5e76\u6ca1\u6709\u3002\u5982\u679csdk\u5199\u7684\u8fc7\u5feb\uff0c\u786e\u5b9e\u53ef\u80fd\u5185\u5728\u66b4\u589e\u3002\n\n\n\n\n\n\n\n\nsync\u64cd\u4f5c\u843d\u76d8\u4e48\uff1f\u5982\u679c\u4e0d\u843d\u76d8\u4f1a\u4e0d\u4f1a\u4e22\u6570\u636e\uff1f\n\n\n\n\nSync\u64cd\u4f5c\u8fd4\u56de\u6210\u529f\u65f6\u53ef\u4ee5\u4fdd\u8bc1sdk\u628a\u81ea\u5df1\u6240\u7f13\u5b58\u7684\u6570\u636e\u5168\u90e8\u63a8\u5230\u4e86ChunkServer\u7aef\uff0c\u7136\u800c\u6b64\u65f6ChunkServer\u5e76\u4e0d\u89c1\u5f97\u628a\u6240\u6709\u6570\u636e\u90fd\u843d\u76d8\u4e86\u3002\u4f46\u662f\uff0cChunkServer\u5728\u6b63\u5e38\u505c\u673a\u65f6\uff0c\u4f1a\u5c06\u81ea\u5df1\u6240\u6709\u5185\u5b58\u4e2d\u7684\u6570\u636e\u843d\u76d8\uff0c\u5982\u679c\u4e09\u4e2a\u526f\u672c\u6240\u5728\u7684cs\u90fd\u540c\u65f6\u7a81\u7136\u4e86\u5f02\u5e38\u9000\u51fa\u7684\u60c5\u51b5\uff0c\u8fd9\u4e9b\u6570\u636e\u662f\u53ef\u80fd\u4e22\u5931\u7684\uff0c\u8fd9\u4e00\u70b9\u540e\u9762\u4f1a\u6539\u8fdb\u3002\n\n\n\n\n\n\n\n\n\u6df7\u5408\u6a21\u5f0f\u5199\u4e3b\u6302\u4e86\uff0c\u662f\u4e0d\u662f\u5c31\u5199\u4e0d\u4e86\u4e86\uff0c\u8fd8\u80fdopen\u6587\u4ef6\u7ee7\u7eed\u5199\u4e48\uff1f\n\n\n\n\n\u662f\u7684\uff0c\u5982\u679cprimary replica\u6302\u6389\uff0c\u5199\u64cd\u4f5c\u5c06\u4f1a\u5931\u8d25\uff0cNameServer\u4f1a\u5c06\u8be5block\u7684\u6240\u6709\u526f\u672c\u90fd\u5173\u95ed\u3002\u6587\u4ef6\u4e0d\u53ef\u4ee5open\u7ee7\u7eed\u5199\uff0c\u56e0\u4e3a\u5f53\u524dBfs\u7684\u8bbe\u8ba1\u662f\u6240\u6709\u6587\u4ef6\u4e00\u65e6\u88abclose\u6389\u5c31\u4e0d\u53ef\u4ee5\u518d\u4ee5\u5199\u7684\u65b9\u5f0f\u6253\u5f00\u3002\n\n\n\n\n\n\n\n\n\u5982\u679csync\u5931\u8d25\uff0c\u600e\u4e48\u77e5\u9053\u6587\u4ef6\u5230\u5e95\u6709\u591a\u5927\uff1f\n\n\n\n\nSync\u5931\u8d25\u540e\uff0cNameServer\u4f1a\u5c06\u8be5block\u7684\u6240\u6709\u526f\u672c\u90fdclose\u6389\uff0c\u7136\u540e\u8fdb\u884c\u526f\u672c\u4fee\u590d\uff0c\u4fee\u590d\u7684\u539f\u5219\u662f\uff1a\u5c3d\u91cf\u4ee5\u5f53\u524d\u4ecd\u5728\u7ebf\u7684\uff0c\u5177\u6709\u6570\u636e\u6700\u591a\u7684\u526f\u672c\u4e3a\u6807\u51c6\u8fdb\u884c\u4fee\u590d\u3002\u4fee\u590d\u5b8c\u6210\u540e\uff0cStat\u4e2d\u4ee5\u5f97\u5230\u6587\u4ef6\u7684\u5927\u5c0f\u3002\n\n\n\n\n\n\n\n\n\u4e0dsync\u5f97\u6570\u636e\u4f1a\u4e22\uff0c\u4e0a\u5c42\u7528\u6237\u4f1a\u9700\u8981\u505a\u989d\u5916\u5de5\u4f5c\uff0c\u600e\u4e48\u89e3\u51b3\uff1f\n\n\n\n\n\u5176\u5b9e\u4f7f\u7528\u5355\u673a\u6587\u4ef6\u7cfb\u7edf\u4e5f\u6709\u8fd9\u4e2a\u95ee\u9898\u3002\u7528\u6237\u53ef\u4ee5\u8bb0\u5f55\u4e00\u4e2a\u4e0a\u6b21sync\u65f6\u7684offset\u3002\n\n\n\n\n\n\n\n\n\u591a\u79cd\u4e9b\u6a21\u5f0f\uff0c\u9700\u8981\u66b4\u9732\u7ed9\u7528\u6237\u4e48\uff1f\n\n\n\n\n\u5f53\u524d\u662f\u505a\u6210\u4e86sdk\u7aef\u53ef\u914d\u7f6e\u7684\u9009\u9879\uff0c\u5728\u540e\u7eed\u7684\u8fc7\u7a0b\u4e2d\u4f1a\u901a\u8fc7\u6d4b\u8bd5\u6765\u9009\u53d6\u4e00\u4e2a\u6700\u5408\u9002\u7684\u7b56\u7565\uff0c\u5c3d\u91cf\u4e0d\u66b4\u9732\u7ed9\u7528\u6237\u3002\n\n\n\n\n\n\n\n\n\u6b63\u5728\u8bfb\u5199\u7684\u6587\u4ef6\u88ab\u5220\u6389\u4f1a\u53d1\u751f\u4ec0\u4e48\uff1f\u8fd8\u80fd\u7ee7\u7eed\u8bfb\u5199\u4e48\uff1f\n\n\n\n\n\u5148\u8bf4\u6b63\u5728\u8bfb\u7684\uff0c\u88ab\u5220\u9664\u65f6\uff0cChunkServer\u5220\u9664\u7269\u7406\u6587\u4ef6\uff0c\u91ca\u653e\u5f15\u7528\u8ba1\u6570\uff0c\u5220\u9664\u5185\u5b58\u4e2d\u5bf9\u5e94\u7684\u6761\u76ee\uff0c\u5982\u679c\u6587\u4ef6\u53ea\u662f\u88ab\u8bfb\uff0c\u5e76\u672a\u88ab\u5199\uff0c\u5219\u8fd9\u65f6\u5f15\u7528\u8ba1\u6570\u5e94\u8be5\u4f1a\u53d8\u4e3a0\uff0c\u4ece\u800c\u5f15\u8d77\u5185\u5b58\u7ed3\u6784\u7684\u6790\u6784\uff0c\u6587\u4ef6fd\u88ab\u5173\u95ed\uff0c\u540e\u7eed\u4e0d\u53ef\u518d\u88ab\u8bfb\u3002\n\n\n\u5982\u679c\u662f\u6b63\u5728\u5199\u7684\uff0c\u7531\u4e8e\u5220\u9664\u540e\uff0c\u5185\u5b58\u4e2d\u7ef4\u62a4\u7684block\u4fe1\u606f\u5df2\u7ecf\u88ab\u5220\u9664\uff0c\u6240\u4ee5\u540e\u9762\u5199\u8bf7\u6c42\u4f1a\u5931\u8d25\u3002\u7136\u800c\u7531\u4e8eChunkServer\u7aef\u7684\u5199buffer\u662f\u5f02\u6b65\u7684\uff0c\u6bcf\u6b21\u5199Buffer\u65f6\u4f1a\u589e\u52a0\u5f15\u7528\u8ba1\u6570\uff0c\u6240\u4ee5\uff0c\u5f53Buffer\u88ab\u5168\u90e8\u5199\u51fa\u53bb\u4e4b\u540e\uff0c\u5f15\u7528\u8ba1\u6570\u4f1a\u53d8\u4e3a0\uff0c\u5f15\u8d77\u5185\u5b58\u7ed3\u6784\u7684\u6790\u6784\uff0c\u6587\u4ef6fd\u88ab\u5173\u95ed\u3002\n\n\n\u4f46\u662f\uff0c\u7531\u4e8e\u6587\u4ef6\u5220\u9664\u4f7f\u7528\u7684\u662fgc\u7684\u6a21\u5f0f\uff0c\u6240\u4ee5\u65e0\u8bba\u662f\u8bfb\u8fd8\u662f\u5199\uff0c\u90fd\u53ea\u6709\u5728ChunkServer\u5411NameServer\u8fdb\u884cblock report\u540e\uff0cNameServer\u544a\u77e5ChunkServer\u53ef\u4ee5\u5bf9\u67d0\u4e2ablock\u8fdb\u884cgc\u540e\uff0cChunkServer\u624d\u771f\u6b63\u7684\u8fdb\u5165\u5220\u9664\u6d41\u7a0b\uff0c\u5728\u6b64\u4e4b\u524d\uff0c\u6587\u4ef6\u8bfb\u5199\u90fd\u662f\u53ef\u4ee5\u6b63\u5e38\u8fdb\u884c\u7684\u3002\n\n\n\n\n\n\n\n\n\u4e3a\u4ec0\u4e48\u8bfb\u6587\u4ef6\u4e0d\u52a0\u5f15\u7528\u8ba1\u6570\uff1f\n\n\n\n\nChunkServer\u4e2d\u7ef4\u62a4\u7684\u5185\u5b58\u7ed3\u6784\u4e2d\u672c\u8eab\u5c31\u6709\u4e00\u4e2a\u5bf9Block\u7684\u5f15\u7528\uff0c\u65e0\u8bba\u662f\u8bfb\u8fd8\u662f\u5199\u3002\n\n\n\n\n\n\n\n\n\u5982\u679c\u6301\u7eedopen\u6587\u4ef6\u4f46\u662f\u4e0d\u5199\uff0c\u4f1a\u4e0d\u4f1a\u5bf9cs\u4ea7\u751f\u653b\u51fb\u6548\u679c\uff0c\u600e\u4e48\u89e3\u51b3\uff1f\n\n\n\n\n\u55ef\uff0c\u5f53\u524d\u6ca1\u6709\u9650\u5236\u3002\u53ef\u4ee5\u5728SDK\u4e2d\u9650\u5236\u4e00\u4e0b\uff0c\u7c7b\u4f3clinux\u4e2d\u6bcf\u4e2a\u8fdb\u7a0b\u7684\u6700\u5927\u6253\u5f00\u6587\u4ef6\u6570\u3002\n\n\n\n\n\n\n\n\n\u6302\u4e00\u4e2a\u526f\u672c\uff0c\u526f\u672c\u6062\u590d\u7684\u65f6\u5019\u4f1a\u5bf9\u5176\u4ed6\u4e24\u4e2a\u526f\u672c\u505a\u6821\u9a8c\u4e48\uff1f\n\n\n\n\n\u526f\u672c\u6062\u590d\u65f6\uff0c\u4e3a\u4e86\u5c3d\u91cf\u7684\u7ed9\u7528\u6237\u5448\u73b0\u51fa\u6700\u5b8c\u6574\u7684\u6570\u636e\uff0c\u6240\u4ee5\u4f1a\u4ee5\u4ee5\u62e5\u6709\u6570\u636e\u91cf\u6700\u5927\u7684\u526f\u672c\u4f5c\u4e3a\u6807\u51c6\u8fdb\u884c\u6062\u590d\u3002\u5f53\u8be5\u526f\u672c\u6570\u6062\u590d\u5230\u4e24\u4e2a\u53ca\u4e24\u4e2a\u4ee5\u4e0a\u65f6\uff0c\u518d\u5220\u9664\u5176\u5b83\u7248\u672c\u7684\u526f\u672c\u3002\u81f3\u4e8e\u526f\u672c\u7684checksum\uff0c\u76ee\u524d\u8fd8\u6ca1\u6709\u505a\u3002\n\n\n\n\n\n\n\n\n\u6709\u4ec0\u4e48\u7b56\u7565\u4fdd\u8bc1\u4e09\u526f\u672c\u95f4\u662f\u4e00\u81f4\u7684\uff1f\n\n\n\n\n\u540c\u4e0a\uff0c\u76ee\u524d\u6ca1\u6709\u652f\u6301\u7c7b\u4f3cchecksum\u7684\u529f\u80fd\uff0c\u4e0d\u8fc7\u4e2a\u4eba\u611f\u89c9\uff0c\u4fdd\u8bc1\u6570\u636e\u4e0d\u51fa\u9519\u5e94\u8be5\u662f\u591a\u5c42\u53bb\u4fdd\u8bc1\uff0c\u7c7b\u4f3cTCP/IP\u534f\u8bae\uff1f\u94fe\u8def\u5c42\u6709\u6821\u9a8c\uff0c\u7f51\u7edc\u5c42\u4e5f\u4f1a\u6709\u6821\u9a8c\n\n\n\n\n\n\n\n\n\u6b63\u5728\u5199\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6302\u4e86\u4e00\u4e2acs\uff0c\u526f\u672c\u6062\u590d\u7684\u65f6\u5019\u4ee5\u6700\u9ad8\u7248\u672c\u4e3a\u51c6\u8fd8\u662f\u4ee5\u6700\u4f4e\u7248\u672c\u4e3a\u51c6\uff1f\n\n\n\n\n\u524d\u9762\u5df2\u7ecf\u63d0\u5230\uff0c\u4ee5\u6700\u9ad8\u7248\u672c\u4e3a\u6807\u51c6\u3002\n\n\n\n\n\u6709\u6ca1\u6709\u5fc5\u8981\u589e\u52a0\u4e00\u4e2a\u5f3a\u5236sync\u7684\u63a5\u53e3\uff1f\n\n\n\n\n\n\n\u55ef\uff0c\u8fd9\u4e2a\u53ef\u4ee5\u6709~\n\n\n\n\n\n\n\n\n\n\nsdk\u53ef\u4ee5\u5f00\u653e\u5f02\u6b65\u63a5\u53e3\uff1f\n\n\n\n\n\u8fd9\u4e2a\u4e5f\u53ef\u4ee5\u6709\uff0c\u5b9e\u73b0\u8d77\u6765\u6bd4\u8f83\u5bb9\u6613\n\n\n\n\n\n\n\n\nbfs\u7684\u6027\u80fd\u6307\u6807\u548c\u76d1\u63a7\u7cfb\u7edf\uff1f\n\n\n\n\n\u7531\u4e8e\u76ee\u524dChunkServer\u7aef\u7684\u5199\u662f\u5f02\u6b65\u7684\uff0c\u6240\u4ee5\u53ef\u80fd\u5bfc\u81f4\u7528\u6237\u770b\u5230\u7684\u6570\u636e\u865a\u9ad8\u3002\u3002 \u6709\u4e00\u4e2a\u7b80\u5355\u7684Web\u9875\u9762\u53ef\u4ee5\u770b\u5230\u96c6\u7fa4\u7684\u4e00\u4e9b\u57fa\u672c\u8d1f\u8f7d\u72b6\u6001\u3002", 
            "title": "\u4e32\u8bb2\u95ee\u9898"
        }, 
        {
            "location": "/cn/bfs_qa/#bfs", 
            "text": "by \u6768\u7b56    BlockMapping\u5185\u7684\u4e1c\u897f\u4e0d\u843d\u5730\u4e48\uff1f\u91cd\u542f\u9700\u91cd\u65b0\u52a0\u8f7d\u4e48\uff1f\u8017\u65f6\u591a\u5c11\uff1f   BlockMapping\u5185\u7684\u4e1c\u897f\u786e\u5b9e\u662f\u4e0d\u843d\u5730\u7684\u3002\u53ef\u4ee5\u901a\u8fc7Namespace\u4e2d\u7684\u5185\u5bb9\u4ee5\u53caChunkServer\u7684block report\u91cd\u5efa\u51fa\u6765\u3002\u6bcf\u6b21NameServer\u91cd\u542f\u65f6\u90fd\u4f1a\u91cd\u5efaBlockmapping\u4e2d\u7684\u5185\u5bb9\u3002\u8017\u65f6\u4e3b\u8981\u662f\u987a\u5e8f\u626b\u63cfleveldb\u7684\u8fc7\u7a0b\u3002     BlockMapping\u6240\u5360\u5185\u5b58\u7a7a\u95f4\u4f1a\u6210\u4e3anameserver\u7684\u74f6\u9888\u4e48\uff1f   BlockMapping\u4e2d\u6bcf\u4e2ablock\u90fd\u662fint64\u7f16\u53f7\u7684\uff0c\u6240\u4ee5\u6570\u503c\u4e0a\u7a7a\u95f4\u4e0d\u6210\u95ee\u9898\uff0c\u4f46\u7531\u4e8eBlockMapping\u4e2d\u5b58\u653e\u4e86\u6240\u6709block\u7684\u4fe1\u606f\uff0c\u6240\u4ee5\u5b9e\u9645\u4e0a\uff0c\u7269\u7406\u673a\u5668\u4e0a\u7684\u5185\u5b58\u5927\u5c0f\u53ef\u80fd\u4f1a\u6210\u4e3a\u5236\u7ea6\u56e0\u7d20\u3002\u4f46\u662f\uff0c\u540e\u7eed\u53ef\u80fd\u4f1a\u8003\u8651\u5c06BlockMapping\u62c6\u5206\u6210\u5206\u5e03\u5f0f\u5b58\u50a8\u7684\u3002\u76ee\u524d\u6765\u770b\uff0c\u6bcf\u4e2aentry\u5360\u7528\u7684\u5185\u5b58\u4e0d\u5230100\u4e2a\u5b57\u8282\uff0c\u51e0\u5341G\u7684\u5185\u5b58\u7c97\u7565\u4f30\u7b97\u4e0b\u5e94\u8be5\u6765\u53ef\u5b58\u653e\u4ebf\u7ea7\u522b\u7684block\u6570\u3002     \u4e3a\u4ec0\u4e48namespace\u7684\u5b58\u50a8\u8bbe\u8ba1\u6210\u8fd9\u6837\uff1f\u4e3a\u4ec0\u4e48\u4e0d\u5b58\u539f\u8def\u5f84\uff1f   \u4e3b\u8981\u662f\u4e3a\u4e86\u9ad8\u6548\u7684list\u4ee5\u53camv     mv\u64cd\u4f5c\u662f\u4f4e\u9891\u64cd\u4f5c\uff0c\u6709\u5fc5\u8981\u727a\u7272create\u7684\u6027\u80fd\u53bb\u63d0\u9ad8mv\u7684\u6548\u7387\u4e48\uff1f   Create\u5176\u5b9e\u4e5f\u4e0d\u4f1a\u592a\u6162\u3002\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(n)\uff0c\u5176\u4e2dn\u4e3a\u76ee\u5f55\u6df1\u5ea6\u3002     \u4e3a\u4ec0\u4e48\u4e0d\u7f13\u5b58namespace\uff1f   Namespace\u4e2d\u7684\u6570\u636e\u5176\u5b9e\u662f\u5b58\u653e\u5728leveldb\u4e2d\u7684\uff0cleveldb\u672c\u8eab\u662f\u6709\u7f13\u5b58\u7684\u3002\u81f3\u4e8esdk\u7aef\u7684\u7f13\u5b58\uff0c\u53ef\u80fd\u4f1a\u4ea7\u751f\u4e00\u4e9b\u4e0d\u4e00\u81f4\u6027\u95ee\u9898\u3002     sdk\u62ff\u5230\u6587\u4ef6\u6240\u5728\u7684cs\u4e4b\u540e\uff0c\u53d1\u751f\u4e86rename\uff0c\u4f1a\u4e0d\u4f1a\u8bfb\u5230\u9519\u8bef\u7684\u6587\u4ef6\uff1f   Sdk\u5728\u5411cs\u53d1\u8d77\u8bfb\u8bf7\u6c42\u65f6\uff0c\u7ed9cs\u63d0\u4f9b\u7684\u53c2\u6570\u662f\u9700\u8981\u8fdb\u884c\u8bfb\u53d6\u7684block id\u3002\u6bd4\u5982\u8bf4\u73b0\u5728\u8981\u8bfbA\u6587\u4ef6\uff0c\u7136\u540e\u5176\u5b83\u4eba\u5c06A rename\u4e3a\u4e86B\uff0c\u4f46\u662fA\u4e2dblock\u7684id\u662f\u4e0d\u53d8\u7684\uff0c\u6240\u4ee5\u53ef\u4ee5\u6b63\u5e38\u8bfb\u3002\u5982\u679c\u8981\u8bfbA\u65f6\uff0c B\u88abrename\u6210\u4e86A\uff0c\u90a3\u4e48A\u4e4b\u524d\u7684block\u4f1a\u88abgc\u7b56\u7565\u5220\u9664\uff0c\u4f46\u662f\u5373\u4f7f\u7269\u7406\u6587\u4ef6\u88ab\u5220\u9664\uff0c\u5728fd\u5c1a\u672a\u88abclose\u4e4b\u524d\uff0c\u4ecd\u7136\u53ef\u4ee5\u8bfb\u5230A\u4e2d\u7684\u6570\u636e\u3002\u8fd9\u4e5f\u4e0elinux\u4e2d\u7684\u8bed\u4e49\u662f\u4e00\u6837\u7684\uff08linux\u4e2d\u4e5f\u53ef\u4ee5\u5220\u9664\u6b63\u5728\u8bfb\u5199\u7684\u6587\u4ef6\uff0c\u53ea\u6709\u5f53\u8be5\u6587\u4ef6\u7684\u6700\u540e\u4e00\u4e2afd\u88ab\u5173\u95ed\u65f6\uff0c\u6587\u4ef6\u624d\u771f\u6b63\u7684\u88ab\u5220\u9664\uff09     \u6587\u4ef6\u7684block\u662f\u4e00\u6b21\u6027\u62ff\u5230\u7684\u8fd8\u662f\u591a\u6b21\u62ff\u5230\u7684\uff1f   \u5f53\u524d\u5b9e\u73b0\u4e2d\u8fd8\u53ea\u6709\u4e00\u4e2ablock\uff0c\u6240\u4ee5\u662f\u4e00\u6b21\u6027\u62ff\u5230\u7684\u3002\u5982\u679c\u6709\u591a\u4e2ablock\u65f6\uff0c\u4e00\u6b21\u9700\u8981\u5168\u90e8\u62ff\u6765\u3002\u5426\u5219\u53d1\u751frename\u65f6\uff0c\u53ef\u80fd\u4f1a\u65b0\u65e7\u4e24\u4e2a\u6587\u4ef6\u5404\u8bfb\u4e00\u534a\u3002     \u5141\u8bb8\u7528\u6237\u81ea\u5b9a\u4e49block\u5927\u5c0f\u4e48\uff1f   \u76ee\u524d\u6ca1\u8003\u8651\u5141\u8bb8\u3002\u76ee\u524d\u7684\u8bbe\u8ba1\u662f\u652f\u6301\u6bd4\u8f83\u5927\u7684\u6587\u4ef6\uff0c\u5982\u679c\u5141\u8bb8\u7684\u8bdd\uff0c\u7528\u6237\u914d\u7f6e\u7684block\u8fc7\u5c0f\uff0c\u53ef\u80fd\u5bfc\u81f4Nameserver\u5185\u5b58\u7206\u6389\u3002     AddBlock\u5728\u4ec0\u4e48\u65f6\u5019\u4f1a\u88ab\u8c03\u7528\uff1f   AddBlock\u5728SDK\u9996\u6b21\u5411 \u4e00\u4e2a\u65b0\u521b\u5efa\u7684\u6587\u4ef6\u8c03\u7528Write\u65f6\u88ab\u8c03\u7528\uff0c\u7136\u540esdk\u4f1a\u4e0eNameServer\u901a\u4fe1\uff0cNamserver\u4e3a\u5176\u5206\u914dblock id\uff0c\u4ee5\u53ca\u6311\u9009\u51fa\u8db3\u591f\u7684ChunkServer\u4f9bsdk\u5199\u5165\u4f7f\u7528\u3002     \u4e3a\u4ec0\u4e48\u4e0d\u5728\u521b\u5efa\u6587\u4ef6\u7684\u65f6\u5019\u5c31\u76f4\u63a5AddBlock\uff1f   \u56e0\u4e3a\u6709\u53ef\u80fd\u4e3a\u4e00\u4e9b\u7a7a\u6587\u4ef6\uff0c\u8fd9\u91cc\u4f7f\u7528lazy\u7684\u6a21\u5f0f\uff0c\u5230\u6700\u540e\u4e00\u6b65\u518d\u53bb\u521b\u5efa\u3002     \u4ec0\u4e48\u65f6\u5019chunkserver\u4e0a\u4f1a\u6709\u4e00\u4e2a\u5927\u5c0f\u4e3a\u96f6\u7684block\uff1f   Sdk\u521b\u5efa\u4e86\u4e00\u4e2a\u6587\u4ef6\u540e\uff0c\u6839\u672c\u6ca1\u8fdb\u884c\u8fc7Write\uff0c\u8fd9\u65f6\uff0c\u53ea\u6709\u5728NameServer\u4e2d\u6709\u8be5\u6587\u4ef6\u7684\u5143\u4fe1\u606f\uff0c\u4f46\u662fChunkServer\u4e0a\u662f\u6ca1\u6709\u7684\u3002  Sdk\u5411\u4e00\u4e2a\u65b0\u5efa\u7684\u6587\u4ef6\u53d1\u8d77\u4e86\u5199\u8bf7\u6c42\uff0c\u4f46\u662f\u8be5\u5199\u8bf7\u6c42\u5728\u53cd\u6620\u5230ChunkServer\u4e2d\u65f6\uff0cChunkServer\u521a\u521b\u5efa\u5b8c\u6587\u4ef6\u5c31\u6302\u4e86\uff0c\u6b64\u91cc\u8be5block\u7684\u5927\u5c0f\u4e3a0\u3002   \u5b9e\u9645\u5b9e\u73b0\u8fc7\u7a0b\u4e2d\uff0cSdk\u5728AddBlock\u65f6\uff0c\u4f1a\u9996\u5148\u53d1\u9001\u4e00\u4e2a\u957f\u5ea6\u4e3a0\u7684\u5199\u8bf7\u6c42\uff0c\u4fc3\u4f7fChunkServer\u63d0\u524d\u521b\u5efa\u597d\u5199block\u6240\u9700\u7684\u6587\u4ef6\uff0c\u4f46\u662f\u8fd9\u65f6\u8be5block\u7684\u5927\u5c0f\u4e3a0.\uff08@\u4e16\u5149\u548c@\u4e3d\u5a9b\u6628\u5929\u8bf4\u7684\u5e94\u8be5\u662f\u8fd9\u79cd\u60c5\u51b5\uff1f\uff09     \u94fe\u5f0f\u5199\u6709\u4ec0\u4e48\u95ee\u9898\u4e48\uff1f   \u94fe\u5f0f\u5199\u6709\u53ef\u80fd\u5b58\u5728\u6162\u8282\u70b9\uff0c\u4e00\u65e6\u94fe\u4e2d\u67d0\u4e2a\u7ed3\u70b9\u901f\u5ea6\u8f83\u6162\uff0c\u5219\u4f1a\u62d6\u6162\u6574\u4e2a\u94fe\u7684\u5199\u5165\u901f\u5ea6\uff0c\u73b0\u5728\u4e5f\u652f\u6301\u6247\u51fa\u5199\uff0c\u540c\u65f6\u5199\u56db\u4e2a\u526f\u672c\uff0c\u53ea\u8981\u6709\u4e09\u4e2a\u6210\u529f\u5c31\u8fd4\u56de\u6210\u529f\uff0c\u53ef\u4ee5\u53bb\u89c4\u907f\u6162\u8282\u70b9\u3002     sdk\u5199\u4e00\u5b9a\u4f1a\u9009\u672c\u5730\u7684cs\u4e48\uff1f   \u5982\u679csdk\u672c\u5730\u6709cs\uff0c\u800c\u4e14cs\u4e0a\u7684\u78c1\u76d8\u7a7a\u95f4\u4ee5\u53ca\u8bfb\u5199\u538b\u529b\u5728\u53ef\u627f\u53d7\u8303\u56f4\u5185\uff0c\u4f1a\u5728\u9009\u62e9cs\u65f6\u589e\u52a0\u8be5cs\u7684\u6743\u91cd\uff0c\u5373\u589e\u52a0\u5176\u88ab\u9009\u62e9\u7684\u6982\u7387\uff0c\u56e0\u4e3a\u5982\u679c\u4e00\u5b9a\u9009\u62e9\u672c\u5730\u7684cs\u7684\u8bdd\uff0c\u672c\u5730\u7684cs\u5c06\u5f88\u5feb\u88ab\u6253\u6ee1\u3002     \u5199\u6d41\u7a0b\u4e2d\u7684\u6d41\u63a7\u6709\u54ea\u4e9b\uff1f   \u6d41\u63a7\u5206\u4e24\u4e2a\u65b9\u9762\uff1a1.sdk\u7aef 2. ChunkServer\u7aef\u3002\u6bcf\u6b21sdk\u5411ChunkServer\u53d1\u8d77\u5199\u8bf7\u6c42\u540e\uff0c\u82e5sdk\u6536\u5230ChunkServer\u8fd4\u56de\u7684\u5199\u6210\u529f\uff0c\u5219\u4f1a\u79fb\u52a8\u81ea\u5df1\u7ef4\u62a4\u7684\u6ed1\u52a8\u7a97\u53e3\uff0c\u5f53\u6ed1\u52a8\u7a97\u53e3\u7f16\u53f7\u7684\u4e0a\u9650\u5c0f\u4e8esdk\u5f53\u524d\u5c06\u8981\u53d1\u9001\u7684\u5199\u8bf7\u6c42\u7f16\u53f7\u65f6\uff0c\u4f1a\u5c06\u5f53\u524d\u7684\u5199\u8bf7\u6c42Dealy\uff08Delay\u7684\u662f\u7ebf\u7a0b\u6c60\u4e2d\u7684task\uff09     sdk\u7aef\u5185\u5b58\u6709\u63a7\u5236\u4e48\uff1f   \u5f53\u524d\u5e76\u6ca1\u6709\u3002\u5982\u679csdk\u5199\u7684\u8fc7\u5feb\uff0c\u786e\u5b9e\u53ef\u80fd\u5185\u5728\u66b4\u589e\u3002     sync\u64cd\u4f5c\u843d\u76d8\u4e48\uff1f\u5982\u679c\u4e0d\u843d\u76d8\u4f1a\u4e0d\u4f1a\u4e22\u6570\u636e\uff1f   Sync\u64cd\u4f5c\u8fd4\u56de\u6210\u529f\u65f6\u53ef\u4ee5\u4fdd\u8bc1sdk\u628a\u81ea\u5df1\u6240\u7f13\u5b58\u7684\u6570\u636e\u5168\u90e8\u63a8\u5230\u4e86ChunkServer\u7aef\uff0c\u7136\u800c\u6b64\u65f6ChunkServer\u5e76\u4e0d\u89c1\u5f97\u628a\u6240\u6709\u6570\u636e\u90fd\u843d\u76d8\u4e86\u3002\u4f46\u662f\uff0cChunkServer\u5728\u6b63\u5e38\u505c\u673a\u65f6\uff0c\u4f1a\u5c06\u81ea\u5df1\u6240\u6709\u5185\u5b58\u4e2d\u7684\u6570\u636e\u843d\u76d8\uff0c\u5982\u679c\u4e09\u4e2a\u526f\u672c\u6240\u5728\u7684cs\u90fd\u540c\u65f6\u7a81\u7136\u4e86\u5f02\u5e38\u9000\u51fa\u7684\u60c5\u51b5\uff0c\u8fd9\u4e9b\u6570\u636e\u662f\u53ef\u80fd\u4e22\u5931\u7684\uff0c\u8fd9\u4e00\u70b9\u540e\u9762\u4f1a\u6539\u8fdb\u3002     \u6df7\u5408\u6a21\u5f0f\u5199\u4e3b\u6302\u4e86\uff0c\u662f\u4e0d\u662f\u5c31\u5199\u4e0d\u4e86\u4e86\uff0c\u8fd8\u80fdopen\u6587\u4ef6\u7ee7\u7eed\u5199\u4e48\uff1f   \u662f\u7684\uff0c\u5982\u679cprimary replica\u6302\u6389\uff0c\u5199\u64cd\u4f5c\u5c06\u4f1a\u5931\u8d25\uff0cNameServer\u4f1a\u5c06\u8be5block\u7684\u6240\u6709\u526f\u672c\u90fd\u5173\u95ed\u3002\u6587\u4ef6\u4e0d\u53ef\u4ee5open\u7ee7\u7eed\u5199\uff0c\u56e0\u4e3a\u5f53\u524dBfs\u7684\u8bbe\u8ba1\u662f\u6240\u6709\u6587\u4ef6\u4e00\u65e6\u88abclose\u6389\u5c31\u4e0d\u53ef\u4ee5\u518d\u4ee5\u5199\u7684\u65b9\u5f0f\u6253\u5f00\u3002     \u5982\u679csync\u5931\u8d25\uff0c\u600e\u4e48\u77e5\u9053\u6587\u4ef6\u5230\u5e95\u6709\u591a\u5927\uff1f   Sync\u5931\u8d25\u540e\uff0cNameServer\u4f1a\u5c06\u8be5block\u7684\u6240\u6709\u526f\u672c\u90fdclose\u6389\uff0c\u7136\u540e\u8fdb\u884c\u526f\u672c\u4fee\u590d\uff0c\u4fee\u590d\u7684\u539f\u5219\u662f\uff1a\u5c3d\u91cf\u4ee5\u5f53\u524d\u4ecd\u5728\u7ebf\u7684\uff0c\u5177\u6709\u6570\u636e\u6700\u591a\u7684\u526f\u672c\u4e3a\u6807\u51c6\u8fdb\u884c\u4fee\u590d\u3002\u4fee\u590d\u5b8c\u6210\u540e\uff0cStat\u4e2d\u4ee5\u5f97\u5230\u6587\u4ef6\u7684\u5927\u5c0f\u3002     \u4e0dsync\u5f97\u6570\u636e\u4f1a\u4e22\uff0c\u4e0a\u5c42\u7528\u6237\u4f1a\u9700\u8981\u505a\u989d\u5916\u5de5\u4f5c\uff0c\u600e\u4e48\u89e3\u51b3\uff1f   \u5176\u5b9e\u4f7f\u7528\u5355\u673a\u6587\u4ef6\u7cfb\u7edf\u4e5f\u6709\u8fd9\u4e2a\u95ee\u9898\u3002\u7528\u6237\u53ef\u4ee5\u8bb0\u5f55\u4e00\u4e2a\u4e0a\u6b21sync\u65f6\u7684offset\u3002     \u591a\u79cd\u4e9b\u6a21\u5f0f\uff0c\u9700\u8981\u66b4\u9732\u7ed9\u7528\u6237\u4e48\uff1f   \u5f53\u524d\u662f\u505a\u6210\u4e86sdk\u7aef\u53ef\u914d\u7f6e\u7684\u9009\u9879\uff0c\u5728\u540e\u7eed\u7684\u8fc7\u7a0b\u4e2d\u4f1a\u901a\u8fc7\u6d4b\u8bd5\u6765\u9009\u53d6\u4e00\u4e2a\u6700\u5408\u9002\u7684\u7b56\u7565\uff0c\u5c3d\u91cf\u4e0d\u66b4\u9732\u7ed9\u7528\u6237\u3002     \u6b63\u5728\u8bfb\u5199\u7684\u6587\u4ef6\u88ab\u5220\u6389\u4f1a\u53d1\u751f\u4ec0\u4e48\uff1f\u8fd8\u80fd\u7ee7\u7eed\u8bfb\u5199\u4e48\uff1f   \u5148\u8bf4\u6b63\u5728\u8bfb\u7684\uff0c\u88ab\u5220\u9664\u65f6\uff0cChunkServer\u5220\u9664\u7269\u7406\u6587\u4ef6\uff0c\u91ca\u653e\u5f15\u7528\u8ba1\u6570\uff0c\u5220\u9664\u5185\u5b58\u4e2d\u5bf9\u5e94\u7684\u6761\u76ee\uff0c\u5982\u679c\u6587\u4ef6\u53ea\u662f\u88ab\u8bfb\uff0c\u5e76\u672a\u88ab\u5199\uff0c\u5219\u8fd9\u65f6\u5f15\u7528\u8ba1\u6570\u5e94\u8be5\u4f1a\u53d8\u4e3a0\uff0c\u4ece\u800c\u5f15\u8d77\u5185\u5b58\u7ed3\u6784\u7684\u6790\u6784\uff0c\u6587\u4ef6fd\u88ab\u5173\u95ed\uff0c\u540e\u7eed\u4e0d\u53ef\u518d\u88ab\u8bfb\u3002  \u5982\u679c\u662f\u6b63\u5728\u5199\u7684\uff0c\u7531\u4e8e\u5220\u9664\u540e\uff0c\u5185\u5b58\u4e2d\u7ef4\u62a4\u7684block\u4fe1\u606f\u5df2\u7ecf\u88ab\u5220\u9664\uff0c\u6240\u4ee5\u540e\u9762\u5199\u8bf7\u6c42\u4f1a\u5931\u8d25\u3002\u7136\u800c\u7531\u4e8eChunkServer\u7aef\u7684\u5199buffer\u662f\u5f02\u6b65\u7684\uff0c\u6bcf\u6b21\u5199Buffer\u65f6\u4f1a\u589e\u52a0\u5f15\u7528\u8ba1\u6570\uff0c\u6240\u4ee5\uff0c\u5f53Buffer\u88ab\u5168\u90e8\u5199\u51fa\u53bb\u4e4b\u540e\uff0c\u5f15\u7528\u8ba1\u6570\u4f1a\u53d8\u4e3a0\uff0c\u5f15\u8d77\u5185\u5b58\u7ed3\u6784\u7684\u6790\u6784\uff0c\u6587\u4ef6fd\u88ab\u5173\u95ed\u3002  \u4f46\u662f\uff0c\u7531\u4e8e\u6587\u4ef6\u5220\u9664\u4f7f\u7528\u7684\u662fgc\u7684\u6a21\u5f0f\uff0c\u6240\u4ee5\u65e0\u8bba\u662f\u8bfb\u8fd8\u662f\u5199\uff0c\u90fd\u53ea\u6709\u5728ChunkServer\u5411NameServer\u8fdb\u884cblock report\u540e\uff0cNameServer\u544a\u77e5ChunkServer\u53ef\u4ee5\u5bf9\u67d0\u4e2ablock\u8fdb\u884cgc\u540e\uff0cChunkServer\u624d\u771f\u6b63\u7684\u8fdb\u5165\u5220\u9664\u6d41\u7a0b\uff0c\u5728\u6b64\u4e4b\u524d\uff0c\u6587\u4ef6\u8bfb\u5199\u90fd\u662f\u53ef\u4ee5\u6b63\u5e38\u8fdb\u884c\u7684\u3002     \u4e3a\u4ec0\u4e48\u8bfb\u6587\u4ef6\u4e0d\u52a0\u5f15\u7528\u8ba1\u6570\uff1f   ChunkServer\u4e2d\u7ef4\u62a4\u7684\u5185\u5b58\u7ed3\u6784\u4e2d\u672c\u8eab\u5c31\u6709\u4e00\u4e2a\u5bf9Block\u7684\u5f15\u7528\uff0c\u65e0\u8bba\u662f\u8bfb\u8fd8\u662f\u5199\u3002     \u5982\u679c\u6301\u7eedopen\u6587\u4ef6\u4f46\u662f\u4e0d\u5199\uff0c\u4f1a\u4e0d\u4f1a\u5bf9cs\u4ea7\u751f\u653b\u51fb\u6548\u679c\uff0c\u600e\u4e48\u89e3\u51b3\uff1f   \u55ef\uff0c\u5f53\u524d\u6ca1\u6709\u9650\u5236\u3002\u53ef\u4ee5\u5728SDK\u4e2d\u9650\u5236\u4e00\u4e0b\uff0c\u7c7b\u4f3clinux\u4e2d\u6bcf\u4e2a\u8fdb\u7a0b\u7684\u6700\u5927\u6253\u5f00\u6587\u4ef6\u6570\u3002     \u6302\u4e00\u4e2a\u526f\u672c\uff0c\u526f\u672c\u6062\u590d\u7684\u65f6\u5019\u4f1a\u5bf9\u5176\u4ed6\u4e24\u4e2a\u526f\u672c\u505a\u6821\u9a8c\u4e48\uff1f   \u526f\u672c\u6062\u590d\u65f6\uff0c\u4e3a\u4e86\u5c3d\u91cf\u7684\u7ed9\u7528\u6237\u5448\u73b0\u51fa\u6700\u5b8c\u6574\u7684\u6570\u636e\uff0c\u6240\u4ee5\u4f1a\u4ee5\u4ee5\u62e5\u6709\u6570\u636e\u91cf\u6700\u5927\u7684\u526f\u672c\u4f5c\u4e3a\u6807\u51c6\u8fdb\u884c\u6062\u590d\u3002\u5f53\u8be5\u526f\u672c\u6570\u6062\u590d\u5230\u4e24\u4e2a\u53ca\u4e24\u4e2a\u4ee5\u4e0a\u65f6\uff0c\u518d\u5220\u9664\u5176\u5b83\u7248\u672c\u7684\u526f\u672c\u3002\u81f3\u4e8e\u526f\u672c\u7684checksum\uff0c\u76ee\u524d\u8fd8\u6ca1\u6709\u505a\u3002     \u6709\u4ec0\u4e48\u7b56\u7565\u4fdd\u8bc1\u4e09\u526f\u672c\u95f4\u662f\u4e00\u81f4\u7684\uff1f   \u540c\u4e0a\uff0c\u76ee\u524d\u6ca1\u6709\u652f\u6301\u7c7b\u4f3cchecksum\u7684\u529f\u80fd\uff0c\u4e0d\u8fc7\u4e2a\u4eba\u611f\u89c9\uff0c\u4fdd\u8bc1\u6570\u636e\u4e0d\u51fa\u9519\u5e94\u8be5\u662f\u591a\u5c42\u53bb\u4fdd\u8bc1\uff0c\u7c7b\u4f3cTCP/IP\u534f\u8bae\uff1f\u94fe\u8def\u5c42\u6709\u6821\u9a8c\uff0c\u7f51\u7edc\u5c42\u4e5f\u4f1a\u6709\u6821\u9a8c     \u6b63\u5728\u5199\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6302\u4e86\u4e00\u4e2acs\uff0c\u526f\u672c\u6062\u590d\u7684\u65f6\u5019\u4ee5\u6700\u9ad8\u7248\u672c\u4e3a\u51c6\u8fd8\u662f\u4ee5\u6700\u4f4e\u7248\u672c\u4e3a\u51c6\uff1f   \u524d\u9762\u5df2\u7ecf\u63d0\u5230\uff0c\u4ee5\u6700\u9ad8\u7248\u672c\u4e3a\u6807\u51c6\u3002   \u6709\u6ca1\u6709\u5fc5\u8981\u589e\u52a0\u4e00\u4e2a\u5f3a\u5236sync\u7684\u63a5\u53e3\uff1f    \u55ef\uff0c\u8fd9\u4e2a\u53ef\u4ee5\u6709~      sdk\u53ef\u4ee5\u5f00\u653e\u5f02\u6b65\u63a5\u53e3\uff1f   \u8fd9\u4e2a\u4e5f\u53ef\u4ee5\u6709\uff0c\u5b9e\u73b0\u8d77\u6765\u6bd4\u8f83\u5bb9\u6613     bfs\u7684\u6027\u80fd\u6307\u6807\u548c\u76d1\u63a7\u7cfb\u7edf\uff1f   \u7531\u4e8e\u76ee\u524dChunkServer\u7aef\u7684\u5199\u662f\u5f02\u6b65\u7684\uff0c\u6240\u4ee5\u53ef\u80fd\u5bfc\u81f4\u7528\u6237\u770b\u5230\u7684\u6570\u636e\u865a\u9ad8\u3002\u3002 \u6709\u4e00\u4e2a\u7b80\u5355\u7684Web\u9875\u9762\u53ef\u4ee5\u770b\u5230\u96c6\u7fa4\u7684\u4e00\u4e9b\u57fa\u672c\u8d1f\u8f7d\u72b6\u6001\u3002", 
            "title": "Bfs\u4e32\u8bb2\u65f6\u88ab\u95ee\u5230\u7684\u95ee\u9898\u4ee5\u53ca\u6211\u6574\u7406\u7684\u7b54\u6848"
        }, 
        {
            "location": "/cn/committer/", 
            "text": "Baidu File System Committer \u51c6\u5165\u6807\u51c6\n\n\nBaidu File System Committer\n\n\nBaidu File System (\u4ee5\u4e0b\u7b80\u79f0BFS) \u7684committer\u8d1f\u8d23pull request\u7684code-review\u548c\u5408\u5165\u3002\n\n\n\u8d21\u732e\n\n\nBFS\u7684issue\uff0cTodo List \u548c RoadMap \u4e2d\u4f1a\u6ce8\u660e\u8be5\u6761\u76ee\u5b8c\u6210\u540e\u5bf9BFS\u4ea7\u751f\u7684\u8d21\u732e\u503c\uff0ccontributer \u5b8c\u6210\u76f8\u5e94\u529f\u80fd\u5f00\u53d1\u6216bug\u4fee\u590d\u5e76\u88ab\u5408\u5165\u4ee3\u7801\u5e93\u4e2d\u540e\u83b7\u5f97\u76f8\u5e94\u8d21\u732e\u503c\u3002\u8d21\u732e\u91cf\u5316\u53c2\u8003\u6807\u51c6\u5982\u4e0b\uff1a\n\n\n* 1\u70b9\uff1a\u62fc\u5199\u9519\u8bef\u3001\u4ee3\u7801\u98ce\u683c\u4fee\u6b63\uff0c\u6587\u6863\u5b8c\u5584\u8865\u5145\n* 2\u70b9\uff1a\u5c0fbug\u4fee\u590d\uff0c\u7b80\u5355\u529f\u80fd\u5b9e\u73b0  \n* 3\u70b9\uff1a\u91cd\u8981bug\u4fee\u590d\uff0c\u529f\u80fd\u5b9e\u73b0   \n* 6\u70b9\uff1a\u6838\u5fc3feature\u5b9e\u73b0\n\n\n\n\u4ee5\u4e0a\u4e3a\u53c2\u8003\u6807\u51c6\uff0c\u7279\u6b8a\u60c5\u51b5\u53ef\u7531committer\u5546\u8bae\u51b3\u5b9a\u3002Contributor \u63d0\u51fa issue \u4f46\u672a\u5b9e\u73b0\u7684\u7531committer \u5546\u8bae\u51b3\u5b9a\u8d21\u732e\u503c\u3002\n\n\nCommitter\u6807\u51c6\n\n\nBFS committer \u9700\u6ee1\u8db3\u4ee5\u4e0b\u6761\u4ef6\uff1a\n\n\n\u2022   \u4e86\u89e3\u5e76\u8ba4\u53ef BFS \u7684\u6838\u5fc3\u8bbe\u8ba1\u76ee\u6807\n\u2022   \u5bf9 BFS \u6709\u81f3\u5c1120\u70b9\u7684\u8d21\u732e\u503c\n\u2022   \u534a\u6570\u4ee5\u4e0a\u73b0\u4efbcommitter\u8ba4\u53ef\n\n\n\n\u6ee1\u8db3\u4ee5\u4e0a\u6761\u4ef6\u7684 contributor \u53ef\u7533\u8bf7\u6210\u4e3a BFS \u7684committer\u3002\u5728\u5f81\u5f97\u5e76\u6709\u534a\u6570\u4ee5\u4e0a\u73b0\u4efb committer \u540c\u610f\u540e\uff0c\u8be5 contributor \u6210\u4e3a BFS \u7684committer\u3002\n\n\u73b0\u4efb committer \u82e5\u4e0d\u518d\u7ee7\u7eed\u53c2\u4e0e\u8d21\u732e\uff0c\u53ef\u4ee5\u81ea\u5df1\u7533\u8bf7\u6216\u7ecf\u8fc7PMC\u6295\u7968\u901a\u8fc7\u540e\u9000\u4f11\uff0c\u9000\u4f11\u540e\u6254\u4fdd\u7559committer\u79f0\u53f7\uff0c\u4f46\u4e0d\u518d\u5bf9\u9879\u76ee\u62e5\u6709\u5199\u6743\u9650\u3002", 
            "title": "committer"
        }, 
        {
            "location": "/cn/committer/#baidu-file-system-committer", 
            "text": "", 
            "title": "Baidu File System Committer \u51c6\u5165\u6807\u51c6"
        }, 
        {
            "location": "/cn/committer/#baidu-file-system-committer_1", 
            "text": "Baidu File System (\u4ee5\u4e0b\u7b80\u79f0BFS) \u7684committer\u8d1f\u8d23pull request\u7684code-review\u548c\u5408\u5165\u3002", 
            "title": "Baidu File System Committer"
        }, 
        {
            "location": "/cn/committer/#_1", 
            "text": "BFS\u7684issue\uff0cTodo List \u548c RoadMap \u4e2d\u4f1a\u6ce8\u660e\u8be5\u6761\u76ee\u5b8c\u6210\u540e\u5bf9BFS\u4ea7\u751f\u7684\u8d21\u732e\u503c\uff0ccontributer \u5b8c\u6210\u76f8\u5e94\u529f\u80fd\u5f00\u53d1\u6216bug\u4fee\u590d\u5e76\u88ab\u5408\u5165\u4ee3\u7801\u5e93\u4e2d\u540e\u83b7\u5f97\u76f8\u5e94\u8d21\u732e\u503c\u3002\u8d21\u732e\u91cf\u5316\u53c2\u8003\u6807\u51c6\u5982\u4e0b\uff1a  * 1\u70b9\uff1a\u62fc\u5199\u9519\u8bef\u3001\u4ee3\u7801\u98ce\u683c\u4fee\u6b63\uff0c\u6587\u6863\u5b8c\u5584\u8865\u5145\n* 2\u70b9\uff1a\u5c0fbug\u4fee\u590d\uff0c\u7b80\u5355\u529f\u80fd\u5b9e\u73b0  \n* 3\u70b9\uff1a\u91cd\u8981bug\u4fee\u590d\uff0c\u529f\u80fd\u5b9e\u73b0   \n* 6\u70b9\uff1a\u6838\u5fc3feature\u5b9e\u73b0  \u4ee5\u4e0a\u4e3a\u53c2\u8003\u6807\u51c6\uff0c\u7279\u6b8a\u60c5\u51b5\u53ef\u7531committer\u5546\u8bae\u51b3\u5b9a\u3002Contributor \u63d0\u51fa issue \u4f46\u672a\u5b9e\u73b0\u7684\u7531committer \u5546\u8bae\u51b3\u5b9a\u8d21\u732e\u503c\u3002", 
            "title": "\u8d21\u732e"
        }, 
        {
            "location": "/cn/committer/#committer", 
            "text": "BFS committer \u9700\u6ee1\u8db3\u4ee5\u4e0b\u6761\u4ef6\uff1a  \u2022   \u4e86\u89e3\u5e76\u8ba4\u53ef BFS \u7684\u6838\u5fc3\u8bbe\u8ba1\u76ee\u6807\n\u2022   \u5bf9 BFS \u6709\u81f3\u5c1120\u70b9\u7684\u8d21\u732e\u503c\n\u2022   \u534a\u6570\u4ee5\u4e0a\u73b0\u4efbcommitter\u8ba4\u53ef  \u6ee1\u8db3\u4ee5\u4e0a\u6761\u4ef6\u7684 contributor \u53ef\u7533\u8bf7\u6210\u4e3a BFS \u7684committer\u3002\u5728\u5f81\u5f97\u5e76\u6709\u534a\u6570\u4ee5\u4e0a\u73b0\u4efb committer \u540c\u610f\u540e\uff0c\u8be5 contributor \u6210\u4e3a BFS \u7684committer\u3002 \n\u73b0\u4efb committer \u82e5\u4e0d\u518d\u7ee7\u7eed\u53c2\u4e0e\u8d21\u732e\uff0c\u53ef\u4ee5\u81ea\u5df1\u7533\u8bf7\u6216\u7ecf\u8fc7PMC\u6295\u7968\u901a\u8fc7\u540e\u9000\u4f11\uff0c\u9000\u4f11\u540e\u6254\u4fdd\u7559committer\u79f0\u53f7\uff0c\u4f46\u4e0d\u518d\u5bf9\u9879\u76ee\u62e5\u6709\u5199\u6743\u9650\u3002", 
            "title": "Committer\u6807\u51c6"
        }, 
        {
            "location": "/cn/design/", 
            "text": "\u8bbe\u8ba1\n\n\n\u4e3b\u5907master\u7ed3\u6784\n\n\nmaster\u4e4b\u95f4\u901a\u8fc7\u4e00\u81f4\u6027\u534f\u8bae\u4fdd\u6301\u540c\u6b65\uff0c\u6bcf\u4e2amaster\u90fd\u5b58\u50a8\u6240\u6709\u4fe1\u606f\u3002\n\nmaster\u7684\u6570\u636e\u662f\u843d\u5730\u7684\uff0c\u4e0d\u4e00\u5b9a\u975e\u5f97\u5168\u5185\u5b58\uff0c\u901a\u8fc7LRU\u5185\u5b58cache\u4fdd\u8bc1\u70ed\u70b9\u8bbf\u95ee\u7684\u5feb\u901f\u54cd\u5e94\u3002\n\n\n\u6587\u4ef6\u5206\u5757\n\n\n\u6587\u4ef6\u662f\u5426\u5206\u5757\u51b3\u5b9a\u4e86\u80fd\u5426\u652f\u6301\u5927\u6587\u4ef6\n\n\u6587\u4ef6\u540d\u4fe1\u606f\u662f\u5426\u5b58\u50a8\u5728master\u51b3\u5b9a\u4e86\u662f\u5426\u652f\u6301\u5c0f\u6587\u4ef6\n\n\u6298\u8877\u662f\u5bf9\u5927\u6587\u4ef6\u624d\u5206\u5757\uff0c\u5c0f\u6587\u4ef6(\n100G)\u4e0d\u5206\u5757\uff1b\u521b\u5efa\u6587\u4ef6\u5939\u65f6\u6307\u5b9a\u53ef\u5426list\uff0c\u53eflist\u7684\u5fc5\u987b\u5b58\u5728\u76ee\u5f55\u6811\u4e2d\uff0c\u4e0d\u53eflist\u7684\u53ef\u4ee5\u54c8\u5e0c\u5230chunkserver\uff0c\u8ba9chunkserver\u53bb\u7ef4\u62a4meta\u4fe1\u606f\u3002\n\n\n\u6587\u4ef6meta\u4fe1\u606f\n\n\n\u6587\u4ef6meta\u4fe1\u606f\u5b58\u50a8\u5728master\u4f1a\u5bfc\u81f4master\u8d1f\u8f7d\u8fc7\u9ad8\uff08\u5185\u5b58\uff0ccpu\uff09\n\u6211\u4eec\u9009\u62e9\u5bf9\u4e0e\u4e0d\u5206\u5757\u7684\u6587\u4ef6\uff0c \u5c06\u6587\u4ef6meta\u5b58\u50a8\u5728chunkserver\uff0c\u5982\u679c\u7528\u6237\u8981list\uff0c\u90a3\u4ec5\u9700\u8981\u8bbf\u95eemaster\uff0c\u4f46\u5982\u679c\u8981\u83b7\u53d6\u6587\u4ef6\u5927\u5c0f\u7b49\u4fe1\u606f\uff0c\u90a3\u5c31\u5fc5\u987b\u5f97\u8bbf\u95ee\u5bf9\u5e94\u7684chunkserver\u4e86\uff0cmaster\u4ec5\u5b58\u50a8namespace\u548c\u6bcf\u4e2a\u6587\u4ef6\u5728\u54ea\u4e9bchunkserver\u4e0a\u3002\n\n\n\u5199\u6570\u636e\u6d41\n\n\n\u6709\u4e24\u4e2a\u9009\u62e9\uff1a\n\n1. client\u5199\u4e00\u4efd\uff0c\u7136\u540echunkserver\u901a\u8fc7\u590d\u5236\u94fe\u521b\u5efa\u591a\u526f\u672c\uff0c\u4f18\u52bf\u662fclient\u5e26\u5bbd\u5360\u7528\u4f4e\uff1b\n\n2. client\u4e00\u6b21\u5199\u591a\u4efd\uff0c\u4f18\u52bf\u662f\u53ef\u4ee5\u591a\u4e9b\u4e00\u4efd\uff0c\u5e76\u5728\u5199\u7684\u8fc7\u7a0b\u4e2d\u629b\u5f03\u6162\u8282\u70b9\u3002\n\u8003\u8651\u5c06\u8fd9\u4e2a\u505a\u6210\u4e2a\u9009\u9879\uff0c\u4e24\u79cd\u90fd\u652f\u6301\u3002\n\n\n\u597d\u5427\uff0c\u6211\u4eec\u5148\u6765\u5f00\u53d1\u4e00\u4e2a\u5355master\uff0c\u4e0d\u652f\u6301\u5206\u5757\uff0c\u4e0d\u652f\u6301\u5c0f\u6587\u4ef6\u7684fs\u5427\u3002\n\n\n\u5b9e\u73b0\n\n\nNamespace\n\n\n\u5b58\u50a8\u6211\u4eec\u9009\u62e9\u4e86leveldb\uff0c\u53ef\u4ee5\u7b80\u5355\u7684\u5c06\u6574\u4e2a\u76ee\u5f55\u7ed3\u6784\u5e73\u5c55\u5f00\uff0c\u5e76\u63d0\u4f9b\u9ad8\u6548\u7684\u6587\u4ef6\u521b\u5efa\u3001\u5220\u9664\u548clist\u64cd\u4f5c\u3002\n\n\u5b9e\u9645\u76ee\u5f55\u7ed3\u6784:\n\n\n/home/dirx/\n          /filex\n      diry/\n          /filey\n/tmp/\n     filez\n\n\n\n\u8fc7\u53bb\u7684\u5b58\u50a8\u683c\u5f0f\u4e3a:\n\n\n00/\n01/home\n01/tmp\n02/home/dirx\n02/home/diry\n02/tmp/filez\n03/home/dirx/filex\n03/home/diry/filey\n\n\n\n\u8fd9\u6837\u505a\u7684\u4e3b\u8981\u76ee\u7684\u662f\u9ad8\u6548\u652f\u6301list\u64cd\u4f5c\u3002\n\n\n\u73b0\u5728\u7684\u5b58\u50a8\u683c\u5f0f\u4e3a:\n\n\n1home -\n 2\n1tmp -\n 3\n2dirx -\n 4\n2diry -\n 5\n3filez -\n 6\n4filex -\n 7\n5filey -\n 8\n\n\n\n\u5176\u4e2d\u6240\u6709\u6570\u5b57\u90fd\u662f64\u4f4d\u6574\u6570\uff0c\u76ee\u7684\u662f\u652f\u6301\u9ad8\u6548list\u64cd\u4f5c\u7684\u540c\u65f6\uff0c\u652f\u6301\u9ad8\u6548\u7684rename\u64cd\u4f5c\u3002\n\nrename\u64cd\u4f5c\u4e2d\uff0c\u6587\u4ef6\u5939\u540d\u5b57\u6539\u53d8\uff0c\u4f46\u7f16\u53f7\u4e0d\u53d8\u3002\n\n\nOpen for write\n\n\n\u5728namespace\u4e2d\u5199\u5165\uff0c \u521b\u5efa\u5757\uff0c \u5206\u914ddatanode\u3002\n\n\u5982\u679c\u5931\u8d25\uff0c\u5728nameserver\u56de\u6eda\u3002\n\n\u6570\u636e\u53d1\u5f80datanode\uff0c \u4e2d\u95f4\u7f51\u7edc\u6545\u969c\u53ef\u4ee5\u91cd\u8fde\uff0c\u4f46\u4e00\u65e6close\u540e\u4e0d\u53ef\u8ffd\u52a0\u5199\u5165\u3002\n\nnameserver\u5411client\u53d1\u653elease\uff0clease\u5931\u6548\u540e\uff0c\u4e0d\u53ef\u4ee5\u7ee7\u7eed\u5199\u5165\u3002\n\n\nsdk\u7aef\u5199\u5165\u6d41\u7a0b\n\n\n\n\nWrite\n\n    \u5982\u679c_chains_head\u4e3a\u7a7a\uff0c\u5219\u540c\u6b65\u8c03\u7528AddBlock\n\n    \u5411_write_buf\u4e2dappend\u6570\u636e\uff0c\u5982\u679c_write_buf\u6ee1\u4e86\uff0c\u8c03\u7528StartWrite(_write_buf)  \n\n\nStartWrite\n\n    \u5c06_write_buf\u653e\u5165_write_queue\u4e2d\uff0c\u7136\u540e\u629b\u51faBackgroundWrite\u4e8b\u4ef6\uff0c++_back_writing  \n\n\nBackgroundWrite\n\n    \u5982\u679c_write_queue\u975e\u7a7a \u4e14 \u6700\u5c0f\u7684sequence\u5c0f\u4e8e\u6ed1\u52a8\u7a97\u53e3\u4e0a\u9650\uff0c\u5f02\u6b65\u8c03\u7528WriteBlock  \n\n\nWriteChunkCallback\n\n    \u5982\u679cWriteBlock\u5931\u8d25\uff0c++_back_writing\uff0c delay\u4e00\u4e2aDelayWriteChunk\n\n    \u5982\u679cWriteBlock\u6210\u529f\uff0c\u66f4\u65b0\u6ed1\u52a8\u7a97\u53e3\n\n    \u5982\u679c_write_queue\u4e3a\u7a7a\uff0cback_writing\u4e3a0\uff0c\u5219\u5524\u9192sync\uff0c\n    \u8c03\u5ea6\u4e00\u4e2a\u65b0\u7684BackgroundWrite  \n\n\nDelayWriteChunk\n\n    \u5f02\u6b65\u8c03\u7528WriteBlock\uff0c--_back_writing\n\n\n\n\nOpen for read\n\n\n\u5728\u4ecenamespace\u4e2d\u83b7\u53d6datanode\u4fe1\u606f\uff0c\u5411\u968f\u673adatanode\u8bfb\u53d6\u6570\u636e\u3002\n\n\u8bfb\u53d6\u4e0d\u88ab\u4fdd\u62a4\uff0c\u5982\u679c\u8bfb\u8fc7\u7a0b\u4e2d\u6587\u4ef6\u88ab\u5220\u9664\uff0c\u540e\u7eed\u8bfb\u53d6\u5931\u8d25", 
            "title": "design"
        }, 
        {
            "location": "/cn/design/#_1", 
            "text": "", 
            "title": "\u8bbe\u8ba1"
        }, 
        {
            "location": "/cn/design/#master", 
            "text": "master\u4e4b\u95f4\u901a\u8fc7\u4e00\u81f4\u6027\u534f\u8bae\u4fdd\u6301\u540c\u6b65\uff0c\u6bcf\u4e2amaster\u90fd\u5b58\u50a8\u6240\u6709\u4fe1\u606f\u3002 \nmaster\u7684\u6570\u636e\u662f\u843d\u5730\u7684\uff0c\u4e0d\u4e00\u5b9a\u975e\u5f97\u5168\u5185\u5b58\uff0c\u901a\u8fc7LRU\u5185\u5b58cache\u4fdd\u8bc1\u70ed\u70b9\u8bbf\u95ee\u7684\u5feb\u901f\u54cd\u5e94\u3002", 
            "title": "\u4e3b\u5907master\u7ed3\u6784"
        }, 
        {
            "location": "/cn/design/#_2", 
            "text": "\u6587\u4ef6\u662f\u5426\u5206\u5757\u51b3\u5b9a\u4e86\u80fd\u5426\u652f\u6301\u5927\u6587\u4ef6 \n\u6587\u4ef6\u540d\u4fe1\u606f\u662f\u5426\u5b58\u50a8\u5728master\u51b3\u5b9a\u4e86\u662f\u5426\u652f\u6301\u5c0f\u6587\u4ef6 \n\u6298\u8877\u662f\u5bf9\u5927\u6587\u4ef6\u624d\u5206\u5757\uff0c\u5c0f\u6587\u4ef6( 100G)\u4e0d\u5206\u5757\uff1b\u521b\u5efa\u6587\u4ef6\u5939\u65f6\u6307\u5b9a\u53ef\u5426list\uff0c\u53eflist\u7684\u5fc5\u987b\u5b58\u5728\u76ee\u5f55\u6811\u4e2d\uff0c\u4e0d\u53eflist\u7684\u53ef\u4ee5\u54c8\u5e0c\u5230chunkserver\uff0c\u8ba9chunkserver\u53bb\u7ef4\u62a4meta\u4fe1\u606f\u3002", 
            "title": "\u6587\u4ef6\u5206\u5757"
        }, 
        {
            "location": "/cn/design/#meta", 
            "text": "\u6587\u4ef6meta\u4fe1\u606f\u5b58\u50a8\u5728master\u4f1a\u5bfc\u81f4master\u8d1f\u8f7d\u8fc7\u9ad8\uff08\u5185\u5b58\uff0ccpu\uff09\n\u6211\u4eec\u9009\u62e9\u5bf9\u4e0e\u4e0d\u5206\u5757\u7684\u6587\u4ef6\uff0c \u5c06\u6587\u4ef6meta\u5b58\u50a8\u5728chunkserver\uff0c\u5982\u679c\u7528\u6237\u8981list\uff0c\u90a3\u4ec5\u9700\u8981\u8bbf\u95eemaster\uff0c\u4f46\u5982\u679c\u8981\u83b7\u53d6\u6587\u4ef6\u5927\u5c0f\u7b49\u4fe1\u606f\uff0c\u90a3\u5c31\u5fc5\u987b\u5f97\u8bbf\u95ee\u5bf9\u5e94\u7684chunkserver\u4e86\uff0cmaster\u4ec5\u5b58\u50a8namespace\u548c\u6bcf\u4e2a\u6587\u4ef6\u5728\u54ea\u4e9bchunkserver\u4e0a\u3002", 
            "title": "\u6587\u4ef6meta\u4fe1\u606f"
        }, 
        {
            "location": "/cn/design/#_3", 
            "text": "\u6709\u4e24\u4e2a\u9009\u62e9\uff1a \n1. client\u5199\u4e00\u4efd\uff0c\u7136\u540echunkserver\u901a\u8fc7\u590d\u5236\u94fe\u521b\u5efa\u591a\u526f\u672c\uff0c\u4f18\u52bf\u662fclient\u5e26\u5bbd\u5360\u7528\u4f4e\uff1b \n2. client\u4e00\u6b21\u5199\u591a\u4efd\uff0c\u4f18\u52bf\u662f\u53ef\u4ee5\u591a\u4e9b\u4e00\u4efd\uff0c\u5e76\u5728\u5199\u7684\u8fc7\u7a0b\u4e2d\u629b\u5f03\u6162\u8282\u70b9\u3002\n\u8003\u8651\u5c06\u8fd9\u4e2a\u505a\u6210\u4e2a\u9009\u9879\uff0c\u4e24\u79cd\u90fd\u652f\u6301\u3002  \u597d\u5427\uff0c\u6211\u4eec\u5148\u6765\u5f00\u53d1\u4e00\u4e2a\u5355master\uff0c\u4e0d\u652f\u6301\u5206\u5757\uff0c\u4e0d\u652f\u6301\u5c0f\u6587\u4ef6\u7684fs\u5427\u3002", 
            "title": "\u5199\u6570\u636e\u6d41"
        }, 
        {
            "location": "/cn/design/#_4", 
            "text": "", 
            "title": "\u5b9e\u73b0"
        }, 
        {
            "location": "/cn/design/#namespace", 
            "text": "\u5b58\u50a8\u6211\u4eec\u9009\u62e9\u4e86leveldb\uff0c\u53ef\u4ee5\u7b80\u5355\u7684\u5c06\u6574\u4e2a\u76ee\u5f55\u7ed3\u6784\u5e73\u5c55\u5f00\uff0c\u5e76\u63d0\u4f9b\u9ad8\u6548\u7684\u6587\u4ef6\u521b\u5efa\u3001\u5220\u9664\u548clist\u64cd\u4f5c\u3002 \n\u5b9e\u9645\u76ee\u5f55\u7ed3\u6784:  /home/dirx/\n          /filex\n      diry/\n          /filey\n/tmp/\n     filez  \u8fc7\u53bb\u7684\u5b58\u50a8\u683c\u5f0f\u4e3a:  00/\n01/home\n01/tmp\n02/home/dirx\n02/home/diry\n02/tmp/filez\n03/home/dirx/filex\n03/home/diry/filey  \u8fd9\u6837\u505a\u7684\u4e3b\u8981\u76ee\u7684\u662f\u9ad8\u6548\u652f\u6301list\u64cd\u4f5c\u3002  \u73b0\u5728\u7684\u5b58\u50a8\u683c\u5f0f\u4e3a:  1home -  2\n1tmp -  3\n2dirx -  4\n2diry -  5\n3filez -  6\n4filex -  7\n5filey -  8  \u5176\u4e2d\u6240\u6709\u6570\u5b57\u90fd\u662f64\u4f4d\u6574\u6570\uff0c\u76ee\u7684\u662f\u652f\u6301\u9ad8\u6548list\u64cd\u4f5c\u7684\u540c\u65f6\uff0c\u652f\u6301\u9ad8\u6548\u7684rename\u64cd\u4f5c\u3002 \nrename\u64cd\u4f5c\u4e2d\uff0c\u6587\u4ef6\u5939\u540d\u5b57\u6539\u53d8\uff0c\u4f46\u7f16\u53f7\u4e0d\u53d8\u3002", 
            "title": "Namespace"
        }, 
        {
            "location": "/cn/design/#open-for-write", 
            "text": "\u5728namespace\u4e2d\u5199\u5165\uff0c \u521b\u5efa\u5757\uff0c \u5206\u914ddatanode\u3002 \n\u5982\u679c\u5931\u8d25\uff0c\u5728nameserver\u56de\u6eda\u3002 \n\u6570\u636e\u53d1\u5f80datanode\uff0c \u4e2d\u95f4\u7f51\u7edc\u6545\u969c\u53ef\u4ee5\u91cd\u8fde\uff0c\u4f46\u4e00\u65e6close\u540e\u4e0d\u53ef\u8ffd\u52a0\u5199\u5165\u3002 \nnameserver\u5411client\u53d1\u653elease\uff0clease\u5931\u6548\u540e\uff0c\u4e0d\u53ef\u4ee5\u7ee7\u7eed\u5199\u5165\u3002", 
            "title": "Open for write"
        }, 
        {
            "location": "/cn/design/#sdk", 
            "text": "Write \n    \u5982\u679c_chains_head\u4e3a\u7a7a\uff0c\u5219\u540c\u6b65\u8c03\u7528AddBlock \n    \u5411_write_buf\u4e2dappend\u6570\u636e\uff0c\u5982\u679c_write_buf\u6ee1\u4e86\uff0c\u8c03\u7528StartWrite(_write_buf)    StartWrite \n    \u5c06_write_buf\u653e\u5165_write_queue\u4e2d\uff0c\u7136\u540e\u629b\u51faBackgroundWrite\u4e8b\u4ef6\uff0c++_back_writing    BackgroundWrite \n    \u5982\u679c_write_queue\u975e\u7a7a \u4e14 \u6700\u5c0f\u7684sequence\u5c0f\u4e8e\u6ed1\u52a8\u7a97\u53e3\u4e0a\u9650\uff0c\u5f02\u6b65\u8c03\u7528WriteBlock    WriteChunkCallback \n    \u5982\u679cWriteBlock\u5931\u8d25\uff0c++_back_writing\uff0c delay\u4e00\u4e2aDelayWriteChunk \n    \u5982\u679cWriteBlock\u6210\u529f\uff0c\u66f4\u65b0\u6ed1\u52a8\u7a97\u53e3 \n    \u5982\u679c_write_queue\u4e3a\u7a7a\uff0cback_writing\u4e3a0\uff0c\u5219\u5524\u9192sync\uff0c\n    \u8c03\u5ea6\u4e00\u4e2a\u65b0\u7684BackgroundWrite    DelayWriteChunk \n    \u5f02\u6b65\u8c03\u7528WriteBlock\uff0c--_back_writing", 
            "title": "sdk\u7aef\u5199\u5165\u6d41\u7a0b"
        }, 
        {
            "location": "/cn/design/#open-for-read", 
            "text": "\u5728\u4ecenamespace\u4e2d\u83b7\u53d6datanode\u4fe1\u606f\uff0c\u5411\u968f\u673adatanode\u8bfb\u53d6\u6570\u636e\u3002 \n\u8bfb\u53d6\u4e0d\u88ab\u4fdd\u62a4\uff0c\u5982\u679c\u8bfb\u8fc7\u7a0b\u4e2d\u6587\u4ef6\u88ab\u5220\u9664\uff0c\u540e\u7eed\u8bfb\u53d6\u5931\u8d25", 
            "title": "Open for read"
        }, 
        {
            "location": "/cn/dir_lock/", 
            "text": "\u76ee\u5f55\u9501\u80cc\u666f\n\n\nTera\u4e2d\uff0c\nMaster\n\u901a\u8fc7\nNexus\n\u5224\u65ad\nTabletNode\n\u662f\u5426\u4ecd\u5728\u63d0\u4f9b\u670d\u52a1\uff0c\u5f53\nMaster\n\u8ba4\u4e3a\u67d0\u4e2a\nTabletNode\n\u5df2\u65e0\u6cd5\u63d0\u4f9b\u670d\u52a1\u540e\uff0c\u4f1a\u5c06\u5176\u4e0a\u9762\u6240\u6709\nTablet\n\u8fc1\u79fb\u5230\u5176\u5b83\nTabletNode\n\u4e0a\u8fdb\u884cLoad\u3002\u7136\u800c\uff0c\u5728\u53d1\u751f\u7f51\u7edc\u5206\u533a\uff0c\u6216\u8005\u7f51\u7edc\u5ef6\u65f6\u9020\u6210\u7684Tera \nMaster\n\u5904\u7406\u65f6\u5e8f\u9519\u4e71\u65f6\uff0c\u53ef\u80fd\u9020\u6210\u65e7\u7684\nTabletNode\n\u4e0a\u4ecdLoad\u67d0\u4e2a\nTablet\n\u65f6\uff0c\u540c\u65f6\u7ed9\u53e6\u5916\u4e00\u4e2a\u65b0\u7684\nTabletNode\n\u53d1\u9001Load\u67d0\u4e2a\nTablet\n\u7684\u547d\u4ee4\uff0c\u9020\u6210\u540c\u4e00\u4e2a\nTablet\n\u88ab\u591a\u53f0\nTabletNode\n\u540c\u65f6Load\uff0c\u4ece\u800c\u9020\u6210\u6570\u636e\u5199\u5165\u9519\u4e71\u3002\u56e0\u6b64\uff0c\u5fc5\u987b\u4f9d\u8d56Tera\u4f7f\u7528\u7684\u5e95\u5c42\u5206\u5e03\u5f0f\u6587\u4ef6\u7cfb\u7edf\u6765\u5f7b\u5e95\u89e3\u51b3\u591a\u91cdLoad\u95ee\u9898\uff1aTera\u4e2d\u7684\u6bcf\u4e2a\nTablet\n\u7684\u6570\u636e\u90fd\u5b58\u653e\u5728\u4e00\u4e2a\u5355\u72ec\u7684\u76ee\u5f55\u4e0b\uff0c\u5728\u5bf9\nTablet\n\u8fdb\u884cLoad\u65f6\uff0c\u6301\u6709\u5bf9\u5e94\u76ee\u5f55\u7684\u4e00\u4e2a\u6392\u5b83\u9501\uff0c\u4fbf\u53ef\u4ee5\u9632\u6b62\u6709\u5176\u5b83\nTabletNode\n\u540c\u65f6Load\u6b64\nTablet\n\n\n\u6574\u4f53\u8bbe\u8ba1\n\n\n\n\n\u5728\nFileInfo\n\u4e2d\u6dfb\u52a0\nlock_status\n\u4ee5\u53ca\nholder\n\u6807\u8bb0\uff0c\nlock_status\n\u53ef\u80fd\u5904\u4e8e\nlocked\n\u3001\nunlock\n\u3001\ncleaning\n\u4e09\u79cd\u72b6\u6001\uff0c\u5206\u522b\u5bf9\u5e94\u76ee\u5f55\u5df2\u4e0a\u9501\uff0c\u672a\u4e0a\u9501\uff0c\u6b63\u5728\u6e05\u9501\u4e09\u79cd\u72b6\u6001\uff0c\u5f53\u72b6\u6001\u4e3a\nlocked\n\u65f6\uff0c\nholder\n\u4e2d\u8bb0\u5f55\u7684\u4e3a\u6301\u9501\u8005\u7684\u6807\u8bc6(\nip:port:timestamp\n\uff0c\u6b64\u6807\u8bc6\u7531\u5ba2\u6237\u7aef(sdk)\u5728\u52a0\u9501\u65f6\u53d1\u9001\u7ed9\nNameServer\n\uff0c\u5728\u5ba2\u6237\u7aef\u5b58\u6d3b\u671f\u95f4\u4fdd\u6301\u4e0d\u53d8\n\n\n\u5728\u5bf9\u76ee\u5f55\u8fdb\u884c\u52a0\u9501\u65f6\uff0c\u9996\u5148\u68c0\u67e5\u6b64\u76ee\u5f55\u7684\nFileInfo\n\u4e2d\nlock_status\n\u662f\u5426\u4e3a\nunlock\n:\n\n\n\u5982\u679c\u662f\uff0c\u5219\u5c06\u5176\u72b6\u6001\u66f4\u6539\u4e3a\nlocked\n\uff0c\u5e76\u8fde\u540c\u8c03\u7528\u8005\u7684\nip:port\n\u4e00\u540c\u6301\u4e45\u5316\u5230\nnamespace\n\u4e2d\uff0c\u52a0\u9501\u6210\u529f\n\n\n\u5982\u679c\u4e0d\u662f\uff0c\u5219\u76ee\u5f55\u9501\u7684\u72b6\u6001\u4e3a\nlocked\n\u6216\ncleaning\n\uff0c\u52a0\u9501\u5931\u8d25\uff0c\u5c06\u9501\u76ee\u524d\u7684\u72b6\u6001\u8fd4\u56de\u7ed9\u8c03\u7528\u8005\n\n\n\u5728\u5bf9\u76ee\u5f55\u91ca\u653e\u9501\u65f6\uff0c\u9996\u5148\u68c0\u67e5\u6b64\u76ee\u5f55\u7684\nFileInfo\n\u4e2d\nlock_statu\n\u662f\u5426\u4e3a\nlocked\n:\n\n\n\u5982\u679c\u662f\uff0c\u5c06\u5176\u72b6\u6001\u6539\u4e3a\ncleaning\n\u5e76\u6301\u4e45\u5316\u5230\nnamespace\n\u4e2d\uff0c\u7136\u540e\uff0c\u5c06\u6b64\u76ee\u5f55\u4e0b\u6240\u6709\u6b63\u5728\u5199\u7684\u6587\u4ef6\u53ca\u5176\u6240\u5904\u5728\u7684\nChunkServer\n\u5730\u5740\u5747\u626b\u63cf\u51fa\u6765\uff0c\u6784\u9020\u4e00\u4e2a\nCloseFilesCtx\n\u7ed3\u6784\uff0c\u540e\u53f0\u4f9d\u6b21\u5c06\u5176\u5173\u95ed\uff0c\u5f85\u5168\u90e8\u6587\u4ef6\u5747\u6536\u5230\nBlockReceived\n\u4e4b\u540e\uff0c\u53ef\u4ee5\u8ba4\u4e3a\u5168\u90e8\u6587\u4ef6\u5df2\u7ecf\u88ab\u5173\u95ed\uff0c\u6b64\u65f6\u5c06\nnamespace\n\u4e2d\u5bf9\u5e94\u76ee\u5f55\u7684\u9501\u72b6\u6001\u66f4\u6539\u4e3a\nunlocked\n\uff0c\u540e\u7eed\u5141\u8bb8\u5bf9\u6b64\u76ee\u5f55\u8fdb\u884c\u518d\u6b21\u52a0\u9501\n\n\n\u5982\u679c\u4e0d\u662f\uff0c\u5219\u6b64RPC\u4e3a\u4e71\u5e8f\u6216\u8005\u91cd\u8bd5\u7684\u8c03\u7528\uff0c\u53ef\u4ee5\u4e0d\u7528\u5904\u7406\uff0c\u65e5\u5fd7\u4e2d\u5c06\u5176\u8bb0\u5f55\u5373\u53ef\n\n\n\u5728\u521b\u5efa\u65b0\u6587\u4ef6\u6216\u8005\u5220\u9664\u6587\u4ef6\u65f6\uff0c\u5148\u68c0\u67e5\u5176\u7236\u76ee\u5f55\u7684\nFileInfo\n\u4e2d\u9501\u7684\u72b6\u6001:\n\n\n\u5982\u679c\u4e3a\nunlock\n\uff0c\u5219\u8bf4\u660e\u6b64\u76ee\u5f55\u5e76\u6ca1\u6709\u4e0a\u9501\uff0c\u5141\u8bb8\u521b\u5efa\u6216\u5220\u9664\n\n\n\u5982\u679c\u4e3a\nlocked\n\uff0c\u5219\u8bf4\u660e\u6b64\u76ee\u5f55\u4e0a\u6709\u9501\uff0c\u8fd9\u65f6\u68c0\u67e5\u8c03\u7528\u8005\nip:port\n\u662f\u5426\u4e0e\nFileInfo\n\u4e2d\u8bb0\u5f55\u7684\u4e00\u81f4\uff0c\u4ee5\u4fbf\u786e\u8ba4\u6b64\u8c03\u7528\u8005\u662f\u5426\u6709\u6743\u5bf9\u6b64\u76ee\u5f55\u8fdb\u884c\u5199\u64cd\u4f5c\uff0c\u5982\u679c\u4e00\u81f4\uff0c\u5219\u5141\u8bb8\u521b\u5efa\u6216\u5220\u9664\uff0c\u5426\u5219\uff0c\u62d2\u7edd\u521b\u5efa\n\n\n\u5982\u679c\u4e3a\ncleaning\n\uff0c\u8bf4\u660e\u6b64\u65f6\u521a\u521a\u5c06\u9501\u91ca\u653e\uff0c\u6b63\u5728\u5173\u95ed\u6240\u9700\u6587\u4ef6\uff0c\u5bf9\u8c03\u7528\u8005\u8fd4\u56de\u6b63\u5728\u6e05\u9501\u7684\u9519\u8bef\u7801\uff0c\u8c03\u7528\u8005\u53ef\u4ee5\u8fdb\u884c\u91cd\u8bd5\n\n\n\n\n\u63a5\u53e3\n\n\n\n\nmessage\u5b9a\u4e49\n\n\n\n\nStatusCode {\n\n\n   `\u2026...`\n\n   `kLocked`\n\n   `kUnlock`\n\n   `kCleaning`\n\n  `\u2026..`\n\n\n\n}\n  \n\n\nmessage LockDirRequest {\n\n\n   `optional int64 sequence_id = 1;`\n\n   `optional string dir_path = 2;`\n\n\n\n}\n\n\nmessage LockDirResponse {\n\n\n`optional int64 sequence_id = 1;`\n\n  `optional StatusCode status = 2;`\n\n `}`\n\n\n\nmessage UnlockDirRequest {\n\n\n  `optional int64 sequence_id = 1;`\n\n  `optional string dir_path = 2;`\n\n  `optional StatusCode status = 3;`\n\n`}`\n\n\n\nmessage UnlockDirResponse {\n\n\n  `optional int64 sequence_id = 1;`\n\n  `optional StatusCode status = 2;`\n\n `}`\n\n\n\n2.\u5bf9\u6307\u5b9a\u76ee\u5f55\u52a0\u9501:\n\n\nvoid LockDir(::google::protobuf::RpcController* controller,\n\n\nconst LockDirRequest* request,\n\n\nLockDirResponse* response,\n\n\n::google::protobuf::Closure* done);\n\n\nrequest\n\u4e2d\u5b58\u6709\u9700\u8981\u52a0\u9501\u7684\u8def\u5f84\uff0c\nresponse\n\u4e2d\u7684\nstatus\n\u8868\u660e\u52a0\u9501\u662f\u5426\u6210\u529f\n\n\n3.\u91ca\u653e\u6389\u6307\u5b9a\u76ee\u5f55\u7684\u9501\n\n\nvoid UnlockDir(::google::protobuf::RpcController* controller,\n\n\nconst UnlockDirRequest* request,\n\n\nUnlockDirResponse* response,\n\n\n::google::protobuf::Closure* done);\n\n\nrequest\n\u4e2d\u5b58\u6709\u9700\u8981\u89e3\u9501\u7684\u8def\u5f84\uff0c\nresponse\n\u4e2d\u7684\nstatus\n\u8868\u660e\u662f\u5426\u89e3\u9501\u6210\u529f\n\n\n\u5f02\u5e38\u5904\u7406\n\n\n\n\n\u5bf9\u67d0\u4e2a\u76ee\u5f55\u52a0\u5b8c\u9501\u540e\uff0c\nNameServer\n\u5b95\u673a\u6216\u91cd\u542f\n\n\n\n\n\u7531\u4e8e\u9501\u72b6\u6001\u662f\u6301\u4e45\u5316\u5728\nFileInfo\n\u4e2d\uff0cHA\u65b9\u6848\u5df2\u5929\u7136\u7684\u5c06\nnamespace\n\u540c\u6b65\u5230\u591a\u53f0\nNameServer\n\u4e0a\uff0c\u6240\u4ee5\u65e0\u8bba\u662f\u5b95\u673a\u91cd\u673a\u8fd8\u662f\u5207\u4e3b\uff0c\u90fd\u4e0d\u5f71\u54cd\u9501\u4fe1\u606f\u7684\u6b63\u786e\u6027\u3002\u82e5\u91cd\u542f\u65f6\u53d1\u73b0\nFileInfo\n\u4e2d\u9501\u7684\u72b6\u6001\u4e3a\ncleaning\n\uff0c\u5219\u5728\nRebuildBlockMapping\n\u65f6\u5c06\u6b64\u76ee\u5f55\u4e0b\u6240\u6709\u6b63\u5728\u5199\u7684\u6587\u4ef6\u8bb0\u5f55\u4e0b\u6765\uff0c\u91cd\u65b0\u8fdb\u884c\u6e05\u9501\u6d41\u7a0b \n\n\nTODO\n\n\n\n\n\n\n\u6b64\u65b9\u6848\u4e2d\uff0c\u6e05\u9501\u52a8\u4f5c\u4e3aTera\u7684\nMaster\n\u4e3b\u52a8\u53d1\u51fa\uff0c\u672a\u6765\u53ef\u4ee5\u8003\u8651\nTabletNode\n\u4e0e\nNameServer\n\u7ef4\u6301\u5fc3\u8df3\uff0c\u5fc3\u8df3\u8d85\u65f6\u540e\u4e3b\u52a8\u6e05\u9501\u7684\u8bbe\u8ba1\n\n\n\n\n\n\n\u6b64\u65b9\u6848\u4e2d\uff0c\u4e0d\u6d89\u53ca\u9012\u5f52\u52a0\u9501\u95ee\u9898\uff0c\u4f8b\u5982\u5bf9\u76ee\u5f55\nhome/work\n\u8fdb\u884c\u52a0\u9501\u65f6\uff0c\u5e76\u4e0d\u4f1a\u5bf9\n/home\n\u76ee\u5f55\u8fdb\u884c\u52a0\u9501", 
            "title": "dir_lock"
        }, 
        {
            "location": "/cn/dir_lock/#_1", 
            "text": "Tera\u4e2d\uff0c Master \u901a\u8fc7 Nexus \u5224\u65ad TabletNode \u662f\u5426\u4ecd\u5728\u63d0\u4f9b\u670d\u52a1\uff0c\u5f53 Master \u8ba4\u4e3a\u67d0\u4e2a TabletNode \u5df2\u65e0\u6cd5\u63d0\u4f9b\u670d\u52a1\u540e\uff0c\u4f1a\u5c06\u5176\u4e0a\u9762\u6240\u6709 Tablet \u8fc1\u79fb\u5230\u5176\u5b83 TabletNode \u4e0a\u8fdb\u884cLoad\u3002\u7136\u800c\uff0c\u5728\u53d1\u751f\u7f51\u7edc\u5206\u533a\uff0c\u6216\u8005\u7f51\u7edc\u5ef6\u65f6\u9020\u6210\u7684Tera  Master \u5904\u7406\u65f6\u5e8f\u9519\u4e71\u65f6\uff0c\u53ef\u80fd\u9020\u6210\u65e7\u7684 TabletNode \u4e0a\u4ecdLoad\u67d0\u4e2a Tablet \u65f6\uff0c\u540c\u65f6\u7ed9\u53e6\u5916\u4e00\u4e2a\u65b0\u7684 TabletNode \u53d1\u9001Load\u67d0\u4e2a Tablet \u7684\u547d\u4ee4\uff0c\u9020\u6210\u540c\u4e00\u4e2a Tablet \u88ab\u591a\u53f0 TabletNode \u540c\u65f6Load\uff0c\u4ece\u800c\u9020\u6210\u6570\u636e\u5199\u5165\u9519\u4e71\u3002\u56e0\u6b64\uff0c\u5fc5\u987b\u4f9d\u8d56Tera\u4f7f\u7528\u7684\u5e95\u5c42\u5206\u5e03\u5f0f\u6587\u4ef6\u7cfb\u7edf\u6765\u5f7b\u5e95\u89e3\u51b3\u591a\u91cdLoad\u95ee\u9898\uff1aTera\u4e2d\u7684\u6bcf\u4e2a Tablet \u7684\u6570\u636e\u90fd\u5b58\u653e\u5728\u4e00\u4e2a\u5355\u72ec\u7684\u76ee\u5f55\u4e0b\uff0c\u5728\u5bf9 Tablet \u8fdb\u884cLoad\u65f6\uff0c\u6301\u6709\u5bf9\u5e94\u76ee\u5f55\u7684\u4e00\u4e2a\u6392\u5b83\u9501\uff0c\u4fbf\u53ef\u4ee5\u9632\u6b62\u6709\u5176\u5b83 TabletNode \u540c\u65f6Load\u6b64 Tablet", 
            "title": "\u76ee\u5f55\u9501\u80cc\u666f"
        }, 
        {
            "location": "/cn/dir_lock/#_2", 
            "text": "\u5728 FileInfo \u4e2d\u6dfb\u52a0 lock_status \u4ee5\u53ca holder \u6807\u8bb0\uff0c lock_status \u53ef\u80fd\u5904\u4e8e locked \u3001 unlock \u3001 cleaning \u4e09\u79cd\u72b6\u6001\uff0c\u5206\u522b\u5bf9\u5e94\u76ee\u5f55\u5df2\u4e0a\u9501\uff0c\u672a\u4e0a\u9501\uff0c\u6b63\u5728\u6e05\u9501\u4e09\u79cd\u72b6\u6001\uff0c\u5f53\u72b6\u6001\u4e3a locked \u65f6\uff0c holder \u4e2d\u8bb0\u5f55\u7684\u4e3a\u6301\u9501\u8005\u7684\u6807\u8bc6( ip:port:timestamp \uff0c\u6b64\u6807\u8bc6\u7531\u5ba2\u6237\u7aef(sdk)\u5728\u52a0\u9501\u65f6\u53d1\u9001\u7ed9 NameServer \uff0c\u5728\u5ba2\u6237\u7aef\u5b58\u6d3b\u671f\u95f4\u4fdd\u6301\u4e0d\u53d8  \u5728\u5bf9\u76ee\u5f55\u8fdb\u884c\u52a0\u9501\u65f6\uff0c\u9996\u5148\u68c0\u67e5\u6b64\u76ee\u5f55\u7684 FileInfo \u4e2d lock_status \u662f\u5426\u4e3a unlock :  \u5982\u679c\u662f\uff0c\u5219\u5c06\u5176\u72b6\u6001\u66f4\u6539\u4e3a locked \uff0c\u5e76\u8fde\u540c\u8c03\u7528\u8005\u7684 ip:port \u4e00\u540c\u6301\u4e45\u5316\u5230 namespace \u4e2d\uff0c\u52a0\u9501\u6210\u529f  \u5982\u679c\u4e0d\u662f\uff0c\u5219\u76ee\u5f55\u9501\u7684\u72b6\u6001\u4e3a locked \u6216 cleaning \uff0c\u52a0\u9501\u5931\u8d25\uff0c\u5c06\u9501\u76ee\u524d\u7684\u72b6\u6001\u8fd4\u56de\u7ed9\u8c03\u7528\u8005  \u5728\u5bf9\u76ee\u5f55\u91ca\u653e\u9501\u65f6\uff0c\u9996\u5148\u68c0\u67e5\u6b64\u76ee\u5f55\u7684 FileInfo \u4e2d lock_statu \u662f\u5426\u4e3a locked :  \u5982\u679c\u662f\uff0c\u5c06\u5176\u72b6\u6001\u6539\u4e3a cleaning \u5e76\u6301\u4e45\u5316\u5230 namespace \u4e2d\uff0c\u7136\u540e\uff0c\u5c06\u6b64\u76ee\u5f55\u4e0b\u6240\u6709\u6b63\u5728\u5199\u7684\u6587\u4ef6\u53ca\u5176\u6240\u5904\u5728\u7684 ChunkServer \u5730\u5740\u5747\u626b\u63cf\u51fa\u6765\uff0c\u6784\u9020\u4e00\u4e2a CloseFilesCtx \u7ed3\u6784\uff0c\u540e\u53f0\u4f9d\u6b21\u5c06\u5176\u5173\u95ed\uff0c\u5f85\u5168\u90e8\u6587\u4ef6\u5747\u6536\u5230 BlockReceived \u4e4b\u540e\uff0c\u53ef\u4ee5\u8ba4\u4e3a\u5168\u90e8\u6587\u4ef6\u5df2\u7ecf\u88ab\u5173\u95ed\uff0c\u6b64\u65f6\u5c06 namespace \u4e2d\u5bf9\u5e94\u76ee\u5f55\u7684\u9501\u72b6\u6001\u66f4\u6539\u4e3a unlocked \uff0c\u540e\u7eed\u5141\u8bb8\u5bf9\u6b64\u76ee\u5f55\u8fdb\u884c\u518d\u6b21\u52a0\u9501  \u5982\u679c\u4e0d\u662f\uff0c\u5219\u6b64RPC\u4e3a\u4e71\u5e8f\u6216\u8005\u91cd\u8bd5\u7684\u8c03\u7528\uff0c\u53ef\u4ee5\u4e0d\u7528\u5904\u7406\uff0c\u65e5\u5fd7\u4e2d\u5c06\u5176\u8bb0\u5f55\u5373\u53ef  \u5728\u521b\u5efa\u65b0\u6587\u4ef6\u6216\u8005\u5220\u9664\u6587\u4ef6\u65f6\uff0c\u5148\u68c0\u67e5\u5176\u7236\u76ee\u5f55\u7684 FileInfo \u4e2d\u9501\u7684\u72b6\u6001:  \u5982\u679c\u4e3a unlock \uff0c\u5219\u8bf4\u660e\u6b64\u76ee\u5f55\u5e76\u6ca1\u6709\u4e0a\u9501\uff0c\u5141\u8bb8\u521b\u5efa\u6216\u5220\u9664  \u5982\u679c\u4e3a locked \uff0c\u5219\u8bf4\u660e\u6b64\u76ee\u5f55\u4e0a\u6709\u9501\uff0c\u8fd9\u65f6\u68c0\u67e5\u8c03\u7528\u8005 ip:port \u662f\u5426\u4e0e FileInfo \u4e2d\u8bb0\u5f55\u7684\u4e00\u81f4\uff0c\u4ee5\u4fbf\u786e\u8ba4\u6b64\u8c03\u7528\u8005\u662f\u5426\u6709\u6743\u5bf9\u6b64\u76ee\u5f55\u8fdb\u884c\u5199\u64cd\u4f5c\uff0c\u5982\u679c\u4e00\u81f4\uff0c\u5219\u5141\u8bb8\u521b\u5efa\u6216\u5220\u9664\uff0c\u5426\u5219\uff0c\u62d2\u7edd\u521b\u5efa  \u5982\u679c\u4e3a cleaning \uff0c\u8bf4\u660e\u6b64\u65f6\u521a\u521a\u5c06\u9501\u91ca\u653e\uff0c\u6b63\u5728\u5173\u95ed\u6240\u9700\u6587\u4ef6\uff0c\u5bf9\u8c03\u7528\u8005\u8fd4\u56de\u6b63\u5728\u6e05\u9501\u7684\u9519\u8bef\u7801\uff0c\u8c03\u7528\u8005\u53ef\u4ee5\u8fdb\u884c\u91cd\u8bd5", 
            "title": "\u6574\u4f53\u8bbe\u8ba1"
        }, 
        {
            "location": "/cn/dir_lock/#_3", 
            "text": "message\u5b9a\u4e49   StatusCode {     `\u2026...`\n\n   `kLocked`\n\n   `kUnlock`\n\n   `kCleaning`\n\n  `\u2026..`  }     message LockDirRequest {     `optional int64 sequence_id = 1;`\n\n   `optional string dir_path = 2;`  }  message LockDirResponse {  `optional int64 sequence_id = 1;`\n\n  `optional StatusCode status = 2;`\n\n `}`  message UnlockDirRequest {    `optional int64 sequence_id = 1;`\n\n  `optional string dir_path = 2;`\n\n  `optional StatusCode status = 3;`\n\n`}`  message UnlockDirResponse {    `optional int64 sequence_id = 1;`\n\n  `optional StatusCode status = 2;`\n\n `}`  2.\u5bf9\u6307\u5b9a\u76ee\u5f55\u52a0\u9501:  void LockDir(::google::protobuf::RpcController* controller,  const LockDirRequest* request,  LockDirResponse* response,  ::google::protobuf::Closure* done);  request \u4e2d\u5b58\u6709\u9700\u8981\u52a0\u9501\u7684\u8def\u5f84\uff0c response \u4e2d\u7684 status \u8868\u660e\u52a0\u9501\u662f\u5426\u6210\u529f  3.\u91ca\u653e\u6389\u6307\u5b9a\u76ee\u5f55\u7684\u9501  void UnlockDir(::google::protobuf::RpcController* controller,  const UnlockDirRequest* request,  UnlockDirResponse* response,  ::google::protobuf::Closure* done);  request \u4e2d\u5b58\u6709\u9700\u8981\u89e3\u9501\u7684\u8def\u5f84\uff0c response \u4e2d\u7684 status \u8868\u660e\u662f\u5426\u89e3\u9501\u6210\u529f", 
            "title": "\u63a5\u53e3"
        }, 
        {
            "location": "/cn/dir_lock/#_4", 
            "text": "\u5bf9\u67d0\u4e2a\u76ee\u5f55\u52a0\u5b8c\u9501\u540e\uff0c NameServer \u5b95\u673a\u6216\u91cd\u542f   \u7531\u4e8e\u9501\u72b6\u6001\u662f\u6301\u4e45\u5316\u5728 FileInfo \u4e2d\uff0cHA\u65b9\u6848\u5df2\u5929\u7136\u7684\u5c06 namespace \u540c\u6b65\u5230\u591a\u53f0 NameServer \u4e0a\uff0c\u6240\u4ee5\u65e0\u8bba\u662f\u5b95\u673a\u91cd\u673a\u8fd8\u662f\u5207\u4e3b\uff0c\u90fd\u4e0d\u5f71\u54cd\u9501\u4fe1\u606f\u7684\u6b63\u786e\u6027\u3002\u82e5\u91cd\u542f\u65f6\u53d1\u73b0 FileInfo \u4e2d\u9501\u7684\u72b6\u6001\u4e3a cleaning \uff0c\u5219\u5728 RebuildBlockMapping \u65f6\u5c06\u6b64\u76ee\u5f55\u4e0b\u6240\u6709\u6b63\u5728\u5199\u7684\u6587\u4ef6\u8bb0\u5f55\u4e0b\u6765\uff0c\u91cd\u65b0\u8fdb\u884c\u6e05\u9501\u6d41\u7a0b", 
            "title": "\u5f02\u5e38\u5904\u7406"
        }, 
        {
            "location": "/cn/dir_lock/#todo", 
            "text": "\u6b64\u65b9\u6848\u4e2d\uff0c\u6e05\u9501\u52a8\u4f5c\u4e3aTera\u7684 Master \u4e3b\u52a8\u53d1\u51fa\uff0c\u672a\u6765\u53ef\u4ee5\u8003\u8651 TabletNode \u4e0e NameServer \u7ef4\u6301\u5fc3\u8df3\uff0c\u5fc3\u8df3\u8d85\u65f6\u540e\u4e3b\u52a8\u6e05\u9501\u7684\u8bbe\u8ba1    \u6b64\u65b9\u6848\u4e2d\uff0c\u4e0d\u6d89\u53ca\u9012\u5f52\u52a0\u9501\u95ee\u9898\uff0c\u4f8b\u5982\u5bf9\u76ee\u5f55 home/work \u8fdb\u884c\u52a0\u9501\u65f6\uff0c\u5e76\u4e0d\u4f1a\u5bf9 /home \u76ee\u5f55\u8fdb\u884c\u52a0\u9501", 
            "title": "TODO"
        }, 
        {
            "location": "/cn/DiskManager/", 
            "text": "DiskManager\n\n\n\u540d\u8bcd\u4ecb\u7ecd\n\n\n\n\nDataBlock\n    \u8d1f\u8d23\u6587\u4ef6\u8bfb\u5199\uff0c\u4e00\u4e2a\u6587\u4ef6\u5bf9\u5e94\u4e00\u4e2aDataBlock\u5bf9\u8c61\u3002\n\n\nDisk\n    \u8d1f\u8d23\u78c1\u76d8\u4e0a\u6587\u4ef6(DataBlock\u5bf9\u8c61)\u7684\u7ba1\u7406\uff0c\u6587\u4ef6\u5143\u4fe1\u606f\u7ba1\u7406\uff0c\u78c1\u76d8\u8d1f\u8f7d\u7edf\u8ba1\u3002\u4e00\u4e2a\u7269\u7406\u78c1\u76d8\u5bf9\u5e94\u4e00\u4e2aDisk\u5bf9\u8c61\u3002\n\n\nDiskManager\n    \u8d1f\u8d23\u78c1\u76d8(Disk\u5bf9\u8c61)\u7ba1\u7406\uff0c\u78c1\u76d8\u95f4\u8d1f\u8f7d\u5747\u8861\u53ca\u8c03\u5ea6\u3002\u4e00\u4e2aChunkserver\u6709\u4e00\u4e2aDiskManager\u5bf9\u8c61\u3002\n\n\n\n\nDataBlock\n\n\n\n\n\u5199\nDataBlock\u4e2d\u7ef4\u62a4\u4e00\u4e2a\u6ed1\u52a8\u7a97\u53e3\u3002\u5199\u64cd\u4f5c\u5c06\ndata\n\u548c\u5bf9\u5e94\u7684\nsequence\n\u63d0\u4ea4\u6389\u6ed1\u52a8\u7a97\u53e3\uff0c\u7a97\u53e3\u6839\u636e\nsequence\n\u987a\u5e8f\u5730\u5c06\ndata\n\u4e2d\u7684\u6570\u636e\u5207\u5206\u6210\u5c0f\u6570\u636e\u5305\uff0c\u987a\u5e8f\u653e\u5165\u4efb\u52a1\u961f\u5217\u3002\u540e\u53f0\u7ebf\u7a0b\u5c06\u4efb\u52a1\u961f\u5217\u91cc\u7684\u6570\u636e\u5305\u4f9d\u6b21\u5199\u5230\u78c1\u76d8\u4e0a\u3002\n\n\n\u8bfb\n\u8bfb\u64cd\u4f5c\u4f1a\u5148\u4ece\u6587\u4ef6\u4e2d\u8bfb\u53d6\u6570\u636e\u3002\u5982\u679c\u8bfb\u8bf7\u6c42\u7684offset\u8d85\u8fc7\u4e86\u6587\u4ef6\u7684\u5927\u5c0f\uff0c\u4f1a\u8bd5\u56fe\u4ece\u4efb\u52a1\u961f\u5217\u4e2d\u8bfb\u53d6\u6570\u636e\uff0c\u4ee5\u6b64\u4fdd\u8bc1\u521a\u5199\u5165\u5c1a\u672a\u843d\u76d8\u7684\u6570\u636e\u4e5f\u53ef\u4ee5\u88ab\u8bfb\u5230\u3002\n\n\n\u5220\u9664\nDataBlock\u7ef4\u62a4\u4e00\u4e2a\u5f15\u7528\u8ba1\u6570\u3002\u5220\u9664\u64cd\u4f5c\u4f1a\u5c06\ndelete\n\u6807\u5fd7\u7f6e\u4f4d\u3002\u8bfb\u5199\u64cd\u4f5c\u68c0\u67e5\u5230\u6807\u5fd7\u7f6e\u4f4d\u4f1a\u9000\u51fa\u5e76\u91ca\u653e\u5f15\u7528\u8ba1\u6570\u3002\u5f15\u7528\u8ba1\u6570\u5f52\u96f6\u65f6\u8c03\u7528\u6790\u6784\u51fd\u6570\u3002\n\n\n\n\nDisk\n\n\nDisk\u7ba1\u7406\u78c1\u76d8\u4e0a\u6587\u4ef6\u7684\u5143\u4fe1\u606f\uff0c\u5305\u62ec\u6587\u4ef6\u5927\u5c0f\uff0c\u6743\u9650\uff0c\u7248\u672c\u7b49\u3002\u9664\u6b64\u4e4b\u5916Disk\u8fd8\u8d1f\u8d23\u8d1f\u8f7d\u7684\u7edf\u8ba1\uff0c\u5982\u6587\u4ef6\u6570\u91cf\uff0c\u6240\u6709DataBlock\u4efb\u52a1\u961f\u5217\u5927\u5c0f(\u5185\u5b58\u5360\u7528\u91cf)\uff0c\u6253\u5f00\u6587\u4ef6\u6570\uff0c\u6587\u4ef6\u8bbf\u95ee\u9891\u5ea6\u7b49\u3002\n\n\nDiskManager\n\n\n\u5f53\u6709\u65b0\u7684\u6587\u4ef6\u521b\u5efa\u65f6\uff0cDiskManager\u4f1a\u6c47\u603b\u6240\u6709Disk\u7684\u8d1f\u8f7d\u4fe1\u606f\uff0c\u6311\u9009\u51fa\u8d1f\u8f7d\u6700\u8f7b\u7684Disk\u3002\u5f53\u67d0\u4e00\u5757\u78c1\u76d8\u4e0b\u7ebf\u65f6\uff0cDiskManager\u4f1a\u5c06\u8be5\u78c1\u76d8\u5bf9\u5e94\u7684\u5185\u5b58\u4fe1\u606f\u5220\u9664\u5e76\u6790\u6784\u5bf9\u5e94\u7684Disk\u7ed3\u6784\u3002\u9664\u6b64\u4e4b\u5916\uff0cDiskManager\u8fd8\u8d1f\u8d23\u4e00\u4e9b\u7b56\u7565\u8c03\u5ea6\uff0c\u4f8b\u5982\u5f53\u67d0\u4e00\u6587\u4ef6\u8bbf\u95ee\u9891\u5ea6\u5f88\u9ad8\u7684\u65f6\u5019\uff0cDiskManager\u4f1a\u5c06\u8be5\u6587\u4ef6\u7f13\u5b58\u5728SSD\u4e2d\u3002", 
            "title": "DiskManager"
        }, 
        {
            "location": "/cn/DiskManager/#diskmanager", 
            "text": "", 
            "title": "DiskManager"
        }, 
        {
            "location": "/cn/DiskManager/#_1", 
            "text": "DataBlock\n    \u8d1f\u8d23\u6587\u4ef6\u8bfb\u5199\uff0c\u4e00\u4e2a\u6587\u4ef6\u5bf9\u5e94\u4e00\u4e2aDataBlock\u5bf9\u8c61\u3002  Disk\n    \u8d1f\u8d23\u78c1\u76d8\u4e0a\u6587\u4ef6(DataBlock\u5bf9\u8c61)\u7684\u7ba1\u7406\uff0c\u6587\u4ef6\u5143\u4fe1\u606f\u7ba1\u7406\uff0c\u78c1\u76d8\u8d1f\u8f7d\u7edf\u8ba1\u3002\u4e00\u4e2a\u7269\u7406\u78c1\u76d8\u5bf9\u5e94\u4e00\u4e2aDisk\u5bf9\u8c61\u3002  DiskManager\n    \u8d1f\u8d23\u78c1\u76d8(Disk\u5bf9\u8c61)\u7ba1\u7406\uff0c\u78c1\u76d8\u95f4\u8d1f\u8f7d\u5747\u8861\u53ca\u8c03\u5ea6\u3002\u4e00\u4e2aChunkserver\u6709\u4e00\u4e2aDiskManager\u5bf9\u8c61\u3002", 
            "title": "\u540d\u8bcd\u4ecb\u7ecd"
        }, 
        {
            "location": "/cn/DiskManager/#datablock", 
            "text": "\u5199\nDataBlock\u4e2d\u7ef4\u62a4\u4e00\u4e2a\u6ed1\u52a8\u7a97\u53e3\u3002\u5199\u64cd\u4f5c\u5c06 data \u548c\u5bf9\u5e94\u7684 sequence \u63d0\u4ea4\u6389\u6ed1\u52a8\u7a97\u53e3\uff0c\u7a97\u53e3\u6839\u636e sequence \u987a\u5e8f\u5730\u5c06 data \u4e2d\u7684\u6570\u636e\u5207\u5206\u6210\u5c0f\u6570\u636e\u5305\uff0c\u987a\u5e8f\u653e\u5165\u4efb\u52a1\u961f\u5217\u3002\u540e\u53f0\u7ebf\u7a0b\u5c06\u4efb\u52a1\u961f\u5217\u91cc\u7684\u6570\u636e\u5305\u4f9d\u6b21\u5199\u5230\u78c1\u76d8\u4e0a\u3002  \u8bfb\n\u8bfb\u64cd\u4f5c\u4f1a\u5148\u4ece\u6587\u4ef6\u4e2d\u8bfb\u53d6\u6570\u636e\u3002\u5982\u679c\u8bfb\u8bf7\u6c42\u7684offset\u8d85\u8fc7\u4e86\u6587\u4ef6\u7684\u5927\u5c0f\uff0c\u4f1a\u8bd5\u56fe\u4ece\u4efb\u52a1\u961f\u5217\u4e2d\u8bfb\u53d6\u6570\u636e\uff0c\u4ee5\u6b64\u4fdd\u8bc1\u521a\u5199\u5165\u5c1a\u672a\u843d\u76d8\u7684\u6570\u636e\u4e5f\u53ef\u4ee5\u88ab\u8bfb\u5230\u3002  \u5220\u9664\nDataBlock\u7ef4\u62a4\u4e00\u4e2a\u5f15\u7528\u8ba1\u6570\u3002\u5220\u9664\u64cd\u4f5c\u4f1a\u5c06 delete \u6807\u5fd7\u7f6e\u4f4d\u3002\u8bfb\u5199\u64cd\u4f5c\u68c0\u67e5\u5230\u6807\u5fd7\u7f6e\u4f4d\u4f1a\u9000\u51fa\u5e76\u91ca\u653e\u5f15\u7528\u8ba1\u6570\u3002\u5f15\u7528\u8ba1\u6570\u5f52\u96f6\u65f6\u8c03\u7528\u6790\u6784\u51fd\u6570\u3002", 
            "title": "DataBlock"
        }, 
        {
            "location": "/cn/DiskManager/#disk", 
            "text": "Disk\u7ba1\u7406\u78c1\u76d8\u4e0a\u6587\u4ef6\u7684\u5143\u4fe1\u606f\uff0c\u5305\u62ec\u6587\u4ef6\u5927\u5c0f\uff0c\u6743\u9650\uff0c\u7248\u672c\u7b49\u3002\u9664\u6b64\u4e4b\u5916Disk\u8fd8\u8d1f\u8d23\u8d1f\u8f7d\u7684\u7edf\u8ba1\uff0c\u5982\u6587\u4ef6\u6570\u91cf\uff0c\u6240\u6709DataBlock\u4efb\u52a1\u961f\u5217\u5927\u5c0f(\u5185\u5b58\u5360\u7528\u91cf)\uff0c\u6253\u5f00\u6587\u4ef6\u6570\uff0c\u6587\u4ef6\u8bbf\u95ee\u9891\u5ea6\u7b49\u3002", 
            "title": "Disk"
        }, 
        {
            "location": "/cn/DiskManager/#diskmanager_1", 
            "text": "\u5f53\u6709\u65b0\u7684\u6587\u4ef6\u521b\u5efa\u65f6\uff0cDiskManager\u4f1a\u6c47\u603b\u6240\u6709Disk\u7684\u8d1f\u8f7d\u4fe1\u606f\uff0c\u6311\u9009\u51fa\u8d1f\u8f7d\u6700\u8f7b\u7684Disk\u3002\u5f53\u67d0\u4e00\u5757\u78c1\u76d8\u4e0b\u7ebf\u65f6\uff0cDiskManager\u4f1a\u5c06\u8be5\u78c1\u76d8\u5bf9\u5e94\u7684\u5185\u5b58\u4fe1\u606f\u5220\u9664\u5e76\u6790\u6784\u5bf9\u5e94\u7684Disk\u7ed3\u6784\u3002\u9664\u6b64\u4e4b\u5916\uff0cDiskManager\u8fd8\u8d1f\u8d23\u4e00\u4e9b\u7b56\u7565\u8c03\u5ea6\uff0c\u4f8b\u5982\u5f53\u67d0\u4e00\u6587\u4ef6\u8bbf\u95ee\u9891\u5ea6\u5f88\u9ad8\u7684\u65f6\u5019\uff0cDiskManager\u4f1a\u5c06\u8be5\u6587\u4ef6\u7f13\u5b58\u5728SSD\u4e2d\u3002", 
            "title": "DiskManager"
        }, 
        {
            "location": "/cn/easy_fix/", 
            "text": "Easy Fix\n\n\n\u8fd9\u91cc\u8bb0\u5f55\u4e00\u4e9b\u5f85\u4fee\u590d\uff0c\u540c\u65f6\u521d\u6b65\u5224\u65ad\u6bd4\u8f83\u5bb9\u6613\u4fee\u590d\u7684\u95ee\u9898\uff0c\u672a\u9009\u5b9a\u7684\u662f\u8fd8\u6ca1\u6709\u4eba\u53bb\u505a\u7684\u3002\n\n\n\u5982\u679c\u4f60\u53d1\u73b0\u67d0\u4e00\u9879\u5b9e\u9645\u5df2\u7ecf\u88ab\u5b8c\u6210\u4e86,\u4f46\u8fd9\u91cc\u672a\u9009\u5b9a,\u90a3\u4e48\u4f60\u53ef\u4ee5\u76f4\u63a5\u63d0\u4ea4\u4e00\u4e2apr\u9009\u5b9a\u5b83\u3002\n\n\n\u6587\u6863\u7c7b\n\n\n\n\n[ ] \u9996\u5148\u5c31\u662f\u672c\u6587\u81ea\u5df1\u7684\u9519\u522b\u5b57,\u9700\u8981review\n\n\n\n\n\u4ee3\u7801\u7c7b\n\n\n\n\n[ ] \nfuse\u4ee3\u7801\n review,\u627e\u5230\u5176\u4e2d\u62fc\u5199\u6216\u660e\u663e\u7684\u9519\u8bef\n\n\n\n\n\u73af\u5883\u7c7b\n\n\n\n\n[ ] \u975ebash\u6267\u884csmall_test.sh\u65f6\u51fa\u9519, 98: small_test.sh: Syntax error: Bad for loop variable\n\n\n[ ] \u5408\u5e76sandbox\u4e0b\u7684deploy.sh\u548cstart_bfs.sh,\u6216\u8005\u52a0\u4e00\u4e2astop_bfs.sh\n\n\n[ ] Mac\u4e0b\u7f16\u8bd1\u901a\u8fc7\n\n\n[ ] Mac\u4e0b\u8fd0\u884c\n\n\n[ ] Ubuntu\u4e0b\u7f16\u8bd1\u901a\u8fc7\n\n\n[ ] Ubuntu\u4e0b\u8fd0\u884c\n\n\n[ ] Windows\u4e0bCygwin\u7f16\u8bd1\u901a\u8fc7", 
            "title": "easy_fix"
        }, 
        {
            "location": "/cn/easy_fix/#easy-fix", 
            "text": "\u8fd9\u91cc\u8bb0\u5f55\u4e00\u4e9b\u5f85\u4fee\u590d\uff0c\u540c\u65f6\u521d\u6b65\u5224\u65ad\u6bd4\u8f83\u5bb9\u6613\u4fee\u590d\u7684\u95ee\u9898\uff0c\u672a\u9009\u5b9a\u7684\u662f\u8fd8\u6ca1\u6709\u4eba\u53bb\u505a\u7684\u3002  \u5982\u679c\u4f60\u53d1\u73b0\u67d0\u4e00\u9879\u5b9e\u9645\u5df2\u7ecf\u88ab\u5b8c\u6210\u4e86,\u4f46\u8fd9\u91cc\u672a\u9009\u5b9a,\u90a3\u4e48\u4f60\u53ef\u4ee5\u76f4\u63a5\u63d0\u4ea4\u4e00\u4e2apr\u9009\u5b9a\u5b83\u3002", 
            "title": "Easy Fix"
        }, 
        {
            "location": "/cn/easy_fix/#_1", 
            "text": "[ ] \u9996\u5148\u5c31\u662f\u672c\u6587\u81ea\u5df1\u7684\u9519\u522b\u5b57,\u9700\u8981review", 
            "title": "\u6587\u6863\u7c7b"
        }, 
        {
            "location": "/cn/easy_fix/#_2", 
            "text": "[ ]  fuse\u4ee3\u7801  review,\u627e\u5230\u5176\u4e2d\u62fc\u5199\u6216\u660e\u663e\u7684\u9519\u8bef", 
            "title": "\u4ee3\u7801\u7c7b"
        }, 
        {
            "location": "/cn/easy_fix/#_3", 
            "text": "[ ] \u975ebash\u6267\u884csmall_test.sh\u65f6\u51fa\u9519, 98: small_test.sh: Syntax error: Bad for loop variable  [ ] \u5408\u5e76sandbox\u4e0b\u7684deploy.sh\u548cstart_bfs.sh,\u6216\u8005\u52a0\u4e00\u4e2astop_bfs.sh  [ ] Mac\u4e0b\u7f16\u8bd1\u901a\u8fc7  [ ] Mac\u4e0b\u8fd0\u884c  [ ] Ubuntu\u4e0b\u7f16\u8bd1\u901a\u8fc7  [ ] Ubuntu\u4e0b\u8fd0\u884c  [ ] Windows\u4e0bCygwin\u7f16\u8bd1\u901a\u8fc7", 
            "title": "\u73af\u5883\u7c7b"
        }, 
        {
            "location": "/cn/file_lock/", 
            "text": "\u6587\u4ef6\u9501\u652f\u6301\u65b9\u6848\n\n\n\u80cc\u666f\n\n\n\u4e3a\u4fdd\u8bc1\u5bf9\u540c\u4e00\u6587\u4ef6\u5143\u6570\u636e\u64cd\u4f5c\u7684\u6b63\u786e\u6027\uff0c\u9700\u8981\u5c06\u5bf9\u5143\u6570\u636e\u7684\u64cd\u4f5c\u4e32\u884c\u5316\uff0c\u6240\u4ee5\u9700\u8981\u6587\u4ef6\u9501\u7684\u652f\u6301\n\n\n\u65b9\u6848\n\n\n\u5728\nNameServer\n\u4e2d\uff0c\u8bbe\u7f6e\u4e00\u4e2a\nFileLockManager\n\uff0c\u7528\u6765\u8d1f\u8d23\u4fdd\u8bc1\u5355\u4e2a\u6587\u4ef6\u5143\u6570\u636e\u64cd\u4f5c\u7684\u539f\u5b50\u6027\uff0c\nFileLockManager\n\u4e3a\u6bcf\u4e2a\u6b63\u5728\u8fdb\u884c\u5143\u4fe1\u606f\u4fee\u6539\u7684\u6587\u4ef6\u6216\u76ee\u5f55\u7ef4\u62a4\u4e00\u4e2a\u5185\u5b58\u7ed3\u6784\nLockEntry\n\uff0c\u8be5\u7ed3\u6784\u4e2d\u5305\u542b\u4e00\u4e2a\u5f15\u7528\u8ba1\u6570\nref_\n\u548c\u4e00\u4e2a\u8bfb\u5199\u9501\nrw_lock_\n\n\n\n\n\n\n\u52a0\u9501\u7684\u6574\u4f53\u8fc7\u7a0b\u4e3a\uff1a\u4e3a\u6700\u540e\u4e00\u7ea7\u6587\u4ef6\u52a0\u5199\u9501\uff0c\u524d\u9762\u6240\u6709\u76ee\u5f55\u52a0\u8bfb\u9501\u3002\u52a0\u9501\u65f6\uff0c\u4ece\u6839\u76ee\u5f55\u5f00\u59cb\uff0c\u4e0d\u65ad\u5c1d\u8bd5\u5bf9\u4e0b\u7ea7\u76ee\u5f55\u8fdb\u884c\u52a0\u9501\u3002\u540c\u65f6\uff0c\u52a0\u8bfb\u5199\u9501\u65f6\uff0c\u5199\u9501\u4f18\u5148\uff0c\u53ef\u4ee5\u9632\u6b62\u5199\u76ee\u5f55\u64cd\u4f5c\u7684\u9965\u997f\u73b0\u8c61\n\n\n\n\n\n\n\u5728\u5bf9\u67d0\u4e00\u7ea7\u76ee\u5f55\u6216\u6587\u4ef6\u8fdb\u884c\u52a0\u9501\u65f6\uff0c\u9996\u5148\u5728\nFileLockManager\n\u67e5\u627e\u5176\u5bf9\u5e94\u7684\nLockEntry\n\uff0c\n\n\n\n\n\u5982\u679c\u6ca1\u6709\u627e\u5230\uff0c\u5219\u8bf4\u660e\u5e76\u6ca1\u6709\u5176\u5b83\u7ebf\u7a0b\u5bf9\u8be5\u6761\u94fe\u8def\u8fdb\u884c\u64cd\u4f5c\uff0c\u5219\u6784\u9020\u4e00\u4e2a\u65b0\u7684\nLockEntry\n\uff0c\u5c06\u5176\u5f15\u7528\u8ba1\u6570\u52a01\uff0c\u5e76\u5bf9\u8be5\nLockEntry\n\u4e2d\u7684\u8bfb\u5199\u9501\u8fdb\u884c\u52a0\u9501\n\n\n\n\n\u5982\u679c\u627e\u5230\uff0c\u5219\u8bf4\u660e\u6709\u5176\u5b83\u7ebf\u7a0b\u6b63\u5728\u5bf9\u8be5\u6761\u94fe\u8def\u8fdb\u884c\u64cd\u4f5c\uff0c\u5219\u9996\u5148\u5c06\u5176\u5f15\u7528\u8ba1\u6570\u52a01\u5c06\u5176\u5bf9\u5e94\u7684\nLockEntry\n\u5f15\u7528\u8ba1\u6570\u52a01\uff0c\u7136\u540e\u518d\u53bb\u5c1d\u8bd5\u52a0\u8bfb\u9501\u6216\u5199\u9501\uff0c\u5982\u679c\u52a0\u9501\u4e0d\u6210\u529f\uff0c\u5219\u4f1a\u88ab\u963b\u585e\u76f4\u5230\u52a0\u9501\u6210\u529f\n\n\n\n\n\n\n\u5728\u5bf9\u67d0\u4e00\u7ea7\u76ee\u5f55\u6216\u6587\u4ef6\u64cd\u4f5c\u5b8c\u6210\u540e\uff0c\u5bf9\u9501\u8fdb\u884c\u91ca\u653e\u65f6\uff0c\u9700\u8981\u6309\u7167\u52a0\u9501\u7684\u76f8\u53cd\u987a\u5e8f\u8fdb\u884c\u91ca\u653e\u3002\u91ca\u653e\u65f6\uff0c\u5148\u91ca\u653e\u8bfb\u5199\u9501\uff0c\u7136\u540e\u5c06\nLockEntry\n\u7684\u5f15\u7528\u8ba1\u6570\u51cf1\uff0c\u5982\u679c\u5f15\u7528\u8ba1\u6570\u51cf\u81f30\uff0c\u5219\u89e6\u53d1\nLockEntry\n\u7684\u6790\u6784\n\n\n\n\n\n\nrename\u65f6\u9884\u9632\u6b7b\u9501\n\n\n\u7531\u4e8e\u5728rename\u65f6\u6d89\u53ca\u5230\u4e24\u4e2a\u4e0d\u540c\u7684\u8def\u5f84\uff0c\u4e3a\u9632\u6b62\u6b7b\u9501\uff0crename\u64cd\u4f5c\u65f6\uff0c\u90fd\u9075\u5faa\u6309\u7167\u8def\u5f84\u7684\u5b57\u5178\u5e8f\u8fdb\u884c\u52a0\u9501\n\n\n\u53ef\u80fd\u9700\u8981\u7684\u4f18\u5316\n\n\n\n\n\u8003\u8651\u5230\u6bcf\u4e2a\u6587\u4ef6\u7684\u9501\u76f8\u5bf9\u6bd4\u8f83\u72ec\u7acb\uff0c\u53ef\u4ee5\u5bf9\nFileLockManager\n\u4e2d\u7684\u6620\u5c04\u4fe1\u606f\u8fdb\u884c\u5206\u6876\n\n\n\u7edd\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\uff0c\u5e76\u4e0d\u4f1a\u51fa\u73b0\u540c\u65f6\u64cd\u4f5c\u540c\u4e00\u4e2a\u6587\u4ef6\u7684\u5143\u6570\u636e\u7684\u60c5\u51b5\uff0c\u56e0\u6b64\u6b21\u52a0\u9501\u3001\u91ca\u653e\u9501\u7684\u65f6\u5019\uff0c\u4f1a\u9020\u6210\nLockEntry\n\u7ed3\u6784\u7684\u6784\u9020\u548c\u6790\u6784\uff0c\u6216\u8005\u53ef\u4ee5\u8f85\u4ee5\ncache\n\uff0c\u5c06\u9700\u8981\u91ca\u653e\u7684\nLockEntry\n\u5148\u7f13\u5b58\u8d77\u6765\uff0c\u8ba9\u7f13\u5b58\u53bb\u8d1f\u8d23\u6700\u7ec8\u91ca\u653e\uff0c\u5f53\u9700\u8981\u65b0\u7533\u8bf7\nLockEntry\n\u65f6\uff0c\u76f4\u63a5\u4ece\u7f13\u5b58\u4e2d\u53ec\u56de\u4e00\u4e2a\u5373\u53ef\uff0c\u7c7b\u4f3c\u5185\u6838\u4e2d\nslab\n\u7684\u505a\u6cd5", 
            "title": "file_lock"
        }, 
        {
            "location": "/cn/file_lock/#_1", 
            "text": "", 
            "title": "\u6587\u4ef6\u9501\u652f\u6301\u65b9\u6848"
        }, 
        {
            "location": "/cn/file_lock/#_2", 
            "text": "\u4e3a\u4fdd\u8bc1\u5bf9\u540c\u4e00\u6587\u4ef6\u5143\u6570\u636e\u64cd\u4f5c\u7684\u6b63\u786e\u6027\uff0c\u9700\u8981\u5c06\u5bf9\u5143\u6570\u636e\u7684\u64cd\u4f5c\u4e32\u884c\u5316\uff0c\u6240\u4ee5\u9700\u8981\u6587\u4ef6\u9501\u7684\u652f\u6301", 
            "title": "\u80cc\u666f"
        }, 
        {
            "location": "/cn/file_lock/#_3", 
            "text": "\u5728 NameServer \u4e2d\uff0c\u8bbe\u7f6e\u4e00\u4e2a FileLockManager \uff0c\u7528\u6765\u8d1f\u8d23\u4fdd\u8bc1\u5355\u4e2a\u6587\u4ef6\u5143\u6570\u636e\u64cd\u4f5c\u7684\u539f\u5b50\u6027\uff0c FileLockManager \u4e3a\u6bcf\u4e2a\u6b63\u5728\u8fdb\u884c\u5143\u4fe1\u606f\u4fee\u6539\u7684\u6587\u4ef6\u6216\u76ee\u5f55\u7ef4\u62a4\u4e00\u4e2a\u5185\u5b58\u7ed3\u6784 LockEntry \uff0c\u8be5\u7ed3\u6784\u4e2d\u5305\u542b\u4e00\u4e2a\u5f15\u7528\u8ba1\u6570 ref_ \u548c\u4e00\u4e2a\u8bfb\u5199\u9501 rw_lock_    \u52a0\u9501\u7684\u6574\u4f53\u8fc7\u7a0b\u4e3a\uff1a\u4e3a\u6700\u540e\u4e00\u7ea7\u6587\u4ef6\u52a0\u5199\u9501\uff0c\u524d\u9762\u6240\u6709\u76ee\u5f55\u52a0\u8bfb\u9501\u3002\u52a0\u9501\u65f6\uff0c\u4ece\u6839\u76ee\u5f55\u5f00\u59cb\uff0c\u4e0d\u65ad\u5c1d\u8bd5\u5bf9\u4e0b\u7ea7\u76ee\u5f55\u8fdb\u884c\u52a0\u9501\u3002\u540c\u65f6\uff0c\u52a0\u8bfb\u5199\u9501\u65f6\uff0c\u5199\u9501\u4f18\u5148\uff0c\u53ef\u4ee5\u9632\u6b62\u5199\u76ee\u5f55\u64cd\u4f5c\u7684\u9965\u997f\u73b0\u8c61    \u5728\u5bf9\u67d0\u4e00\u7ea7\u76ee\u5f55\u6216\u6587\u4ef6\u8fdb\u884c\u52a0\u9501\u65f6\uff0c\u9996\u5148\u5728 FileLockManager \u67e5\u627e\u5176\u5bf9\u5e94\u7684 LockEntry \uff0c   \u5982\u679c\u6ca1\u6709\u627e\u5230\uff0c\u5219\u8bf4\u660e\u5e76\u6ca1\u6709\u5176\u5b83\u7ebf\u7a0b\u5bf9\u8be5\u6761\u94fe\u8def\u8fdb\u884c\u64cd\u4f5c\uff0c\u5219\u6784\u9020\u4e00\u4e2a\u65b0\u7684 LockEntry \uff0c\u5c06\u5176\u5f15\u7528\u8ba1\u6570\u52a01\uff0c\u5e76\u5bf9\u8be5 LockEntry \u4e2d\u7684\u8bfb\u5199\u9501\u8fdb\u884c\u52a0\u9501   \u5982\u679c\u627e\u5230\uff0c\u5219\u8bf4\u660e\u6709\u5176\u5b83\u7ebf\u7a0b\u6b63\u5728\u5bf9\u8be5\u6761\u94fe\u8def\u8fdb\u884c\u64cd\u4f5c\uff0c\u5219\u9996\u5148\u5c06\u5176\u5f15\u7528\u8ba1\u6570\u52a01\u5c06\u5176\u5bf9\u5e94\u7684 LockEntry \u5f15\u7528\u8ba1\u6570\u52a01\uff0c\u7136\u540e\u518d\u53bb\u5c1d\u8bd5\u52a0\u8bfb\u9501\u6216\u5199\u9501\uff0c\u5982\u679c\u52a0\u9501\u4e0d\u6210\u529f\uff0c\u5219\u4f1a\u88ab\u963b\u585e\u76f4\u5230\u52a0\u9501\u6210\u529f    \u5728\u5bf9\u67d0\u4e00\u7ea7\u76ee\u5f55\u6216\u6587\u4ef6\u64cd\u4f5c\u5b8c\u6210\u540e\uff0c\u5bf9\u9501\u8fdb\u884c\u91ca\u653e\u65f6\uff0c\u9700\u8981\u6309\u7167\u52a0\u9501\u7684\u76f8\u53cd\u987a\u5e8f\u8fdb\u884c\u91ca\u653e\u3002\u91ca\u653e\u65f6\uff0c\u5148\u91ca\u653e\u8bfb\u5199\u9501\uff0c\u7136\u540e\u5c06 LockEntry \u7684\u5f15\u7528\u8ba1\u6570\u51cf1\uff0c\u5982\u679c\u5f15\u7528\u8ba1\u6570\u51cf\u81f30\uff0c\u5219\u89e6\u53d1 LockEntry \u7684\u6790\u6784", 
            "title": "\u65b9\u6848"
        }, 
        {
            "location": "/cn/file_lock/#rename", 
            "text": "\u7531\u4e8e\u5728rename\u65f6\u6d89\u53ca\u5230\u4e24\u4e2a\u4e0d\u540c\u7684\u8def\u5f84\uff0c\u4e3a\u9632\u6b62\u6b7b\u9501\uff0crename\u64cd\u4f5c\u65f6\uff0c\u90fd\u9075\u5faa\u6309\u7167\u8def\u5f84\u7684\u5b57\u5178\u5e8f\u8fdb\u884c\u52a0\u9501", 
            "title": "rename\u65f6\u9884\u9632\u6b7b\u9501"
        }, 
        {
            "location": "/cn/file_lock/#_4", 
            "text": "\u8003\u8651\u5230\u6bcf\u4e2a\u6587\u4ef6\u7684\u9501\u76f8\u5bf9\u6bd4\u8f83\u72ec\u7acb\uff0c\u53ef\u4ee5\u5bf9 FileLockManager \u4e2d\u7684\u6620\u5c04\u4fe1\u606f\u8fdb\u884c\u5206\u6876  \u7edd\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\uff0c\u5e76\u4e0d\u4f1a\u51fa\u73b0\u540c\u65f6\u64cd\u4f5c\u540c\u4e00\u4e2a\u6587\u4ef6\u7684\u5143\u6570\u636e\u7684\u60c5\u51b5\uff0c\u56e0\u6b64\u6b21\u52a0\u9501\u3001\u91ca\u653e\u9501\u7684\u65f6\u5019\uff0c\u4f1a\u9020\u6210 LockEntry \u7ed3\u6784\u7684\u6784\u9020\u548c\u6790\u6784\uff0c\u6216\u8005\u53ef\u4ee5\u8f85\u4ee5 cache \uff0c\u5c06\u9700\u8981\u91ca\u653e\u7684 LockEntry \u5148\u7f13\u5b58\u8d77\u6765\uff0c\u8ba9\u7f13\u5b58\u53bb\u8d1f\u8d23\u6700\u7ec8\u91ca\u653e\uff0c\u5f53\u9700\u8981\u65b0\u7533\u8bf7 LockEntry \u65f6\uff0c\u76f4\u63a5\u4ece\u7f13\u5b58\u4e2d\u53ec\u56de\u4e00\u4e2a\u5373\u53ef\uff0c\u7c7b\u4f3c\u5185\u6838\u4e2d slab \u7684\u505a\u6cd5", 
            "title": "\u53ef\u80fd\u9700\u8981\u7684\u4f18\u5316"
        }, 
        {
            "location": "/cn/garbage_collection/", 
            "text": "Garbage Collection\n\n\nNameserver\u548cChunkserver\u90fd\u4f7f\u7528\u5783\u573e\u6536\u96c6\u6765\u907f\u514d\u4e0d\u5fc5\u8981\u7684\u8d44\u6e90\u5360\u7528\u3002\n\n\nNameserver\n\n\nblock\u526f\u672c\u56de\u6536\n\n\n\u5982\u679c\u4e00\u4e2ablock\u7684\u526f\u672c\u6570\u8d85\u8fc7\u4e86\u7528\u6237\u6307\u5b9a\u7684\u526f\u672c\u6570\uff0cnameserver\u9700\u8981\u53d1\u73b0\uff0c\u5e76\u901a\u77e5chunkserver\u5220\u9664\u8fd9\u4e2ablock\u7684\u67d0\u4e2a\u526f\u672c\u3002\n\n\u8fd9\u91cc\u6709\u591a\u79cd\u9009\u62e9\uff1a\n\n1. \u5728\u6536\u5230chunkserver\u7684block_report\u65f6\uff0c\u68c0\u67e5\u5bf9\u5e94\u7684block\uff0c\u526f\u672c\u6570\u662f\u5426\u8d85\u51fa\u9884\u671f\uff0c\u5982\u679c\u8d85\u51fa\uff0c\u90a3\u4e48\u901a\u77e5chunkserver\u5220\u9664\u3002\n\n2. \u5728\u7528\u6237\u51cf\u5c11\u6587\u4ef6\u526f\u672c\u6570\u65f6\uff0c\u53d1\u8d77block\u526f\u672c\u5220\u9664\u3002\n\n3. \u5b9a\u671f\u626b\u63cf\u6240\u6709block\uff0c\u5bf9\u4e8e\u8d85\u51fa\u9884\u671f\u526f\u672c\u6570\u7684block\uff0c\u53d1\u8d77\u526f\u672c\u5220\u9664\u3002  \n\n\n\u7b2c2\u79cd\u65b9\u5f0f\u7684\u4ee3\u4ef7\u5e94\u8be5\u662f\u6700\u5c0f\u7684\uff0c\u800c\u4e14\u8fd8\u53ef\u4ee5\u4f18\u5316\u4e3a\uff0c\u5f53\u526f\u672c\u56de\u6536\u65f6\uff0c\u4ec5\u5c06\u526f\u672c\u56de\u6536\u6307\u4ee4\u8bb0\u5f55\u5728chunkserver\u4fe1\u606f\u91cc\uff0c\u5f53\u6536\u5230chunkserver\u5fc3\u8df3\u65f6\uff0c\u8fd4\u56de\u8fd9\u4e9b\u9700\u8981\u56de\u6536\u7684\u526f\u672c\u5217\u8868\u3002\n\n\u540c\u65f6\u8f85\u4ee5\u5728block_report\u65f6\uff0c\u68c0\u67e5report\u7684\u526f\u672c\u7684\u5408\u6cd5\u6027\uff0c\u4e0d\u5408\u6cd5\u7684\u53d1\u8d77\u5220\u9664\u3002\n\n\n\u5783\u573eblock\u7684\u56de\u6536\n\n\n\u5982\u679c\u4e00\u4e2a\u6587\u4ef6\u88ab\u5220\u9664\u4e86\uff0c\u90a3\u4e48\u5b83\u6240\u5305\u542b\u7684block\u90fd\u5c06\u6210\u4e3a\u5783\u573eblock\uff0cnameserver\u9700\u8981\u53d1\u73b0\uff0c\u5e76\u901a\u77e5\u6240\u6709\u5305\u542b\u8fd9\u4e2ablock\u7684chunkserver\u5220\u9664\u3002\n\n\u8fd9\u4e2a\u53ef\u4ee5\u4f7f\u7528\u4e0e\u526f\u672c\u56de\u6536\u76f8\u540c\u7684\u89e3\u51b3\u65b9\u6848\u3002\n\n\nChunkserver\n\n\n\n\n\u5982\u679c\u78c1\u76d8\u4e0a\u7684\u67d0\u4e2ablock\u4e0d\u662f\u5408\u6cd5\u7684block\uff08meta\u4e2d\u6ca1\u6709\u6216\u8005\u4e0emeta\u4e0d\u4e00\u81f4\uff09\uff0cchunkserver\u5e94\u8be5\u6e05\u7406\u8fd9\u4e2ablock\n\nchunkserver\u7684\u5783\u573e\u6536\u96c6\u53ef\u4ee5\u4f7f\u7528\u5355\u72ec\u7684\u540e\u53f0\u7ebf\u7a0b\uff0c\u5b9a\u671f\u5168\u5c40\u626b\u63cf\u6570\u636e\u5b58\u50a8\u76ee\u5f55\u7684\u65b9\u5f0f\u5b9e\u73b0\u3002", 
            "title": "garbage_collection"
        }, 
        {
            "location": "/cn/garbage_collection/#garbage-collection", 
            "text": "Nameserver\u548cChunkserver\u90fd\u4f7f\u7528\u5783\u573e\u6536\u96c6\u6765\u907f\u514d\u4e0d\u5fc5\u8981\u7684\u8d44\u6e90\u5360\u7528\u3002", 
            "title": "Garbage Collection"
        }, 
        {
            "location": "/cn/garbage_collection/#nameserver", 
            "text": "", 
            "title": "Nameserver"
        }, 
        {
            "location": "/cn/garbage_collection/#block", 
            "text": "\u5982\u679c\u4e00\u4e2ablock\u7684\u526f\u672c\u6570\u8d85\u8fc7\u4e86\u7528\u6237\u6307\u5b9a\u7684\u526f\u672c\u6570\uff0cnameserver\u9700\u8981\u53d1\u73b0\uff0c\u5e76\u901a\u77e5chunkserver\u5220\u9664\u8fd9\u4e2ablock\u7684\u67d0\u4e2a\u526f\u672c\u3002 \n\u8fd9\u91cc\u6709\u591a\u79cd\u9009\u62e9\uff1a \n1. \u5728\u6536\u5230chunkserver\u7684block_report\u65f6\uff0c\u68c0\u67e5\u5bf9\u5e94\u7684block\uff0c\u526f\u672c\u6570\u662f\u5426\u8d85\u51fa\u9884\u671f\uff0c\u5982\u679c\u8d85\u51fa\uff0c\u90a3\u4e48\u901a\u77e5chunkserver\u5220\u9664\u3002 \n2. \u5728\u7528\u6237\u51cf\u5c11\u6587\u4ef6\u526f\u672c\u6570\u65f6\uff0c\u53d1\u8d77block\u526f\u672c\u5220\u9664\u3002 \n3. \u5b9a\u671f\u626b\u63cf\u6240\u6709block\uff0c\u5bf9\u4e8e\u8d85\u51fa\u9884\u671f\u526f\u672c\u6570\u7684block\uff0c\u53d1\u8d77\u526f\u672c\u5220\u9664\u3002    \u7b2c2\u79cd\u65b9\u5f0f\u7684\u4ee3\u4ef7\u5e94\u8be5\u662f\u6700\u5c0f\u7684\uff0c\u800c\u4e14\u8fd8\u53ef\u4ee5\u4f18\u5316\u4e3a\uff0c\u5f53\u526f\u672c\u56de\u6536\u65f6\uff0c\u4ec5\u5c06\u526f\u672c\u56de\u6536\u6307\u4ee4\u8bb0\u5f55\u5728chunkserver\u4fe1\u606f\u91cc\uff0c\u5f53\u6536\u5230chunkserver\u5fc3\u8df3\u65f6\uff0c\u8fd4\u56de\u8fd9\u4e9b\u9700\u8981\u56de\u6536\u7684\u526f\u672c\u5217\u8868\u3002 \n\u540c\u65f6\u8f85\u4ee5\u5728block_report\u65f6\uff0c\u68c0\u67e5report\u7684\u526f\u672c\u7684\u5408\u6cd5\u6027\uff0c\u4e0d\u5408\u6cd5\u7684\u53d1\u8d77\u5220\u9664\u3002", 
            "title": "block\u526f\u672c\u56de\u6536"
        }, 
        {
            "location": "/cn/garbage_collection/#block_1", 
            "text": "\u5982\u679c\u4e00\u4e2a\u6587\u4ef6\u88ab\u5220\u9664\u4e86\uff0c\u90a3\u4e48\u5b83\u6240\u5305\u542b\u7684block\u90fd\u5c06\u6210\u4e3a\u5783\u573eblock\uff0cnameserver\u9700\u8981\u53d1\u73b0\uff0c\u5e76\u901a\u77e5\u6240\u6709\u5305\u542b\u8fd9\u4e2ablock\u7684chunkserver\u5220\u9664\u3002 \n\u8fd9\u4e2a\u53ef\u4ee5\u4f7f\u7528\u4e0e\u526f\u672c\u56de\u6536\u76f8\u540c\u7684\u89e3\u51b3\u65b9\u6848\u3002", 
            "title": "\u5783\u573eblock\u7684\u56de\u6536"
        }, 
        {
            "location": "/cn/garbage_collection/#chunkserver", 
            "text": "\u5982\u679c\u78c1\u76d8\u4e0a\u7684\u67d0\u4e2ablock\u4e0d\u662f\u5408\u6cd5\u7684block\uff08meta\u4e2d\u6ca1\u6709\u6216\u8005\u4e0emeta\u4e0d\u4e00\u81f4\uff09\uff0cchunkserver\u5e94\u8be5\u6e05\u7406\u8fd9\u4e2ablock \nchunkserver\u7684\u5783\u573e\u6536\u96c6\u53ef\u4ee5\u4f7f\u7528\u5355\u72ec\u7684\u540e\u53f0\u7ebf\u7a0b\uff0c\u5b9a\u671f\u5168\u5c40\u626b\u63cf\u6570\u636e\u5b58\u50a8\u76ee\u5f55\u7684\u65b9\u5f0f\u5b9e\u73b0\u3002", 
            "title": "Chunkserver"
        }, 
        {
            "location": "/cn/HA_log_compress/", 
            "text": "HA \u65e5\u5fd7\u538b\u7f29\n\n\n\u80cc\u666f\n\n\nNameserver\u96c6\u7fa4\u95f4\u901a\u8fc7\u4e00\u81f4\u6027\u534f\u8bae\u540c\u6b65\u72b6\u6001\u673a\uff0c\u4e00\u4e2a\u8282\u70b9\u5b95\u673a\u540e\u9700\u8981\u901a\u8fc7redo log\u8d76\u4e0a\u8fdb\u5ea6\u3002\u4f46\u662f\u5f53\u4e00\u53f0\u673a\u5b95\u673a\u8fc7\u4e45\uff0c\u6216\u8005\u65b0\u8282\u70b9\u52a0\u5165\u65f6\uff0clog\u8fc7\u957f\u4f1a\u5bfc\u81f4redo\u8fc7\u7a0b\u592a\u957f\uff0c\u5f71\u54cd\u96c6\u7fa4\u53ef\u7528\u6027\u3002\u56e0\u6b64\uff0c\u9700\u8981\u5bf9\u8282\u70b9log\u8fdb\u884c\u6574\u7406\uff0c\u6309\u7167\u4e00\u5b9a\u7b56\u7565\u5bf9\u72b6\u6001\u673a\u505a\u5feb\u7167\uff0c\u5e76\u5220\u9664\u6389\u5feb\u7167\u65f6\u95f4\u65f6\u95f4\u70b9\u4e4b\u524d\u7684log\u3002\n\n\n\u8bbe\u8ba1\n\n\n\n\n\u65e5\u5fd7\u540c\u6b65\u6d41\u7a0b\uff08master/slave\u6a21\u5f0f\uff09\n\n\nmaster\u5199logdb\n\n\nmaster\u5bf9\u72b6\u6001\u673a\u6253\u5feb\u7167\uff0c\u5e76\u7528\u672c\u6761log\u7684id\u4f5c\u4e3a\u5feb\u7167\u6807\u8bc6\n\n\nmaster\u5199\u72b6\u6001\u673a\n\n\n\u5c06log\u540c\u6b65\u5230slave\n\n\nslave\u5199logdb\n\n\nslave\u5199\u72b6\u6001\u673a\n\n\nslave\u8fd4\u56de\u540c\u6b65\u6210\u529f\uff0cmaster\u5220\u9664\u672c\u5730\u5bf9\u5e94\u7684\u72b6\u6001\u673a\u5feb\u7167\n\n\n\n\n\n\n\n\n(i, ii)\u60c5\u51b5\u4e0bmaster\u5b95\u673a\uff0clogdb\u4e2d\u4f1a\u6709\u672a\u63d0\u4ea4\u6570\u636e\u3002\n(iii, iv)\u60c5\u51b5\u4e0bmaster\u5b95\u673a\uff0clogdb\u548c\u72b6\u6001\u673a\u4e2d\u5747\u4f1a\u6709\u672a\u63d0\u4ea4\u6570\u636e\u3002\n(v-vii)\u8bf7\u60c5\u51b5\u4e0bmaster\u5b95\u673a\uff0c\u65e0\u810f\u6570\u636e\u3002\n\u7b80\u5355\u5224\u65ad\uff1amaster\u5b95\u673a\u5e76\u4e14\u4ee5\u4ece\u7684\u8eab\u4efd\u91cd\u542f\u65f6\uff0c\u5982\u679csync_idx != current_idx\uff0c\u5219\u9700\u8981\u6e05\u7406\u6240\u6709\u6570\u636e\u62d6\u955c\u50cf\u3002\n\n\n\n\n\u62d6\u955c\u50cf\n\n\n\n\n\u955c\u50cf\u7531master\u4e3b\u52a8\u540c\u6b65\u7ed9slave\u3002master\u5728\u8bd5\u56fe\u7ed9\u4ece\u540c\u6b65\u67d0\u6761log\u65f6\u53d1\u73b0slave\u5df2\u7ecf\u843d\u540e\u592a\u591a\uff0c\u5c31\u4f1a\u5148\u5c06\u955c\u50cf\u540c\u6b65\u7ed9slave\uff0c\u518d\u4ece\u955c\u50cf\u65f6\u95f4\u70b9\u5f00\u59cb\u540c\u6b65log\u7ed9slave\u3002\n\n\n\u955c\u50cf\u7684\u540c\u6b65\u4e3b\u8981\u4f9d\u9760\u4e24\u4e2a\u53d8\u91cf\uff1a\nsnapshot_id\n \u548c \nsnapshot_step\n\u3002\n\n\nsnapshot_id\n\u6807\u8bc6\u955c\u50cf\u7684\u7248\u672c\uff0c\u6301\u4e45\u5316\u5728logdb\u4e2d\u3002master\u5728\u5411slave\u540c\u6b65log\u7684\u65f6\u5019\u5982\u679c\nsnapshot_id\n\u4e0d\u4e00\u81f4\uff0c\u5219\u9700\u8981\u5148\u5c06\u5f53\u524d\u955c\u50cf\u540c\u6b65\u7ed9slave\u3002\u6bcf\u4e2a\u955c\u50cf\u4f1a\u5206\u591a\u6b21\u540c\u6b65\u7ed9slave\uff0c\u6bcf\u4e00\u6b21\u7531\nsnapshot_step\n\u6807\u8bc6\u3002\nsnapshot_step\n\u4e0d\u6301\u4e45\u5316\uff0c\u5982\u679c\u5728\u540c\u6b65\u8fc7\u7a0b\u4e2dslave\u5b95\u673a\uff0c\u5219\u672c\u6b21\u540c\u6b65\u5931\u8d25\uff0cslave\u91cd\u542f\u540e\u91cd\u65b0\u540c\u6b65\u3002\u955c\u50cf\u540c\u6b65\u5b8c\u6210\u540e\uff0cslave\u4f1a\u5c06\u672c\u6b21\u955c\u50cf\u7684\nsnapshot_id\n\u6301\u4e45\u5316\u5728logdb\u4e2d\u3002", 
            "title": "HA_log_compress"
        }, 
        {
            "location": "/cn/HA_log_compress/#ha", 
            "text": "", 
            "title": "HA \u65e5\u5fd7\u538b\u7f29"
        }, 
        {
            "location": "/cn/HA_log_compress/#_1", 
            "text": "Nameserver\u96c6\u7fa4\u95f4\u901a\u8fc7\u4e00\u81f4\u6027\u534f\u8bae\u540c\u6b65\u72b6\u6001\u673a\uff0c\u4e00\u4e2a\u8282\u70b9\u5b95\u673a\u540e\u9700\u8981\u901a\u8fc7redo log\u8d76\u4e0a\u8fdb\u5ea6\u3002\u4f46\u662f\u5f53\u4e00\u53f0\u673a\u5b95\u673a\u8fc7\u4e45\uff0c\u6216\u8005\u65b0\u8282\u70b9\u52a0\u5165\u65f6\uff0clog\u8fc7\u957f\u4f1a\u5bfc\u81f4redo\u8fc7\u7a0b\u592a\u957f\uff0c\u5f71\u54cd\u96c6\u7fa4\u53ef\u7528\u6027\u3002\u56e0\u6b64\uff0c\u9700\u8981\u5bf9\u8282\u70b9log\u8fdb\u884c\u6574\u7406\uff0c\u6309\u7167\u4e00\u5b9a\u7b56\u7565\u5bf9\u72b6\u6001\u673a\u505a\u5feb\u7167\uff0c\u5e76\u5220\u9664\u6389\u5feb\u7167\u65f6\u95f4\u65f6\u95f4\u70b9\u4e4b\u524d\u7684log\u3002", 
            "title": "\u80cc\u666f"
        }, 
        {
            "location": "/cn/HA_log_compress/#_2", 
            "text": "\u65e5\u5fd7\u540c\u6b65\u6d41\u7a0b\uff08master/slave\u6a21\u5f0f\uff09  master\u5199logdb  master\u5bf9\u72b6\u6001\u673a\u6253\u5feb\u7167\uff0c\u5e76\u7528\u672c\u6761log\u7684id\u4f5c\u4e3a\u5feb\u7167\u6807\u8bc6  master\u5199\u72b6\u6001\u673a  \u5c06log\u540c\u6b65\u5230slave  slave\u5199logdb  slave\u5199\u72b6\u6001\u673a  slave\u8fd4\u56de\u540c\u6b65\u6210\u529f\uff0cmaster\u5220\u9664\u672c\u5730\u5bf9\u5e94\u7684\u72b6\u6001\u673a\u5feb\u7167     (i, ii)\u60c5\u51b5\u4e0bmaster\u5b95\u673a\uff0clogdb\u4e2d\u4f1a\u6709\u672a\u63d0\u4ea4\u6570\u636e\u3002\n(iii, iv)\u60c5\u51b5\u4e0bmaster\u5b95\u673a\uff0clogdb\u548c\u72b6\u6001\u673a\u4e2d\u5747\u4f1a\u6709\u672a\u63d0\u4ea4\u6570\u636e\u3002\n(v-vii)\u8bf7\u60c5\u51b5\u4e0bmaster\u5b95\u673a\uff0c\u65e0\u810f\u6570\u636e\u3002\n\u7b80\u5355\u5224\u65ad\uff1amaster\u5b95\u673a\u5e76\u4e14\u4ee5\u4ece\u7684\u8eab\u4efd\u91cd\u542f\u65f6\uff0c\u5982\u679csync_idx != current_idx\uff0c\u5219\u9700\u8981\u6e05\u7406\u6240\u6709\u6570\u636e\u62d6\u955c\u50cf\u3002   \u62d6\u955c\u50cf   \u955c\u50cf\u7531master\u4e3b\u52a8\u540c\u6b65\u7ed9slave\u3002master\u5728\u8bd5\u56fe\u7ed9\u4ece\u540c\u6b65\u67d0\u6761log\u65f6\u53d1\u73b0slave\u5df2\u7ecf\u843d\u540e\u592a\u591a\uff0c\u5c31\u4f1a\u5148\u5c06\u955c\u50cf\u540c\u6b65\u7ed9slave\uff0c\u518d\u4ece\u955c\u50cf\u65f6\u95f4\u70b9\u5f00\u59cb\u540c\u6b65log\u7ed9slave\u3002  \u955c\u50cf\u7684\u540c\u6b65\u4e3b\u8981\u4f9d\u9760\u4e24\u4e2a\u53d8\u91cf\uff1a snapshot_id  \u548c  snapshot_step \u3002  snapshot_id \u6807\u8bc6\u955c\u50cf\u7684\u7248\u672c\uff0c\u6301\u4e45\u5316\u5728logdb\u4e2d\u3002master\u5728\u5411slave\u540c\u6b65log\u7684\u65f6\u5019\u5982\u679c snapshot_id \u4e0d\u4e00\u81f4\uff0c\u5219\u9700\u8981\u5148\u5c06\u5f53\u524d\u955c\u50cf\u540c\u6b65\u7ed9slave\u3002\u6bcf\u4e2a\u955c\u50cf\u4f1a\u5206\u591a\u6b21\u540c\u6b65\u7ed9slave\uff0c\u6bcf\u4e00\u6b21\u7531 snapshot_step \u6807\u8bc6\u3002 snapshot_step \u4e0d\u6301\u4e45\u5316\uff0c\u5982\u679c\u5728\u540c\u6b65\u8fc7\u7a0b\u4e2dslave\u5b95\u673a\uff0c\u5219\u672c\u6b21\u540c\u6b65\u5931\u8d25\uff0cslave\u91cd\u542f\u540e\u91cd\u65b0\u540c\u6b65\u3002\u955c\u50cf\u540c\u6b65\u5b8c\u6210\u540e\uff0cslave\u4f1a\u5c06\u672c\u6b21\u955c\u50cf\u7684 snapshot_id \u6301\u4e45\u5316\u5728logdb\u4e2d\u3002", 
            "title": "\u8bbe\u8ba1"
        }, 
        {
            "location": "/cn/how_to_contribute/", 
            "text": "\u600e\u6837\u6210\u4e3a\u8d21\u732e\u8005\n\n\n\n\n\u9996\u5148fork\u672c\u9879\u76ee\u5230\u4f60\u7684\u4e2a\u4eba\u76ee\u5f55, \u5c1d\u8bd5\u4fee\u6539\u4f60\u53d1\u73b0\u7684\u95ee\u9898\n\n\n\u4ee3\u7801\u98ce\u683c\u8bf7\u9075\u5b88Google\u7f16\u7801\u89c4\u8303, \u4f46\u4f7f\u75284\u7a7a\u683c\u7f29\u8fdb\n\n\n\u5982\u679c\u4ee3\u7801\u91cc\u8981\u6253\u65e5\u5fd7, \u8bf7\u9075\u5b88\nBFS\u65e5\u5fd7\u89c4\u8303\n\n\n\u5f00\u53d1\u5b8c\u6210\u540e\u81ea\u6d4b\u529f\u80fd\u662f\u5426\u6b63\u786e\uff0c\u5e76\u8fd0\u884c\nmake test\n\u53ca\nmake check\n\u68c0\u67e5\u662f\u5426\u53ef\u4ee5\u901a\u8fc7\u5df2\u6709\u7684\u6d4b\u8bd5case\n\n\n\n\n\u63d0\u4ea4\u4ee3\u7801\u65f6\u7684commit message \u8bf7\u9075\u5b88:\n\n    a. \u9996\u884c\u4f7f\u7528\u82f1\u6587\u63cf\u8ff0 \u7528\u7b80\u77ed\u7684\u53e5\u5b50\u63cf\u8ff0\u4f60\u505a\u51fa\u7684\u66f4\u6539, \u9996\u5b57\u6bcd\u5927\u5199.\n\n    b. \u7b2c\u4e8c\u884c\u7a7a\u884c, \u7b2c\u4e09\u884c\u5199(#\u5bf9\u5e94\u7684issue\u53f7).\n\n    c. \u540e\u9762\u7528\u82f1\u6587\u8be6\u7ec6\u63cf\u8ff0\u4f60\u7684\u5347\u7ea7\u7684\u7ec6\u8282, \u5982\u679c\u9996\u884c\u5df2\u7ecf\u63cf\u8ff0\u6e05\u695a\u8fd9\u91cc\u4e5f\u53ef\u4ee5\u7701\u7565.\n\n    \u793a\u4f8b\u5982\u4e0b:\n\n    Add RebuildBlock in BlockMapping \u00a0\n\n\n(#617) 'AddNewBlock' is used both in adding new blocks and rebuild\n\nexist blocks. Use separate functions to deal with different\n\nsituations.\n\n6. \u63d0\u4ea4pull request \u00a0\n7. \u5728code-review\u901a\u8fc7\u540e\uff0c\u4f60\u7684\u4ee3\u7801\u4fbf\u6709\u673a\u4f1a\u8fd0\u884c\u5728\u767e\u5ea6\u7684\u6570\u4e07\u53f0\u670d\u52a1\u5668\u4e0a~", 
            "title": "how_to_contribute"
        }, 
        {
            "location": "/cn/how_to_contribute/#_1", 
            "text": "\u9996\u5148fork\u672c\u9879\u76ee\u5230\u4f60\u7684\u4e2a\u4eba\u76ee\u5f55, \u5c1d\u8bd5\u4fee\u6539\u4f60\u53d1\u73b0\u7684\u95ee\u9898  \u4ee3\u7801\u98ce\u683c\u8bf7\u9075\u5b88Google\u7f16\u7801\u89c4\u8303, \u4f46\u4f7f\u75284\u7a7a\u683c\u7f29\u8fdb  \u5982\u679c\u4ee3\u7801\u91cc\u8981\u6253\u65e5\u5fd7, \u8bf7\u9075\u5b88 BFS\u65e5\u5fd7\u89c4\u8303  \u5f00\u53d1\u5b8c\u6210\u540e\u81ea\u6d4b\u529f\u80fd\u662f\u5426\u6b63\u786e\uff0c\u5e76\u8fd0\u884c make test \u53ca make check \u68c0\u67e5\u662f\u5426\u53ef\u4ee5\u901a\u8fc7\u5df2\u6709\u7684\u6d4b\u8bd5case   \u63d0\u4ea4\u4ee3\u7801\u65f6\u7684commit message \u8bf7\u9075\u5b88: \n    a. \u9996\u884c\u4f7f\u7528\u82f1\u6587\u63cf\u8ff0 \u7528\u7b80\u77ed\u7684\u53e5\u5b50\u63cf\u8ff0\u4f60\u505a\u51fa\u7684\u66f4\u6539, \u9996\u5b57\u6bcd\u5927\u5199. \n    b. \u7b2c\u4e8c\u884c\u7a7a\u884c, \u7b2c\u4e09\u884c\u5199(#\u5bf9\u5e94\u7684issue\u53f7). \n    c. \u540e\u9762\u7528\u82f1\u6587\u8be6\u7ec6\u63cf\u8ff0\u4f60\u7684\u5347\u7ea7\u7684\u7ec6\u8282, \u5982\u679c\u9996\u884c\u5df2\u7ecf\u63cf\u8ff0\u6e05\u695a\u8fd9\u91cc\u4e5f\u53ef\u4ee5\u7701\u7565. \n    \u793a\u4f8b\u5982\u4e0b: \n    Add RebuildBlock in BlockMapping \u00a0  (#617) 'AddNewBlock' is used both in adding new blocks and rebuild \nexist blocks. Use separate functions to deal with different \nsituations. \n6. \u63d0\u4ea4pull request \u00a0\n7. \u5728code-review\u901a\u8fc7\u540e\uff0c\u4f60\u7684\u4ee3\u7801\u4fbf\u6709\u673a\u4f1a\u8fd0\u884c\u5728\u767e\u5ea6\u7684\u6570\u4e07\u53f0\u670d\u52a1\u5668\u4e0a~", 
            "title": "\u600e\u6837\u6210\u4e3a\u8d21\u732e\u8005"
        }, 
        {
            "location": "/cn/log_rule/", 
            "text": "\u65e5\u5fd7\u89c4\u5219\u4e0e\u8bf4\u660e\n\n\nBFS\u4e2d\u65e5\u5fd7\u7edf\u4e00\u4f7f\u7528common\u5e93\u4e2dLOG\u5b8f\u6253\u5370\uff0cprintf\u98ce\u683c\u3002\u53e6\u5916\u4e3a\u4e86\u4fbf\u4e8egrep, \u5236\u8ba2\u4ee5\u4e0b\u89c4\u5219\uff1a\n\n1. \u6240\u6709block id\u7684\u6253\u5370\u4f7f\u7528\u201c#%ld \"\u7684\u683c\u5f0f\uff08\u5373\u524d\u52a0#\uff0c\u540e\u52a0\u7a7a\u683c\uff09\n\n2. \u6240\u6709chunkserver id\u6253\u5370\u4f7f\u7528\"C%d \"\u7684\u683c\u5f0f\n\n3. \u6240\u6709entry id\u6253\u5370\u4f7f\u7528\"E%ld \"\u7684\u683c\u5f0f\n\n4. \u6240\u6709block version\u6253\u5370\u4f7f\u7528\"V%ld \"\u7684\u683c\u5f0f", 
            "title": "log_rule"
        }, 
        {
            "location": "/cn/log_rule/#_1", 
            "text": "BFS\u4e2d\u65e5\u5fd7\u7edf\u4e00\u4f7f\u7528common\u5e93\u4e2dLOG\u5b8f\u6253\u5370\uff0cprintf\u98ce\u683c\u3002\u53e6\u5916\u4e3a\u4e86\u4fbf\u4e8egrep, \u5236\u8ba2\u4ee5\u4e0b\u89c4\u5219\uff1a \n1. \u6240\u6709block id\u7684\u6253\u5370\u4f7f\u7528\u201c#%ld \"\u7684\u683c\u5f0f\uff08\u5373\u524d\u52a0#\uff0c\u540e\u52a0\u7a7a\u683c\uff09 \n2. \u6240\u6709chunkserver id\u6253\u5370\u4f7f\u7528\"C%d \"\u7684\u683c\u5f0f \n3. \u6240\u6709entry id\u6253\u5370\u4f7f\u7528\"E%ld \"\u7684\u683c\u5f0f \n4. \u6240\u6709block version\u6253\u5370\u4f7f\u7528\"V%ld \"\u7684\u683c\u5f0f", 
            "title": "\u65e5\u5fd7\u89c4\u5219\u4e0e\u8bf4\u660e"
        }, 
        {
            "location": "/cn/requirement/", 
            "text": "\u591a\u5907\u4efd\u6301\u4e45\u5316\u6570\u636e\u5b58\u50a8\n\n\n\u652f\u6301TB\u7ea7\u5927\u6587\u4ef6\n\n\n\u652f\u6301\u6d77\u91cf\u5c0f\u6587\u4ef6(\u5341\u4ebf?)\n\n\n\u9ad8\u6027\u80fd\u987a\u5e8f\u5199(100MB+)\n\n\n\u53ef\u4ee5\u6307\u5b9a\u6587\u4ef6\u5b58\u50a8\u4ecb\u8d28(\u5185\u5b58\u3001ssd)\n\n\n\u652f\u6301\u53ef\u914d\u7f6e\u7684\u5ba2\u6237\u7aefcache(\u5b9e\u73b0\u64cd\u4f5c\u7cfb\u7edfpagecache\u6548\u679c\uff09\n\n\n\u8de8\u673a\u623f\u6587\u4ef6\u6570\u636e\u540c\u6b65", 
            "title": "requirement"
        }, 
        {
            "location": "/cn/roadmap/", 
            "text": "Roadmap\n\n\n\u57fa\u672c\u529f\u80fd\n\n\n\n\n[x] \u57fa\u672c\u7684\u6587\u4ef6\u3001\u76ee\u5f55\u64cd\u4f5c(Create/Delete/Read/Write/Rename)\n\n\n[x] \u81ea\u52a8\u526f\u672c\u6062\u590d\n\n\n[x] Nameserver\u9ad8\u53ef\u7528\n\n\n[ ] \u62c6\u5206MetaServer\n\n\n[ ] \u78c1\u76d8\u95f4\u8d1f\u8f7d\u5747\u8861\n\n\n[ ] chunkserver\u95f4\u52a8\u6001\u8d1f\u8f7d\u5747\u8861\n\n\n[ ] \u6587\u4ef6\u9501\u548c\u76ee\u5f55\u9501\n\n\n[x] \u7b80\u5355\u7684\u8de8\u5730\u57df\u526f\u672c\u653e\u7f6e\n\n\n[ ] SDK lease\n\n\n[ ] \u8bfb\u65f6\u6162\u8282\u70b9\u89c4\u907f\n\n\n[ ] \u6247\u51fa\u5199\n\n\n\n\nPosix\u63a5\u53e3\n\n\n\n\n[x] Mount\u652f\u6301\n\n\n[ ] Fuse lowlevel\u63a5\u53e3\u5b9e\u73b0\n\n\n[x] \u57fa\u672c\u8bfb\u5199\u64cd\u4f5c\uff08\u4e0d\u5305\u62ec\u968f\u673a\u5199\uff09\n\n\n[x] \u5c0f\u6587\u4ef6\uff08\n256MB\uff09\u968f\u673a\u5199\uff08\u652f\u6301vim, gcc\u7b49\u5e94\u7528\uff09\n\n\n[ ] \u5927\u6587\u4ef6\u968f\u673a\u5199\n\n\n\n\n\u5e94\u7528\u652f\u6301\n\n\n\n\n[x] Tera\n\n\n[x] Shuttle\n\n\n[ ] Galaxy", 
            "title": "roadmap"
        }, 
        {
            "location": "/cn/roadmap/#roadmap", 
            "text": "", 
            "title": "Roadmap"
        }, 
        {
            "location": "/cn/roadmap/#_1", 
            "text": "[x] \u57fa\u672c\u7684\u6587\u4ef6\u3001\u76ee\u5f55\u64cd\u4f5c(Create/Delete/Read/Write/Rename)  [x] \u81ea\u52a8\u526f\u672c\u6062\u590d  [x] Nameserver\u9ad8\u53ef\u7528  [ ] \u62c6\u5206MetaServer  [ ] \u78c1\u76d8\u95f4\u8d1f\u8f7d\u5747\u8861  [ ] chunkserver\u95f4\u52a8\u6001\u8d1f\u8f7d\u5747\u8861  [ ] \u6587\u4ef6\u9501\u548c\u76ee\u5f55\u9501  [x] \u7b80\u5355\u7684\u8de8\u5730\u57df\u526f\u672c\u653e\u7f6e  [ ] SDK lease  [ ] \u8bfb\u65f6\u6162\u8282\u70b9\u89c4\u907f  [ ] \u6247\u51fa\u5199", 
            "title": "\u57fa\u672c\u529f\u80fd"
        }, 
        {
            "location": "/cn/roadmap/#posix", 
            "text": "[x] Mount\u652f\u6301  [ ] Fuse lowlevel\u63a5\u53e3\u5b9e\u73b0  [x] \u57fa\u672c\u8bfb\u5199\u64cd\u4f5c\uff08\u4e0d\u5305\u62ec\u968f\u673a\u5199\uff09  [x] \u5c0f\u6587\u4ef6\uff08 256MB\uff09\u968f\u673a\u5199\uff08\u652f\u6301vim, gcc\u7b49\u5e94\u7528\uff09  [ ] \u5927\u6587\u4ef6\u968f\u673a\u5199", 
            "title": "Posix\u63a5\u53e3"
        }, 
        {
            "location": "/cn/roadmap/#_2", 
            "text": "[x] Tera  [x] Shuttle  [ ] Galaxy", 
            "title": "\u5e94\u7528\u652f\u6301"
        }, 
        {
            "location": "/en/README/", 
            "text": "BFS Document\n\n\nRoadMap", 
            "title": "README"
        }, 
        {
            "location": "/en/README/#bfs-document", 
            "text": "", 
            "title": "BFS Document"
        }, 
        {
            "location": "/en/README/#roadmap", 
            "text": "", 
            "title": "RoadMap"
        }, 
        {
            "location": "/en/roadmap/", 
            "text": "Roadmap\n\n\nBasic functions\n\n\n\n\n[x] Basic files, directory operations(Create/Delete/Read/Write/Rename)\n\n\n[x] Automatic recovery\n\n\n[x] Nameserver HA\n\n\n[ ] Separate the Metaserver from the Nameserver\n\n\n[ ] Disk loadbalance\n\n\n[ ] Dynamic load balance between chunkservers\n\n\n[ ] File Lock \n Directory Lock\n\n\n[x] Simple multi-geographical replica placement\n\n\n[ ] Sdk lease\n\n\n[ ] Skip slow nodes while reading a file\n\n\n\n\nPosix interface\n\n\n\n\n[x] Mount support\n\n\n[ ] Fuse lowlevel implementation\n\n\n[x] Basic read and write operations\uff08not include random writes\uff09\n\n\n[x] Small file random write, support vim, gcc and other applications\n\n\n[ ] Large file random write\n\n\n\n\nApplication support\n\n\n\n\n[x] Tera\n\n\n[ ] Shuttle\n\n\n[ ] Galaxy", 
            "title": "RoadMap"
        }, 
        {
            "location": "/en/roadmap/#roadmap", 
            "text": "", 
            "title": "Roadmap"
        }, 
        {
            "location": "/en/roadmap/#basic-functions", 
            "text": "[x] Basic files, directory operations(Create/Delete/Read/Write/Rename)  [x] Automatic recovery  [x] Nameserver HA  [ ] Separate the Metaserver from the Nameserver  [ ] Disk loadbalance  [ ] Dynamic load balance between chunkservers  [ ] File Lock   Directory Lock  [x] Simple multi-geographical replica placement  [ ] Sdk lease  [ ] Skip slow nodes while reading a file", 
            "title": "Basic functions"
        }, 
        {
            "location": "/en/roadmap/#posix-interface", 
            "text": "[x] Mount support  [ ] Fuse lowlevel implementation  [x] Basic read and write operations\uff08not include random writes\uff09  [x] Small file random write, support vim, gcc and other applications  [ ] Large file random write", 
            "title": "Posix interface"
        }, 
        {
            "location": "/en/roadmap/#application-support", 
            "text": "[x] Tera  [ ] Shuttle  [ ] Galaxy", 
            "title": "Application support"
        }
    ]
}